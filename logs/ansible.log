2021-05-17 12:50:09,066 p=1717026 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 12:50:09,066 p=1717026 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 12:50:09,485 p=1717026 u=lma n=ansible | ERROR! A malformed block was encountered while loading a block

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/main.yml': line 43, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Install Postgres on CentOS
  ^ here

2021-05-17 12:55:24,588 p=1718087 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 12:55:24,588 p=1718087 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 12:55:24,828 p=1718087 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 12:55:24,855 p=1718087 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 12:55:26,117 p=1718087 u=lma n=ansible | fatal: [app-test]: UNREACHABLE! => {"changed": false, "msg": "Authentication or permission failure. In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \"/tmp\". Failed command was: ( umask 77 && mkdir -p \"` echo /home/deployer/.ansible/tmp/ansible-tmp-1621245324.8695447-76718739431225 `\" && echo ansible-tmp-1621245324.8695447-76718739431225=\"` echo /home/deployer/.ansible/tmp/ansible-tmp-1621245324.8695447-76718739431225 `\" ), exited with result 1", "unreachable": true}
2021-05-17 12:55:26,119 p=1718087 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 12:55:26,119 p=1718087 u=lma n=ansible | app-test                   : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-17 12:58:05,725 p=1718610 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 12:58:05,725 p=1718610 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 12:58:05,913 p=1718610 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 12:58:05,924 p=1718610 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 12:58:07,693 p=1718610 u=lma n=ansible | fatal: [app-test]: FAILED! => {"msg": "Missing sudo password"}
2021-05-17 12:58:07,695 p=1718610 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 12:58:07,695 p=1718610 u=lma n=ansible | app-test                   : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-17 12:59:31,332 p=1718928 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 12:59:31,332 p=1718928 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 12:59:31,515 p=1718928 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 12:59:31,525 p=1718928 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 12:59:33,189 p=1718928 u=lma n=ansible | fatal: [app-test]: FAILED! => {"msg": "Missing sudo password"}
2021-05-17 12:59:33,190 p=1718928 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 12:59:33,190 p=1718928 u=lma n=ansible | app-test                   : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-17 13:01:00,051 p=1719298 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:01:00,051 p=1719298 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:01:00,237 p=1719298 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:01:00,247 p=1719298 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:01:04,194 p=1719298 u=lma n=ansible | ok: [app-test]
2021-05-17 13:01:04,202 p=1719298 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:01:04,238 p=1719298 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:01:04,247 p=1719298 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:01:04,280 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,289 p=1719298 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:01:04,326 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,334 p=1719298 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:01:04,369 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,378 p=1719298 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:01:04,415 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,425 p=1719298 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:01:04,460 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,469 p=1719298 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:01:04,502 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,508 p=1719298 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 13:01:04,541 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,549 p=1719298 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 13:01:04,583 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,585 p=1719298 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:01:04,585 p=1719298 u=lma n=ansible | app-test                   : ok=2    changed=0    unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2021-05-17 13:02:18,155 p=1719595 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:02:18,155 p=1719595 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:02:18,360 p=1719595 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:02:18,370 p=1719595 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:02:21,149 p=1719595 u=lma n=ansible | ok: [app-test]
2021-05-17 13:02:21,159 p=1719595 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:02:21,199 p=1719595 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:02:21,206 p=1719595 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:02:21,242 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,250 p=1719595 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:02:21,286 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,294 p=1719595 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:02:21,330 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,338 p=1719595 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:02:21,372 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,380 p=1719595 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:02:21,413 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,423 p=1719595 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:02:21,460 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,470 p=1719595 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 13:02:21,504 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,514 p=1719595 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 13:02:21,551 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,553 p=1719595 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:02:21,553 p=1719595 u=lma n=ansible | app-test                   : ok=2    changed=0    unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2021-05-17 13:05:55,551 p=1720327 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:05:55,551 p=1720327 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:05:55,736 p=1720327 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:05:55,745 p=1720327 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:05:58,619 p=1720327 u=lma n=ansible | ok: [app-test]
2021-05-17 13:05:58,627 p=1720327 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:05:58,662 p=1720327 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:05:58,671 p=1720327 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:06:07,210 p=1720327 u=lma n=ansible | changed: [app-test]
2021-05-17 13:06:07,222 p=1720327 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:06:08,911 p=1720327 u=lma n=ansible | ok: [app-test]
2021-05-17 13:06:08,922 p=1720327 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:06:26,104 p=1720327 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:16.617219", "end": "2021-05-17 10:06:26.059671", "msg": "non-zero return code", "rc": 100, "start": "2021-05-17 10:06:09.442452", "stderr": "W: GPG error: http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 7FCC7D46ACCC4CF8\nE: The repository 'http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease' is not signed.", "stderr_lines": ["W: GPG error: http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 7FCC7D46ACCC4CF8", "E: The repository 'http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease' is not signed."], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nHit:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease\nHit:3 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease\nGet:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nHit:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease\nErr:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease\n  The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 7FCC7D46ACCC4CF8\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Hit:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease", "Hit:3 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease", "Get:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Hit:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease", "Err:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease", "  The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 7FCC7D46ACCC4CF8", "Reading package lists..."]}
2021-05-17 13:06:26,105 p=1720327 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:06:26,106 p=1720327 u=lma n=ansible | app-test                   : ok=4    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-17 13:10:40,973 p=1721595 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:10:40,974 p=1721595 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:10:41,177 p=1721595 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:10:41,187 p=1721595 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:10:44,387 p=1721595 u=lma n=ansible | ok: [app-test]
2021-05-17 13:10:44,395 p=1721595 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:10:44,432 p=1721595 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:10:44,442 p=1721595 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:11:00,831 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:11:00,842 p=1721595 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:11:02,588 p=1721595 u=lma n=ansible | ok: [app-test]
2021-05-17 13:11:02,599 p=1721595 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 13:11:03,898 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:11:03,909 p=1721595 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:11:23,118 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:11:23,126 p=1721595 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:11:24,171 p=1721595 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 13:11:24,172 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:11:24,179 p=1721595 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:11:27,081 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:11:27,089 p=1721595 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:12:35,768 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:12:35,783 p=1721595 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 13:12:36,269 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:12:36,280 p=1721595 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 13:12:36,320 p=1721595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:12:36,322 p=1721595 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:12:36,322 p=1721595 u=lma n=ansible | app-test                   : ok=10   changed=7    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2021-05-17 13:13:58,994 p=1722413 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:13:59,000 p=1722413 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:13:59,000 p=1722413 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:13:59,199 p=1722413 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:13:59,209 p=1722413 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:14:02,294 p=1722413 u=lma n=ansible | ok: [app-test]
2021-05-17 13:14:02,303 p=1722413 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:14:02,339 p=1722413 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:14:02,351 p=1722413 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:14:05,246 p=1722413 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621246444, "cache_updated": true, "changed": true}
2021-05-17 13:14:05,256 p=1722413 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:14:06,878 p=1722413 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621246444, "cache_updated": false, "changed": false}
2021-05-17 13:14:06,891 p=1722413 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 13:14:08,227 p=1722413 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.753605", "end": "2021-05-17 10:14:08.172885", "rc": 0, "start": "2021-05-17 10:14:07.419280", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.QCzS1PiSN2/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.QCzS1PiSN2/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 13:14:08,238 p=1722413 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:14:25,277 p=1722413 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:16.581014", "end": "2021-05-17 10:14:25.239889", "rc": 0, "start": "2021-05-17 10:14:08.658875", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nHit:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease\nHit:3 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease\nGet:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nHit:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease\nFetched 81.6 kB in 1s (105 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Hit:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease", "Hit:3 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease", "Get:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Hit:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease", "Fetched 81.6 kB in 1s (105 kB/s)", "Reading package lists..."]}
2021-05-17 13:14:25,286 p=1722413 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:14:26,223 p=1722413 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 13:14:26,224 p=1722413 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.490578", "end": "2021-05-17 10:14:26.176989", "rc": 0, "start": "2021-05-17 10:14:25.686411", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 13:14:26,233 p=1722413 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:14:28,934 p=1722413 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621246468, "cache_updated": true, "changed": true}
2021-05-17 13:14:28,943 p=1722413 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:14:30,559 p=1722413 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621246468, "cache_updated": false, "changed": false}
2021-05-17 13:14:30,571 p=1722413 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 13:14:31,060 p=1722413 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "systemctl status postgresql", "delta": "0:00:00.014828", "end": "2021-05-17 10:14:31.014758", "rc": 0, "start": "2021-05-17 10:14:30.999930", "stderr": "", "stderr_lines": [], "stdout": "● postgresql.service - PostgreSQL RDBMS\n     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)\n     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 2min 25s ago\n   Main PID: 8359 (code=exited, status=0/SUCCESS)\n      Tasks: 0 (limit: 2281)\n     Memory: 0B\n     CGroup: /system.slice/postgresql.service\n\nMay 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...\nMay 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS.", "stdout_lines": ["● postgresql.service - PostgreSQL RDBMS", "     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)", "     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 2min 25s ago", "   Main PID: 8359 (code=exited, status=0/SUCCESS)", "      Tasks: 0 (limit: 2281)", "     Memory: 0B", "     CGroup: /system.slice/postgresql.service", "", "May 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...", "May 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS."]}
2021-05-17 13:14:31,068 p=1722413 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 13:14:31,106 p=1722413 u=lma n=ansible | skipping: [app-test] => {}
2021-05-17 13:14:31,109 p=1722413 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:14:31,109 p=1722413 u=lma n=ansible | app-test                   : ok=10   changed=6    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2021-05-17 13:22:20,063 p=1724502 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:22:20,070 p=1724502 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:22:20,070 p=1724502 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:22:20,260 p=1724502 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:22:20,271 p=1724502 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:22:23,202 p=1724502 u=lma n=ansible | ok: [app-test]
2021-05-17 13:22:23,210 p=1724502 u=lma n=ansible | TASK [app-test : create copy_sql] ***********************************************************************************************************************************************************************************
2021-05-17 13:22:36,495 p=1724502 u=lma n=ansible | changed: [app-test] => {"changed": true, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 13:22:36,498 p=1724502 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:22:36,498 p=1724502 u=lma n=ansible | app-test                   : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-17 13:30:11,829 p=1726439 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:30:11,835 p=1726439 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:30:11,835 p=1726439 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:30:12,077 p=1726439 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:30:12,087 p=1726439 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:30:14,876 p=1726439 u=lma n=ansible | ok: [app-test]
2021-05-17 13:30:14,884 p=1726439 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:30:14,923 p=1726439 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:30:14,930 p=1726439 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 13:30:22,242 p=1726439 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 13:30:22,251 p=1726439 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:30:25,557 p=1726439 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621247424, "cache_updated": true, "changed": true}
2021-05-17 13:30:25,569 p=1726439 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:30:27,179 p=1726439 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621247424, "cache_updated": false, "changed": false}
2021-05-17 13:30:27,190 p=1726439 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 13:30:28,468 p=1726439 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.709295", "end": "2021-05-17 10:30:28.420059", "rc": 0, "start": "2021-05-17 10:30:27.710764", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.TmA3rmSJM7/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.TmA3rmSJM7/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 13:30:28,476 p=1726439 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:30:46,915 p=1726439 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:17.958450", "end": "2021-05-17 10:30:46.869186", "rc": 0, "start": "2021-05-17 10:30:28.910736", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (480 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (480 kB/s)", "Reading package lists..."]}
2021-05-17 13:30:46,926 p=1726439 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:30:48,048 p=1726439 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 13:30:48,048 p=1726439 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.651809", "end": "2021-05-17 10:30:48.002783", "rc": 0, "start": "2021-05-17 10:30:47.350974", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 13:30:48,055 p=1726439 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:30:50,973 p=1726439 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621247450, "cache_updated": true, "changed": true}
2021-05-17 13:30:50,981 p=1726439 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:30:52,630 p=1726439 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621247450, "cache_updated": false, "changed": false}
2021-05-17 13:30:52,640 p=1726439 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 13:30:53,102 p=1726439 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "systemctl status postgresql", "delta": "0:00:00.015030", "end": "2021-05-17 10:30:53.056335", "rc": 0, "start": "2021-05-17 10:30:53.041305", "stderr": "", "stderr_lines": [], "stdout": "● postgresql.service - PostgreSQL RDBMS\n     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)\n     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 18min ago\n   Main PID: 8359 (code=exited, status=0/SUCCESS)\n      Tasks: 0 (limit: 2281)\n     Memory: 0B\n     CGroup: /system.slice/postgresql.service\n\nMay 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...\nMay 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS.", "stdout_lines": ["● postgresql.service - PostgreSQL RDBMS", "     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)", "     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 18min ago", "   Main PID: 8359 (code=exited, status=0/SUCCESS)", "      Tasks: 0 (limit: 2281)", "     Memory: 0B", "     CGroup: /system.slice/postgresql.service", "", "May 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...", "May 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS."]}
2021-05-17 13:30:53,110 p=1726439 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 13:30:53,143 p=1726439 u=lma n=ansible | skipping: [app-test] => {}
2021-05-17 13:30:53,153 p=1726439 u=lma n=ansible | TASK [app-test : Create Postgres User] ******************************************************************************************************************************************************************************
2021-05-17 13:30:53,733 p=1726439 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": false, "msg": "Failed to import the required Python library (psycopg2) on docker-test1's Python /usr/bin/python3. Please read module documentation and install in the appropriate location. If the required library is installed, but Ansible is using the wrong Python interpreter, please consult the documentation on ansible_python_interpreter"}
2021-05-17 13:30:53,735 p=1726439 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:30:53,735 p=1726439 u=lma n=ansible | app-test                   : ok=11   changed=6    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-05-17 13:42:36,206 p=1729406 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:42:36,213 p=1729406 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:42:36,213 p=1729406 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:42:36,377 p=1729406 u=lma n=ansible | ERROR! conflicting action statements: sudo_user, postgresql_db

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/main.yml': line 65, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Create Postgres db
  ^ here

2021-05-17 13:50:26,589 p=1731179 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:50:26,595 p=1731179 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:50:26,595 p=1731179 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:50:26,824 p=1731179 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:50:26,834 p=1731179 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:50:29,977 p=1731179 u=lma n=ansible | ok: [app-test]
2021-05-17 13:50:29,986 p=1731179 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:50:30,023 p=1731179 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:50:30,028 p=1731179 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 13:50:37,532 p=1731179 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 13:50:37,541 p=1731179 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:50:40,903 p=1731179 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621248639, "cache_updated": true, "changed": true}
2021-05-17 13:50:40,913 p=1731179 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:50:42,724 p=1731179 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621248639, "cache_updated": false, "changed": false}
2021-05-17 13:50:42,733 p=1731179 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 13:50:44,055 p=1731179 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.733074", "end": "2021-05-17 10:50:43.997674", "rc": 0, "start": "2021-05-17 10:50:43.264600", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.lXpNcCzOPJ/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.lXpNcCzOPJ/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 13:50:44,064 p=1731179 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:51:01,547 p=1731179 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:16.995008", "end": "2021-05-17 10:51:01.496771", "rc": 0, "start": "2021-05-17 10:50:44.501763", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (457 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (457 kB/s)", "Reading package lists..."]}
2021-05-17 13:51:01,556 p=1731179 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:51:02,491 p=1731179 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 13:51:02,491 p=1731179 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.447738", "end": "2021-05-17 10:51:02.443037", "rc": 0, "start": "2021-05-17 10:51:01.995299", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 13:51:02,499 p=1731179 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 13:51:02,529 p=1731544 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python-psycopg2']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-05-17 13:51:03,177 p=1731179 u=lma n=ansible | failed: [app-test] (item=['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python-psycopg2']) => {"ansible_loop_var": "item", "changed": false, "item": ["postgresql-11", "postgresql-contrib", "libpq-dev", "python-psycopg2"], "msg": "value of state must be one of: absent, build-dep, fixed, latest, present, got: installed"}
2021-05-17 13:51:03,179 p=1731179 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:51:03,179 p=1731179 u=lma n=ansible | app-test                   : ok=8    changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-17 13:51:49,500 p=1731740 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:51:49,506 p=1731740 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:51:49,506 p=1731740 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:51:49,738 p=1731740 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:51:49,748 p=1731740 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:51:51,516 p=1731740 u=lma n=ansible | ok: [app-test]
2021-05-17 13:51:51,524 p=1731740 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:51:51,562 p=1731740 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:51:51,575 p=1731740 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 13:51:59,158 p=1731740 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 13:51:59,166 p=1731740 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:52:02,347 p=1731740 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621248721, "cache_updated": true, "changed": true}
2021-05-17 13:52:02,355 p=1731740 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:52:04,055 p=1731740 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621248721, "cache_updated": false, "changed": false}
2021-05-17 13:52:04,064 p=1731740 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 13:52:05,320 p=1731740 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.687368", "end": "2021-05-17 10:52:05.265129", "rc": 0, "start": "2021-05-17 10:52:04.577761", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.RZYhilouvg/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.RZYhilouvg/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 13:52:05,332 p=1731740 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:52:21,341 p=1731740 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:15.540819", "end": "2021-05-17 10:52:21.293668", "rc": 0, "start": "2021-05-17 10:52:05.752849", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (479 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (479 kB/s)", "Reading package lists..."]}
2021-05-17 13:52:21,352 p=1731740 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:52:22,312 p=1731740 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 13:52:22,313 p=1731740 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.449614", "end": "2021-05-17 10:52:22.262876", "rc": 0, "start": "2021-05-17 10:52:21.813262", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 13:52:22,324 p=1731740 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 13:52:22,358 p=1733405 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python-psycopg2']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-05-17 13:52:25,392 p=1731740 u=lma n=ansible | failed: [app-test] (item=['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python-psycopg2']) => {"ansible_loop_var": "item", "changed": false, "item": ["postgresql-11", "postgresql-contrib", "libpq-dev", "python-psycopg2"], "msg": "No package matching 'python-psycopg2' is available"}
2021-05-17 13:52:25,394 p=1731740 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:52:25,395 p=1731740 u=lma n=ansible | app-test                   : ok=8    changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-17 13:53:02,339 p=1733614 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:53:02,345 p=1733614 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:53:02,346 p=1733614 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:53:02,577 p=1733614 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:53:02,588 p=1733614 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:53:04,376 p=1733614 u=lma n=ansible | ok: [app-test]
2021-05-17 13:53:04,383 p=1733614 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:53:04,422 p=1733614 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:53:04,430 p=1733614 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 13:53:12,214 p=1733614 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 13:53:12,223 p=1733614 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:53:15,437 p=1733614 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621248794, "cache_updated": true, "changed": true}
2021-05-17 13:53:15,447 p=1733614 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:53:17,212 p=1733614 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621248794, "cache_updated": false, "changed": false}
2021-05-17 13:53:17,221 p=1733614 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 13:53:18,503 p=1733614 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.708302", "end": "2021-05-17 10:53:18.449220", "rc": 0, "start": "2021-05-17 10:53:17.740918", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.lKfwY5lHp5/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.lKfwY5lHp5/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 13:53:18,512 p=1733614 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:53:34,162 p=1733614 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:15.182466", "end": "2021-05-17 10:53:34.118828", "rc": 0, "start": "2021-05-17 10:53:18.936362", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (492 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (492 kB/s)", "Reading package lists..."]}
2021-05-17 13:53:34,170 p=1733614 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:53:35,047 p=1733614 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 13:53:35,048 p=1733614 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.429303", "end": "2021-05-17 10:53:35.005896", "rc": 0, "start": "2021-05-17 10:53:34.576593", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 13:53:35,055 p=1733614 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 13:53:35,088 p=1734037 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-05-17 13:54:10,462 p=1733614 u=lma n=ansible | changed: [app-test] => (item=['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2']) => {"ansible_loop_var": "item", "cache_update_time": 1621248817, "cache_updated": true, "changed": true, "item": ["postgresql-11", "postgresql-contrib", "libpq-dev", "python3-psycopg2"], "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  postgresql-13 postgresql-client-13\nSuggested packages:\n  postgresql-doc-13 python-psycopg2-doc\nThe following NEW packages will be installed:\n  libpq-dev postgresql-13 postgresql-client-13 postgresql-contrib\n  python3-psycopg2\n0 upgraded, 5 newly installed, 0 to remove and 117 not upgraded.\nNeed to get 16.9 MB of archives.\nAfter this operation, 56.6 MB of additional disk space will be used.\nGet:1 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 libpq-dev amd64 13.3-1.pgdg20.04+1 [137 kB]\nGet:2 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-client-13 amd64 13.3-1.pgdg20.04+1 [1501 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-13 amd64 13.3-1.pgdg20.04+1 [15.1 MB]\nGet:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-contrib all 13+226.pgdg20.04+1 [65.2 kB]\nGet:5 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 python3-psycopg2 amd64 2.8.6-2~pgdg20.04+1 [120 kB]\nPreconfiguring packages ...\nFetched 16.9 MB in 3s (5411 kB/s)\nSelecting previously unselected package libpq-dev.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 73770 files and directories currently installed.)\r\nPreparing to unpack .../libpq-dev_13.3-1.pgdg20.04+1_amd64.deb ...\r\nUnpacking libpq-dev (13.3-1.pgdg20.04+1) ...\r\nSelecting previously unselected package postgresql-client-13.\r\nPreparing to unpack .../postgresql-client-13_13.3-1.pgdg20.04+1_amd64.deb ...\r\nUnpacking postgresql-client-13 (13.3-1.pgdg20.04+1) ...\r\nSelecting previously unselected package postgresql-13.\r\nPreparing to unpack .../postgresql-13_13.3-1.pgdg20.04+1_amd64.deb ...\r\nUnpacking postgresql-13 (13.3-1.pgdg20.04+1) ...\r\nSelecting previously unselected package postgresql-contrib.\r\nPreparing to unpack .../postgresql-contrib_13+226.pgdg20.04+1_all.deb ...\r\nUnpacking postgresql-contrib (13+226.pgdg20.04+1) ...\r\nSelecting previously unselected package python3-psycopg2.\r\nPreparing to unpack .../python3-psycopg2_2.8.6-2~pgdg20.04+1_amd64.deb ...\r\nUnpacking python3-psycopg2 (2.8.6-2~pgdg20.04+1) ...\r\nSetting up libpq-dev (13.3-1.pgdg20.04+1) ...\r\nSetting up postgresql-client-13 (13.3-1.pgdg20.04+1) ...\r\nupdate-alternatives: using /usr/share/postgresql/13/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode\r\nSetting up python3-psycopg2 (2.8.6-2~pgdg20.04+1) ...\r\nSetting up postgresql-13 (13.3-1.pgdg20.04+1) ...\r\nCreating new PostgreSQL cluster 13/main ...\r\n/usr/lib/postgresql/13/bin/initdb -D /var/lib/postgresql/13/main --auth-local peer --auth-host md5\r\nThe files belonging to this database system will be owned by user \"postgres\".\r\nThis user must also own the server process.\r\n\r\nThe database cluster will be initialized with locale \"C.UTF-8\".\r\nThe default database encoding has accordingly been set to \"UTF8\".\r\nThe default text search configuration will be set to \"english\".\r\n\r\nData page checksums are disabled.\r\n\r\nfixing permissions on existing directory /var/lib/postgresql/13/main ... ok\r\ncreating subdirectories ... ok\r\nselecting dynamic shared memory implementation ... posix\r\nselecting default max_connections ... 100\r\nselecting default shared_buffers ... 128MB\r\nselecting default time zone ... Etc/UTC\r\ncreating configuration files ... ok\r\nrunning bootstrap script ... ok\r\nperforming post-bootstrap initialization ... ok\r\nsyncing data to disk ... ok\r\n\r\nSuccess. You can now start the database server using:\r\n\r\n    pg_ctlcluster 13 main start\r\n\r\nVer Cluster Port Status Owner    Data directory              Log file\r\n\u001b[31m13  main    5433 down   postgres /var/lib/postgresql/13/main /var/log/postgresql/postgresql-13-main.log\u001b[0m\r\nupdate-alternatives: using /usr/share/postgresql/13/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode\r\nSetting up postgresql-contrib (13+226.pgdg20.04+1) ...\r\nProcessing triggers for postgresql-common (226.pgdg20.04+1) ...\r\nBuilding PostgreSQL dictionaries from installed myspell/hunspell packages...\r\nRemoving obsolete dictionary files:\r\nProcessing triggers for man-db (2.9.1-1) ...\r\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following additional packages will be installed:", "  postgresql-13 postgresql-client-13", "Suggested packages:", "  postgresql-doc-13 python-psycopg2-doc", "The following NEW packages will be installed:", "  libpq-dev postgresql-13 postgresql-client-13 postgresql-contrib", "  python3-psycopg2", "0 upgraded, 5 newly installed, 0 to remove and 117 not upgraded.", "Need to get 16.9 MB of archives.", "After this operation, 56.6 MB of additional disk space will be used.", "Get:1 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 libpq-dev amd64 13.3-1.pgdg20.04+1 [137 kB]", "Get:2 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-client-13 amd64 13.3-1.pgdg20.04+1 [1501 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-13 amd64 13.3-1.pgdg20.04+1 [15.1 MB]", "Get:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-contrib all 13+226.pgdg20.04+1 [65.2 kB]", "Get:5 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 python3-psycopg2 amd64 2.8.6-2~pgdg20.04+1 [120 kB]", "Preconfiguring packages ...", "Fetched 16.9 MB in 3s (5411 kB/s)", "Selecting previously unselected package libpq-dev.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 73770 files and directories currently installed.)", "Preparing to unpack .../libpq-dev_13.3-1.pgdg20.04+1_amd64.deb ...", "Unpacking libpq-dev (13.3-1.pgdg20.04+1) ...", "Selecting previously unselected package postgresql-client-13.", "Preparing to unpack .../postgresql-client-13_13.3-1.pgdg20.04+1_amd64.deb ...", "Unpacking postgresql-client-13 (13.3-1.pgdg20.04+1) ...", "Selecting previously unselected package postgresql-13.", "Preparing to unpack .../postgresql-13_13.3-1.pgdg20.04+1_amd64.deb ...", "Unpacking postgresql-13 (13.3-1.pgdg20.04+1) ...", "Selecting previously unselected package postgresql-contrib.", "Preparing to unpack .../postgresql-contrib_13+226.pgdg20.04+1_all.deb ...", "Unpacking postgresql-contrib (13+226.pgdg20.04+1) ...", "Selecting previously unselected package python3-psycopg2.", "Preparing to unpack .../python3-psycopg2_2.8.6-2~pgdg20.04+1_amd64.deb ...", "Unpacking python3-psycopg2 (2.8.6-2~pgdg20.04+1) ...", "Setting up libpq-dev (13.3-1.pgdg20.04+1) ...", "Setting up postgresql-client-13 (13.3-1.pgdg20.04+1) ...", "update-alternatives: using /usr/share/postgresql/13/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode", "Setting up python3-psycopg2 (2.8.6-2~pgdg20.04+1) ...", "Setting up postgresql-13 (13.3-1.pgdg20.04+1) ...", "Creating new PostgreSQL cluster 13/main ...", "/usr/lib/postgresql/13/bin/initdb -D /var/lib/postgresql/13/main --auth-local peer --auth-host md5", "The files belonging to this database system will be owned by user \"postgres\".", "This user must also own the server process.", "", "The database cluster will be initialized with locale \"C.UTF-8\".", "The default database encoding has accordingly been set to \"UTF8\".", "The default text search configuration will be set to \"english\".", "", "Data page checksums are disabled.", "", "fixing permissions on existing directory /var/lib/postgresql/13/main ... ok", "creating subdirectories ... ok", "selecting dynamic shared memory implementation ... posix", "selecting default max_connections ... 100", "selecting default shared_buffers ... 128MB", "selecting default time zone ... Etc/UTC", "creating configuration files ... ok", "running bootstrap script ... ok", "performing post-bootstrap initialization ... ok", "syncing data to disk ... ok", "", "Success. You can now start the database server using:", "", "    pg_ctlcluster 13 main start", "", "Ver Cluster Port Status Owner    Data directory              Log file", "\u001b[31m13  main    5433 down   postgres /var/lib/postgresql/13/main /var/log/postgresql/postgresql-13-main.log\u001b[0m", "update-alternatives: using /usr/share/postgresql/13/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode", "Setting up postgresql-contrib (13+226.pgdg20.04+1) ...", "Processing triggers for postgresql-common (226.pgdg20.04+1) ...", "Building PostgreSQL dictionaries from installed myspell/hunspell packages...", "Removing obsolete dictionary files:", "Processing triggers for man-db (2.9.1-1) ..."]}
2021-05-17 13:54:10,470 p=1733614 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 13:54:10,955 p=1733614 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "systemctl status postgresql", "delta": "0:00:00.013677", "end": "2021-05-17 10:54:10.911962", "rc": 0, "start": "2021-05-17 10:54:10.898285", "stderr": "", "stderr_lines": [], "stdout": "● postgresql.service - PostgreSQL RDBMS\n     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)\n     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 42min ago\n   Main PID: 8359 (code=exited, status=0/SUCCESS)\n      Tasks: 0 (limit: 2281)\n     Memory: 0B\n     CGroup: /system.slice/postgresql.service\n\nMay 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...\nMay 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS.", "stdout_lines": ["● postgresql.service - PostgreSQL RDBMS", "     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)", "     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 42min ago", "   Main PID: 8359 (code=exited, status=0/SUCCESS)", "      Tasks: 0 (limit: 2281)", "     Memory: 0B", "     CGroup: /system.slice/postgresql.service", "", "May 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...", "May 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS."]}
2021-05-17 13:54:10,964 p=1733614 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 13:54:10,999 p=1733614 u=lma n=ansible | skipping: [app-test] => {}
2021-05-17 13:54:11,009 p=1733614 u=lma n=ansible | TASK [app-test : Create Postgres db] ********************************************************************************************************************************************************************************
2021-05-17 13:54:11,328 p=1733614 u=lma n=ansible | fatal: [app-test]: FAILED! => {"msg": "Failed to set permissions on the temporary files Ansible needs to create when becoming an unprivileged user (rc: 1, err: chown: changing ownership of '/var/tmp/ansible-tmp-1621248851.0214038-260798966648374/': Operation not permitted\nchown: changing ownership of '/var/tmp/ansible-tmp-1621248851.0214038-260798966648374/AnsiballZ_postgresql_db.py': Operation not permitted\n}). For information on working around this, see https://docs.ansible.com/ansible/become.html#becoming-an-unprivileged-user"}
2021-05-17 13:54:11,330 p=1733614 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:54:11,330 p=1733614 u=lma n=ansible | app-test                   : ok=10   changed=6    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-05-17 14:00:04,330 p=1735533 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 14:00:04,336 p=1735533 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 14:00:04,337 p=1735533 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 14:00:04,564 p=1735533 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 14:00:04,574 p=1735533 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 14:00:07,618 p=1735533 u=lma n=ansible | ok: [app-test]
2021-05-17 14:00:07,629 p=1735533 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 14:00:07,667 p=1735533 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 14:00:07,675 p=1735533 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 14:00:15,163 p=1735533 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 14:00:15,174 p=1735533 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 14:00:18,473 p=1735533 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621249217, "cache_updated": true, "changed": true}
2021-05-17 14:00:18,482 p=1735533 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 14:00:20,175 p=1735533 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621249217, "cache_updated": false, "changed": false}
2021-05-17 14:00:20,186 p=1735533 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 14:00:21,496 p=1735533 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.717158", "end": "2021-05-17 11:00:21.441269", "rc": 0, "start": "2021-05-17 11:00:20.724111", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.HQCRT4OSAc/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.HQCRT4OSAc/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 14:00:21,507 p=1735533 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 14:00:36,903 p=1735533 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:14.907643", "end": "2021-05-17 11:00:36.862142", "rc": 0, "start": "2021-05-17 11:00:21.954499", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (449 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (449 kB/s)", "Reading package lists..."]}
2021-05-17 14:00:36,914 p=1735533 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 14:00:38,074 p=1735533 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 14:00:38,074 p=1735533 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.610268", "end": "2021-05-17 11:00:38.034225", "rc": 0, "start": "2021-05-17 11:00:37.423957", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 14:00:38,084 p=1735533 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 14:00:38,114 p=1735907 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-05-17 14:00:41,992 p=1735533 u=lma n=ansible | ok: [app-test] => (item=['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2']) => {"ansible_loop_var": "item", "cache_update_time": 1621249240, "cache_updated": true, "changed": false, "item": ["postgresql-11", "postgresql-contrib", "libpq-dev", "python3-psycopg2"]}
2021-05-17 14:00:42,004 p=1735533 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 14:00:42,475 p=1735533 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "systemctl status postgresql", "delta": "0:00:00.013324", "end": "2021-05-17 11:00:42.435715", "rc": 0, "start": "2021-05-17 11:00:42.422391", "stderr": "", "stderr_lines": [], "stdout": "● postgresql.service - PostgreSQL RDBMS\n     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)\n     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 48min ago\n   Main PID: 8359 (code=exited, status=0/SUCCESS)\n      Tasks: 0 (limit: 2281)\n     Memory: 0B\n     CGroup: /system.slice/postgresql.service\n\nMay 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...\nMay 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS.", "stdout_lines": ["● postgresql.service - PostgreSQL RDBMS", "     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)", "     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 48min ago", "   Main PID: 8359 (code=exited, status=0/SUCCESS)", "      Tasks: 0 (limit: 2281)", "     Memory: 0B", "     CGroup: /system.slice/postgresql.service", "", "May 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...", "May 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS."]}
2021-05-17 14:00:42,484 p=1735533 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 14:00:42,518 p=1735533 u=lma n=ansible | skipping: [app-test] => {}
2021-05-17 14:00:42,524 p=1735533 u=lma n=ansible | TASK [app-test : Create Postgres db] ********************************************************************************************************************************************************************************
2021-05-17 14:00:42,870 p=1735533 u=lma n=ansible | fatal: [app-test]: FAILED! => {"msg": "Failed to set permissions on the temporary files Ansible needs to create when becoming an unprivileged user (rc: 1, err: chown: changing ownership of '/var/tmp/ansible-tmp-1621249242.5392995-140465707641734/': Operation not permitted\nchown: changing ownership of '/var/tmp/ansible-tmp-1621249242.5392995-140465707641734/AnsiballZ_postgresql_db.py': Operation not permitted\n}). For information on working around this, see https://docs.ansible.com/ansible/become.html#becoming-an-unprivileged-user"}
2021-05-17 14:00:42,871 p=1735533 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 14:00:42,872 p=1735533 u=lma n=ansible | app-test                   : ok=10   changed=5    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-05-17 14:07:16,573 p=1737300 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 14:07:16,579 p=1737300 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 14:07:16,579 p=1737300 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 14:07:16,820 p=1737300 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 14:07:16,831 p=1737300 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 14:07:19,839 p=1737300 u=lma n=ansible | ok: [app-test]
2021-05-17 14:07:19,847 p=1737300 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 14:07:19,883 p=1737300 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 14:07:19,891 p=1737300 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 14:07:27,466 p=1737300 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 14:07:27,474 p=1737300 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 14:07:30,543 p=1737300 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621249649, "cache_updated": true, "changed": true}
2021-05-17 14:07:30,554 p=1737300 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 14:07:44,949 p=1737300 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621249649, "cache_updated": false, "changed": true, "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following NEW packages will be installed:\n  acl\n0 upgraded, 1 newly installed, 0 to remove and 117 not upgraded.\nNeed to get 37.8 kB of archives.\nAfter this operation, 197 kB of additional disk space will be used.\nGet:1 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 acl amd64 2.2.53-6 [37.8 kB]\nFetched 37.8 kB in 0s (287 kB/s)\nSelecting previously unselected package acl.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 75644 files and directories currently installed.)\r\nPreparing to unpack .../acl_2.2.53-6_amd64.deb ...\r\nUnpacking acl (2.2.53-6) ...\r\nSetting up acl (2.2.53-6) ...\r\nProcessing triggers for man-db (2.9.1-1) ...\r\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following NEW packages will be installed:", "  acl", "0 upgraded, 1 newly installed, 0 to remove and 117 not upgraded.", "Need to get 37.8 kB of archives.", "After this operation, 197 kB of additional disk space will be used.", "Get:1 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 acl amd64 2.2.53-6 [37.8 kB]", "Fetched 37.8 kB in 0s (287 kB/s)", "Selecting previously unselected package acl.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 75644 files and directories currently installed.)", "Preparing to unpack .../acl_2.2.53-6_amd64.deb ...", "Unpacking acl (2.2.53-6) ...", "Setting up acl (2.2.53-6) ...", "Processing triggers for man-db (2.9.1-1) ..."]}
2021-05-17 14:07:44,958 p=1737300 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 14:07:46,338 p=1737300 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.800857", "end": "2021-05-17 11:07:46.291916", "rc": 0, "start": "2021-05-17 11:07:45.491059", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.SR80mzg6j3/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.SR80mzg6j3/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 14:07:46,346 p=1737300 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 14:08:01,903 p=1737300 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:15.071107", "end": "2021-05-17 11:08:01.857601", "rc": 0, "start": "2021-05-17 11:07:46.786494", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (364 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (364 kB/s)", "Reading package lists..."]}
2021-05-17 14:08:01,915 p=1737300 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 14:08:02,913 p=1737300 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 14:08:02,913 p=1737300 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.518264", "end": "2021-05-17 11:08:02.866061", "rc": 0, "start": "2021-05-17 11:08:02.347797", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 14:08:02,926 p=1737300 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 14:08:02,960 p=1737717 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-05-17 14:08:06,264 p=1737300 u=lma n=ansible | ok: [app-test] => (item=['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2']) => {"ansible_loop_var": "item", "cache_update_time": 1621249684, "cache_updated": true, "changed": false, "item": ["postgresql-11", "postgresql-contrib", "libpq-dev", "python3-psycopg2"]}
2021-05-17 14:08:06,271 p=1737300 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 14:08:06,761 p=1737300 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "systemctl status postgresql", "delta": "0:00:00.014380", "end": "2021-05-17 11:08:06.707754", "rc": 0, "start": "2021-05-17 11:08:06.693374", "stderr": "", "stderr_lines": [], "stdout": "● postgresql.service - PostgreSQL RDBMS\n     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)\n     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 56min ago\n   Main PID: 8359 (code=exited, status=0/SUCCESS)\n      Tasks: 0 (limit: 2281)\n     Memory: 0B\n     CGroup: /system.slice/postgresql.service\n\nMay 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...\nMay 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS.", "stdout_lines": ["● postgresql.service - PostgreSQL RDBMS", "     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)", "     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 56min ago", "   Main PID: 8359 (code=exited, status=0/SUCCESS)", "      Tasks: 0 (limit: 2281)", "     Memory: 0B", "     CGroup: /system.slice/postgresql.service", "", "May 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...", "May 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS."]}
2021-05-17 14:08:06,769 p=1737300 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 14:08:06,806 p=1737300 u=lma n=ansible | skipping: [app-test] => {}
2021-05-17 14:08:06,816 p=1737300 u=lma n=ansible | TASK [app-test : Create Postgres db] ********************************************************************************************************************************************************************************
2021-05-17 14:08:08,009 p=1737300 u=lma n=ansible | changed: [app-test] => {"changed": true, "db": "app"}
2021-05-17 14:08:08,019 p=1737300 u=lma n=ansible | TASK [app-test : Create Postgres DB user] ***************************************************************************************************************************************************************************
2021-05-17 14:08:08,917 p=1737300 u=lma n=ansible | [WARNING]: Module did not set no_log for no_password_changes

2021-05-17 14:08:08,917 p=1737300 u=lma n=ansible | changed: [app-test] => {"changed": true, "queries": ["CREATE USER \"********\" WITH ENCRYPTED PASSWORD %(password)s ", "GRANT CREATE, CONNECT, TEMPORARY ON DATABASE \"app\" TO \"********\""], "user": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"}
2021-05-17 14:08:08,920 p=1737300 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 14:08:08,920 p=1737300 u=lma n=ansible | app-test                   : ok=12   changed=8    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2021-05-17 14:47:28,035 p=1747598 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 14:47:28,041 p=1747598 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 14:47:28,042 p=1747598 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 14:47:28,176 p=1747598 u=lma n=ansible | ERROR! failed to combine variables, expected dicts but got a 'dict' and a 'AnsibleUnicode': 
{}
"project_name=\"python-sample-app\""
2021-05-17 14:48:17,748 p=1747778 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 14:48:17,755 p=1747778 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 14:48:17,755 p=1747778 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 14:48:17,985 p=1747778 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 14:48:17,996 p=1747778 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 14:48:21,049 p=1747778 u=lma n=ansible | ok: [app-test]
2021-05-17 14:48:21,055 p=1747778 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 14:48:21,091 p=1747778 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 14:48:21,105 p=1747778 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 14:48:24,557 p=1747778 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621252103, "cache_updated": true, "changed": false}
2021-05-17 14:48:24,567 p=1747778 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 14:48:25,955 p=1747778 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.777267", "end": "2021-05-17 11:48:25.889643", "rc": 0, "start": "2021-05-17 11:48:25.112376", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.AlvsAvZsx3/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.AlvsAvZsx3/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 14:48:25,967 p=1747778 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 14:48:42,097 p=1747778 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:15.672501", "end": "2021-05-17 11:48:42.054753", "rc": 0, "start": "2021-05-17 11:48:26.382252", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (444 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (444 kB/s)", "Reading package lists..."]}
2021-05-17 14:48:42,107 p=1747778 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 14:48:43,035 p=1747778 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 14:48:43,036 p=1747778 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.460265", "end": "2021-05-17 11:48:42.991614", "rc": 0, "start": "2021-05-17 11:48:42.531349", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 14:48:43,044 p=1747778 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 14:48:43,078 p=1747962 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2', 'python-pip', 'python3-pip']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2021-05-17 14:48:45,846 p=1747778 u=lma n=ansible | failed: [app-test] (item=['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2', 'python-pip', 'python3-pip']) => {"ansible_loop_var": "item", "changed": false, "item": ["postgresql-11", "postgresql-contrib", "libpq-dev", "python3-psycopg2", "python-pip", "python3-pip"], "msg": "No package matching 'python-pip' is available"}
2021-05-17 14:48:45,849 p=1747778 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 14:48:45,849 p=1747778 u=lma n=ansible | app-test                   : ok=6    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-17 14:49:30,140 p=1748126 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 14:49:30,146 p=1748126 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 14:49:30,146 p=1748126 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 14:49:30,400 p=1748126 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 14:49:30,411 p=1748126 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 14:49:32,370 p=1748126 u=lma n=ansible | ok: [app-test]
2021-05-17 14:49:32,382 p=1748126 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 14:49:32,417 p=1748126 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 14:49:32,426 p=1748126 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 14:49:32,459 p=1748126 u=lma n=ansible | skipping: [app-test] => {"changed": false, "skip_reason": "Conditional result was False"}
2021-05-17 14:49:32,469 p=1748126 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 14:49:32,505 p=1748126 u=lma n=ansible | skipping: [app-test] => {"changed": false, "skip_reason": "Conditional result was False"}
2021-05-17 14:49:32,514 p=1748126 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 14:49:32,550 p=1748126 u=lma n=ansible | skipping: [app-test] => {"changed": false, "skip_reason": "Conditional result was False"}
2021-05-17 14:49:32,558 p=1748126 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 14:49:32,597 p=1748126 u=lma n=ansible | skipping: [app-test] => {"changed": false, "skip_reason": "Conditional result was False"}
2021-05-17 14:49:32,603 p=1748126 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 14:49:32,634 p=1748160 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2', 'python3-pip']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-05-17 14:49:32,651 p=1748126 u=lma n=ansible | skipping: [app-test] => (item=[])  => {"ansible_loop_var": "item", "changed": false, "item": [], "skip_reason": "Conditional result was False"}
2021-05-17 14:49:32,658 p=1748126 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 14:49:32,692 p=1748126 u=lma n=ansible | skipping: [app-test] => {"changed": false, "skip_reason": "Conditional result was False"}
2021-05-17 14:49:32,696 p=1748126 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 14:49:32,730 p=1748126 u=lma n=ansible | skipping: [app-test] => {}
2021-05-17 14:49:32,737 p=1748126 u=lma n=ansible | TASK [app-test : Create Postgres db] ********************************************************************************************************************************************************************************
2021-05-17 14:49:33,327 p=1748126 u=lma n=ansible | ok: [app-test] => {"changed": false, "db": "app"}
2021-05-17 14:49:33,338 p=1748126 u=lma n=ansible | TASK [app-test : Create Postgres DB user] ***************************************************************************************************************************************************************************
2021-05-17 14:49:33,964 p=1748126 u=lma n=ansible | [WARNING]: Module did not set no_log for no_password_changes

2021-05-17 14:49:33,965 p=1748126 u=lma n=ansible | ok: [app-test] => {"changed": false, "queries": [], "user": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"}
2021-05-17 14:49:33,978 p=1748126 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 14:49:40,831 p=1748126 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 14:49:40,840 p=1748126 u=lma n=ansible | TASK [app-test : create virtualenv and install django in it] ********************************************************************************************************************************************************
2021-05-17 14:49:41,570 p=1748126 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": false, "msg": "Failed to find required executable virtualenv in paths: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin"}
2021-05-17 14:49:41,572 p=1748126 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 14:49:41,572 p=1748126 u=lma n=ansible | app-test                   : ok=5    changed=0    unreachable=0    failed=1    skipped=7    rescued=0    ignored=0   
2021-05-20 09:40:24,593 p=2585352 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 09:40:24,599 p=2585352 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:40:24,599 p=2585352 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 09:40:24,736 p=2585352 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  but found another document

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/vars/main.yml': line 5, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


---
^ here

2021-05-20 09:41:41,596 p=2585578 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 09:41:41,602 p=2585578 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:41:41,602 p=2585578 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 09:41:41,733 p=2585578 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/main.yml': line 2, column 8, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

- name Prepare
  block:
       ^ here

2021-05-20 09:42:15,718 p=2585676 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 09:42:15,725 p=2585676 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:42:15,725 p=2585676 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 09:42:15,859 p=2585676 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/main.yml': line 7, column 8, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

- name Prepare
  block:
       ^ here

2021-05-20 09:42:46,077 p=2585770 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 09:42:46,084 p=2585770 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:42:46,084 p=2585770 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 09:42:46,236 p=2585770 u=lma n=ansible | ERROR! unexpected parameter type in action: <class 'ansible.parsing.yaml.objects.AnsibleSequence'>

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/main.yml': line 15, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

      # Web root paths + app name + home
    - set_fact:
      ^ here

2021-05-20 09:43:40,674 p=2585937 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 09:43:40,680 p=2585937 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:43:40,680 p=2585937 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 09:43:40,832 p=2585937 u=lma n=ansible | ERROR! unexpected parameter type in action: <class 'ansible.parsing.yaml.objects.AnsibleSequence'>

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/main.yml': line 15, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

      # Web root paths + app name + home
    - name: setup vars for ubuntu
      ^ here

2021-05-20 09:43:58,127 p=2585983 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 09:43:58,133 p=2585983 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:43:58,134 p=2585983 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 09:43:58,295 p=2585983 u=lma n=ansible | [DEPRECATION WARNING]: Included file '/home/lma/work/new/ansible-test/playbooks/nginx.yaml' not found, however since this include is not explicitly marked as 'static: yes', we will try and include it dynamically 
later. In the future, this will be an error unless 'static: no' is used on the include task. If you do not want missing includes to be considered dynamic, use 'static: yes' on the include or set the global 
ansible.cfg options to make all includes static for tasks and/or handlers. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:43:58,328 p=2585983 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 09:43:58,337 p=2585983 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 09:44:02,072 p=2585983 u=lma n=ansible | ok: [app-test]
2021-05-20 09:44:02,081 p=2585983 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 09:44:02,116 p=2585983 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 09:44:02,124 p=2585983 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 09:44:22,250 p=2585983 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621493045, "cache_updated": true, "changed": false}
2021-05-20 09:44:22,261 p=2585983 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 09:44:22,298 p=2585983 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/srv/www", "web_server_group": "www-data"}, "changed": false}
2021-05-20 09:44:22,307 p=2585983 u=lma n=ansible | TASK [app-test : include] *******************************************************************************************************************************************************************************************
2021-05-20 09:44:22,321 p=2585983 u=lma n=ansible | fatal: [app-test]: FAILED! => {"reason": "Could not find or access '/home/lma/work/new/ansible-test/playbooks/nginx.yaml' on the Ansible Controller."}
2021-05-20 09:44:22,322 p=2585983 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 09:44:22,322 p=2585983 u=lma n=ansible | app-test                   : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-20 09:44:49,148 p=2586182 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 09:44:49,154 p=2586182 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:44:49,155 p=2586182 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 09:44:49,308 p=2586182 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  did not find expected '-' indicator

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/nginx.yml': line 40, column 5, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

        - error.log
    when:
    ^ here

2021-05-20 09:45:20,347 p=2586262 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 09:45:20,353 p=2586262 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:45:20,353 p=2586262 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 09:45:20,545 p=2586262 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 09:45:20,555 p=2586262 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 09:45:22,278 p=2586262 u=lma n=ansible | ok: [app-test]
2021-05-20 09:45:22,289 p=2586262 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 09:45:22,325 p=2586262 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 09:45:22,338 p=2586262 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 09:45:25,601 p=2586262 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621493124, "cache_updated": true, "changed": false}
2021-05-20 09:45:25,611 p=2586262 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 09:45:25,649 p=2586262 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/srv/www", "web_server_group": "www-data"}, "changed": false}
2021-05-20 09:45:25,658 p=2586262 u=lma n=ansible | TASK [app-test : install nginx webserver] ***************************************************************************************************************************************************************************
2021-05-20 09:45:52,291 p=2586262 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621493124, "cache_updated": false, "changed": true, "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  fontconfig-config fonts-dejavu-core geoip-database libfontconfig1 libgd3\n  libgeoip1 libjbig0 libjpeg-turbo8 libjpeg8 libnginx-mod-http-auth-pam\n  libnginx-mod-http-dav-ext libnginx-mod-http-echo libnginx-mod-http-geoip\n  libnginx-mod-http-geoip2 libnginx-mod-http-image-filter\n  libnginx-mod-http-subs-filter libnginx-mod-http-upstream-fair\n  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream libtiff5\n  libwebp6 libxpm4 nginx-common\nSuggested packages:\n  libgd-tools geoip-bin fcgiwrap nginx-doc\nThe following NEW packages will be installed:\n  fontconfig-config fonts-dejavu-core geoip-database libfontconfig1 libgd3\n  libgeoip1 libjbig0 libjpeg-turbo8 libjpeg8 libnginx-mod-http-auth-pam\n  libnginx-mod-http-dav-ext libnginx-mod-http-echo libnginx-mod-http-geoip\n  libnginx-mod-http-geoip2 libnginx-mod-http-image-filter\n  libnginx-mod-http-subs-filter libnginx-mod-http-upstream-fair\n  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream libtiff5\n  libwebp6 libxpm4 nginx-common nginx-full\n0 upgraded, 25 newly installed, 0 to remove and 119 not upgraded.\nNeed to get 5617 kB of archives.\nAfter this operation, 18.9 MB of additional disk space will be used.\nGet:1 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 fonts-dejavu-core all 2.37-1 [1041 kB]\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 fontconfig-config all 2.13.1-2ubuntu3 [28.8 kB]\nGet:3 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 geoip-database all 20191224-2 [3029 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libfontconfig1 amd64 2.13.1-2ubuntu3 [114 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libjpeg-turbo8 amd64 2.0.3-0ubuntu1.20.04.1 [117 kB]\nGet:6 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libjpeg8 amd64 8c-2ubuntu8 [2194 B]\nGet:7 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libjbig0 amd64 2.1-3.1build1 [26.7 kB]\nGet:8 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libwebp6 amd64 0.6.1-2 [185 kB]\nGet:9 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libtiff5 amd64 4.1.0+git191117-2ubuntu0.20.04.1 [162 kB]\nGet:10 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libxpm4 amd64 1:3.5.12-1 [34.0 kB]\nGet:11 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libgd3 amd64 2.2.5-5.2ubuntu2 [118 kB]\nGet:12 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 libgeoip1 amd64 1.6.12-6build1 [70.5 kB]\nGet:13 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 nginx-common all 1.18.0-0ubuntu1 [37.3 kB]\nGet:14 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-auth-pam amd64 1.18.0-0ubuntu1 [9528 B]\nGet:15 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-dav-ext amd64 1.18.0-0ubuntu1 [11.4 kB]\nGet:16 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-echo amd64 1.18.0-0ubuntu1 [21.0 kB]\nGet:17 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-geoip amd64 1.18.0-0ubuntu1 [10.8 kB]\nGet:18 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-geoip2 amd64 1.18.0-0ubuntu1 [11.3 kB]\nGet:19 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libnginx-mod-http-image-filter amd64 1.18.0-0ubuntu1 [14.3 kB]\nGet:20 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-subs-filter amd64 1.18.0-0ubuntu1 [12.6 kB]\nGet:21 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-upstream-fair amd64 1.18.0-0ubuntu1 [12.7 kB]\nGet:22 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libnginx-mod-http-xslt-filter amd64 1.18.0-0ubuntu1 [12.6 kB]\nGet:23 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libnginx-mod-mail amd64 1.18.0-0ubuntu1 [42.3 kB]\nGet:24 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libnginx-mod-stream amd64 1.18.0-0ubuntu1 [66.9 kB]\nGet:25 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 nginx-full amd64 1.18.0-0ubuntu1 [425 kB]\nPreconfiguring packages ...\nFetched 5617 kB in 1s (7469 kB/s)\nSelecting previously unselected package fonts-dejavu-core.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 75654 files and directories currently installed.)\r\nPreparing to unpack .../00-fonts-dejavu-core_2.37-1_all.deb ...\r\nUnpacking fonts-dejavu-core (2.37-1) ...\r\nSelecting previously unselected package fontconfig-config.\r\nPreparing to unpack .../01-fontconfig-config_2.13.1-2ubuntu3_all.deb ...\r\nUnpacking fontconfig-config (2.13.1-2ubuntu3) ...\r\nSelecting previously unselected package geoip-database.\r\nPreparing to unpack .../02-geoip-database_20191224-2_all.deb ...\r\nUnpacking geoip-database (20191224-2) ...\r\nSelecting previously unselected package libfontconfig1:amd64.\r\nPreparing to unpack .../03-libfontconfig1_2.13.1-2ubuntu3_amd64.deb ...\r\nUnpacking libfontconfig1:amd64 (2.13.1-2ubuntu3) ...\r\nSelecting previously unselected package libjpeg-turbo8:amd64.\r\nPreparing to unpack .../04-libjpeg-turbo8_2.0.3-0ubuntu1.20.04.1_amd64.deb ...\r\nUnpacking libjpeg-turbo8:amd64 (2.0.3-0ubuntu1.20.04.1) ...\r\nSelecting previously unselected package libjpeg8:amd64.\r\nPreparing to unpack .../05-libjpeg8_8c-2ubuntu8_amd64.deb ...\r\nUnpacking libjpeg8:amd64 (8c-2ubuntu8) ...\r\nSelecting previously unselected package libjbig0:amd64.\r\nPreparing to unpack .../06-libjbig0_2.1-3.1build1_amd64.deb ...\r\nUnpacking libjbig0:amd64 (2.1-3.1build1) ...\r\nSelecting previously unselected package libwebp6:amd64.\r\nPreparing to unpack .../07-libwebp6_0.6.1-2_amd64.deb ...\r\nUnpacking libwebp6:amd64 (0.6.1-2) ...\r\nSelecting previously unselected package libtiff5:amd64.\r\nPreparing to unpack .../08-libtiff5_4.1.0+git191117-2ubuntu0.20.04.1_amd64.deb ...\r\nUnpacking libtiff5:amd64 (4.1.0+git191117-2ubuntu0.20.04.1) ...\r\nSelecting previously unselected package libxpm4:amd64.\r\nPreparing to unpack .../09-libxpm4_1%3a3.5.12-1_amd64.deb ...\r\nUnpacking libxpm4:amd64 (1:3.5.12-1) ...\r\nSelecting previously unselected package libgd3:amd64.\r\nPreparing to unpack .../10-libgd3_2.2.5-5.2ubuntu2_amd64.deb ...\r\nUnpacking libgd3:amd64 (2.2.5-5.2ubuntu2) ...\r\nSelecting previously unselected package libgeoip1:amd64.\r\nPreparing to unpack .../11-libgeoip1_1.6.12-6build1_amd64.deb ...\r\nUnpacking libgeoip1:amd64 (1.6.12-6build1) ...\r\nSelecting previously unselected package nginx-common.\r\nPreparing to unpack .../12-nginx-common_1.18.0-0ubuntu1_all.deb ...\r\nUnpacking nginx-common (1.18.0-0ubuntu1) ...\r\nSelecting previously unselected package libnginx-mod-http-auth-pam.\r\nPreparing to unpack .../13-libnginx-mod-http-auth-pam_1.18.0-0ubuntu1_amd64.deb ...\r\nUnpacking libnginx-mod-http-auth-pam (1.18.0-0ubuntu1) ...\r\nSelecting previously unselected package libnginx-mod-http-dav-ext.\r\nPreparing to unpack .../14-libnginx-mod-http-dav-ext_1.18.0-0ubuntu1_amd64.deb ...\r\nUnpacking libnginx-mod-http-dav-ext (1.18.0-0ubuntu1) ...\r\nSelecting previously unselected package libnginx-mod-http-echo.\r\nPreparing to unpack .../15-libnginx-mod-http-echo_1.18.0-0ubuntu1_amd64.deb ...\r\nUnpacking libnginx-mod-http-echo (1.18.0-0ubuntu1) ...\r\nSelecting previously unselected package libnginx-mod-http-geoip.\r\nPreparing to unpack .../16-libnginx-mod-http-geoip_1.18.0-0ubuntu1_amd64.deb ...\r\nUnpacking libnginx-mod-http-geoip (1.18.0-0ubuntu1) ...\r\nSelecting previously unselected package libnginx-mod-http-geoip2.\r\nPreparing to unpack .../17-libnginx-mod-http-geoip2_1.18.0-0ubuntu1_amd64.deb ...\r\nUnpacking libnginx-mod-http-geoip2 (1.18.0-0ubuntu1) ...\r\nSelecting previously unselected package libnginx-mod-http-image-filter.\r\nPreparing to unpack .../18-libnginx-mod-http-image-filter_1.18.0-0ubuntu1_amd64.deb ...\r\nUnpacking libnginx-mod-http-image-filter (1.18.0-0ubuntu1) ...\r\nSelecting previously unselected package libnginx-mod-http-subs-filter.\r\nPreparing to unpack .../19-libnginx-mod-http-subs-filter_1.18.0-0ubuntu1_amd64.deb ...\r\nUnpacking libnginx-mod-http-subs-filter (1.18.0-0ubuntu1) ...\r\nSelecting previously unselected package libnginx-mod-http-upstream-fair.\r\nPreparing to unpack .../20-libnginx-mod-http-upstream-fair_1.18.0-0ubuntu1_amd64.deb ...\r\nUnpacking libnginx-mod-http-upstream-fair (1.18.0-0ubuntu1) ...\r\nSelecting previously unselected package libnginx-mod-http-xslt-filter.\r\nPreparing to unpack .../21-libnginx-mod-http-xslt-filter_1.18.0-0ubuntu1_amd64.deb ...\r\nUnpacking libnginx-mod-http-xslt-filter (1.18.0-0ubuntu1) ...\r\nSelecting previously unselected package libnginx-mod-mail.\r\nPreparing to unpack .../22-libnginx-mod-mail_1.18.0-0ubuntu1_amd64.deb ...\r\nUnpacking libnginx-mod-mail (1.18.0-0ubuntu1) ...\r\nSelecting previously unselected package libnginx-mod-stream.\r\nPreparing to unpack .../23-libnginx-mod-stream_1.18.0-0ubuntu1_amd64.deb ...\r\nUnpacking libnginx-mod-stream (1.18.0-0ubuntu1) ...\r\nSelecting previously unselected package nginx-full.\r\nPreparing to unpack .../24-nginx-full_1.18.0-0ubuntu1_amd64.deb ...\r\nUnpacking nginx-full (1.18.0-0ubuntu1) ...\r\nSetting up libxpm4:amd64 (1:3.5.12-1) ...\r\nSetting up nginx-common (1.18.0-0ubuntu1) ...\r\nCreated symlink /etc/systemd/system/multi-user.target.wants/nginx.service -> /lib/systemd/system/nginx.service.\r\nSetting up libjbig0:amd64 (2.1-3.1build1) ...\r\nSetting up libnginx-mod-http-xslt-filter (1.18.0-0ubuntu1) ...\r\nSetting up libnginx-mod-http-auth-pam (1.18.0-0ubuntu1) ...\r\nSetting up libwebp6:amd64 (0.6.1-2) ...\r\nSetting up fonts-dejavu-core (2.37-1) ...\r\nSetting up libjpeg-turbo8:amd64 (2.0.3-0ubuntu1.20.04.1) ...\r\nSetting up libnginx-mod-http-echo (1.18.0-0ubuntu1) ...\r\nSetting up libnginx-mod-http-subs-filter (1.18.0-0ubuntu1) ...\r\nSetting up libgeoip1:amd64 (1.6.12-6build1) ...\r\nSetting up geoip-database (20191224-2) ...\r\nSetting up libnginx-mod-http-geoip2 (1.18.0-0ubuntu1) ...\r\nSetting up libjpeg8:amd64 (8c-2ubuntu8) ...\r\nSetting up libnginx-mod-http-dav-ext (1.18.0-0ubuntu1) ...\r\nSetting up libnginx-mod-mail (1.18.0-0ubuntu1) ...\r\nSetting up fontconfig-config (2.13.1-2ubuntu3) ...\r\nSetting up libnginx-mod-stream (1.18.0-0ubuntu1) ...\r\nSetting up libnginx-mod-http-upstream-fair (1.18.0-0ubuntu1) ...\r\nSetting up libnginx-mod-http-geoip (1.18.0-0ubuntu1) ...\r\nSetting up libtiff5:amd64 (4.1.0+git191117-2ubuntu0.20.04.1) ...\r\nSetting up libfontconfig1:amd64 (2.13.1-2ubuntu3) ...\r\nSetting up libgd3:amd64 (2.2.5-5.2ubuntu2) ...\r\nSetting up libnginx-mod-http-image-filter (1.18.0-0ubuntu1) ...\r\nSetting up nginx-full (1.18.0-0ubuntu1) ...\r\nProcessing triggers for libc-bin (2.31-0ubuntu9) ...\r\nProcessing triggers for ufw (0.36-6) ...\r\nProcessing triggers for systemd (245.4-4ubuntu3.2) ...\r\nProcessing triggers for man-db (2.9.1-1) ...\r\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following additional packages will be installed:", "  fontconfig-config fonts-dejavu-core geoip-database libfontconfig1 libgd3", "  libgeoip1 libjbig0 libjpeg-turbo8 libjpeg8 libnginx-mod-http-auth-pam", "  libnginx-mod-http-dav-ext libnginx-mod-http-echo libnginx-mod-http-geoip", "  libnginx-mod-http-geoip2 libnginx-mod-http-image-filter", "  libnginx-mod-http-subs-filter libnginx-mod-http-upstream-fair", "  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream libtiff5", "  libwebp6 libxpm4 nginx-common", "Suggested packages:", "  libgd-tools geoip-bin fcgiwrap nginx-doc", "The following NEW packages will be installed:", "  fontconfig-config fonts-dejavu-core geoip-database libfontconfig1 libgd3", "  libgeoip1 libjbig0 libjpeg-turbo8 libjpeg8 libnginx-mod-http-auth-pam", "  libnginx-mod-http-dav-ext libnginx-mod-http-echo libnginx-mod-http-geoip", "  libnginx-mod-http-geoip2 libnginx-mod-http-image-filter", "  libnginx-mod-http-subs-filter libnginx-mod-http-upstream-fair", "  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream libtiff5", "  libwebp6 libxpm4 nginx-common nginx-full", "0 upgraded, 25 newly installed, 0 to remove and 119 not upgraded.", "Need to get 5617 kB of archives.", "After this operation, 18.9 MB of additional disk space will be used.", "Get:1 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 fonts-dejavu-core all 2.37-1 [1041 kB]", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 fontconfig-config all 2.13.1-2ubuntu3 [28.8 kB]", "Get:3 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 geoip-database all 20191224-2 [3029 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libfontconfig1 amd64 2.13.1-2ubuntu3 [114 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libjpeg-turbo8 amd64 2.0.3-0ubuntu1.20.04.1 [117 kB]", "Get:6 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libjpeg8 amd64 8c-2ubuntu8 [2194 B]", "Get:7 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libjbig0 amd64 2.1-3.1build1 [26.7 kB]", "Get:8 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libwebp6 amd64 0.6.1-2 [185 kB]", "Get:9 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libtiff5 amd64 4.1.0+git191117-2ubuntu0.20.04.1 [162 kB]", "Get:10 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libxpm4 amd64 1:3.5.12-1 [34.0 kB]", "Get:11 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libgd3 amd64 2.2.5-5.2ubuntu2 [118 kB]", "Get:12 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 libgeoip1 amd64 1.6.12-6build1 [70.5 kB]", "Get:13 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 nginx-common all 1.18.0-0ubuntu1 [37.3 kB]", "Get:14 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-auth-pam amd64 1.18.0-0ubuntu1 [9528 B]", "Get:15 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-dav-ext amd64 1.18.0-0ubuntu1 [11.4 kB]", "Get:16 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-echo amd64 1.18.0-0ubuntu1 [21.0 kB]", "Get:17 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-geoip amd64 1.18.0-0ubuntu1 [10.8 kB]", "Get:18 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-geoip2 amd64 1.18.0-0ubuntu1 [11.3 kB]", "Get:19 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libnginx-mod-http-image-filter amd64 1.18.0-0ubuntu1 [14.3 kB]", "Get:20 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-subs-filter amd64 1.18.0-0ubuntu1 [12.6 kB]", "Get:21 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libnginx-mod-http-upstream-fair amd64 1.18.0-0ubuntu1 [12.7 kB]", "Get:22 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libnginx-mod-http-xslt-filter amd64 1.18.0-0ubuntu1 [12.6 kB]", "Get:23 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libnginx-mod-mail amd64 1.18.0-0ubuntu1 [42.3 kB]", "Get:24 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libnginx-mod-stream amd64 1.18.0-0ubuntu1 [66.9 kB]", "Get:25 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 nginx-full amd64 1.18.0-0ubuntu1 [425 kB]", "Preconfiguring packages ...", "Fetched 5617 kB in 1s (7469 kB/s)", "Selecting previously unselected package fonts-dejavu-core.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 75654 files and directories currently installed.)", "Preparing to unpack .../00-fonts-dejavu-core_2.37-1_all.deb ...", "Unpacking fonts-dejavu-core (2.37-1) ...", "Selecting previously unselected package fontconfig-config.", "Preparing to unpack .../01-fontconfig-config_2.13.1-2ubuntu3_all.deb ...", "Unpacking fontconfig-config (2.13.1-2ubuntu3) ...", "Selecting previously unselected package geoip-database.", "Preparing to unpack .../02-geoip-database_20191224-2_all.deb ...", "Unpacking geoip-database (20191224-2) ...", "Selecting previously unselected package libfontconfig1:amd64.", "Preparing to unpack .../03-libfontconfig1_2.13.1-2ubuntu3_amd64.deb ...", "Unpacking libfontconfig1:amd64 (2.13.1-2ubuntu3) ...", "Selecting previously unselected package libjpeg-turbo8:amd64.", "Preparing to unpack .../04-libjpeg-turbo8_2.0.3-0ubuntu1.20.04.1_amd64.deb ...", "Unpacking libjpeg-turbo8:amd64 (2.0.3-0ubuntu1.20.04.1) ...", "Selecting previously unselected package libjpeg8:amd64.", "Preparing to unpack .../05-libjpeg8_8c-2ubuntu8_amd64.deb ...", "Unpacking libjpeg8:amd64 (8c-2ubuntu8) ...", "Selecting previously unselected package libjbig0:amd64.", "Preparing to unpack .../06-libjbig0_2.1-3.1build1_amd64.deb ...", "Unpacking libjbig0:amd64 (2.1-3.1build1) ...", "Selecting previously unselected package libwebp6:amd64.", "Preparing to unpack .../07-libwebp6_0.6.1-2_amd64.deb ...", "Unpacking libwebp6:amd64 (0.6.1-2) ...", "Selecting previously unselected package libtiff5:amd64.", "Preparing to unpack .../08-libtiff5_4.1.0+git191117-2ubuntu0.20.04.1_amd64.deb ...", "Unpacking libtiff5:amd64 (4.1.0+git191117-2ubuntu0.20.04.1) ...", "Selecting previously unselected package libxpm4:amd64.", "Preparing to unpack .../09-libxpm4_1%3a3.5.12-1_amd64.deb ...", "Unpacking libxpm4:amd64 (1:3.5.12-1) ...", "Selecting previously unselected package libgd3:amd64.", "Preparing to unpack .../10-libgd3_2.2.5-5.2ubuntu2_amd64.deb ...", "Unpacking libgd3:amd64 (2.2.5-5.2ubuntu2) ...", "Selecting previously unselected package libgeoip1:amd64.", "Preparing to unpack .../11-libgeoip1_1.6.12-6build1_amd64.deb ...", "Unpacking libgeoip1:amd64 (1.6.12-6build1) ...", "Selecting previously unselected package nginx-common.", "Preparing to unpack .../12-nginx-common_1.18.0-0ubuntu1_all.deb ...", "Unpacking nginx-common (1.18.0-0ubuntu1) ...", "Selecting previously unselected package libnginx-mod-http-auth-pam.", "Preparing to unpack .../13-libnginx-mod-http-auth-pam_1.18.0-0ubuntu1_amd64.deb ...", "Unpacking libnginx-mod-http-auth-pam (1.18.0-0ubuntu1) ...", "Selecting previously unselected package libnginx-mod-http-dav-ext.", "Preparing to unpack .../14-libnginx-mod-http-dav-ext_1.18.0-0ubuntu1_amd64.deb ...", "Unpacking libnginx-mod-http-dav-ext (1.18.0-0ubuntu1) ...", "Selecting previously unselected package libnginx-mod-http-echo.", "Preparing to unpack .../15-libnginx-mod-http-echo_1.18.0-0ubuntu1_amd64.deb ...", "Unpacking libnginx-mod-http-echo (1.18.0-0ubuntu1) ...", "Selecting previously unselected package libnginx-mod-http-geoip.", "Preparing to unpack .../16-libnginx-mod-http-geoip_1.18.0-0ubuntu1_amd64.deb ...", "Unpacking libnginx-mod-http-geoip (1.18.0-0ubuntu1) ...", "Selecting previously unselected package libnginx-mod-http-geoip2.", "Preparing to unpack .../17-libnginx-mod-http-geoip2_1.18.0-0ubuntu1_amd64.deb ...", "Unpacking libnginx-mod-http-geoip2 (1.18.0-0ubuntu1) ...", "Selecting previously unselected package libnginx-mod-http-image-filter.", "Preparing to unpack .../18-libnginx-mod-http-image-filter_1.18.0-0ubuntu1_amd64.deb ...", "Unpacking libnginx-mod-http-image-filter (1.18.0-0ubuntu1) ...", "Selecting previously unselected package libnginx-mod-http-subs-filter.", "Preparing to unpack .../19-libnginx-mod-http-subs-filter_1.18.0-0ubuntu1_amd64.deb ...", "Unpacking libnginx-mod-http-subs-filter (1.18.0-0ubuntu1) ...", "Selecting previously unselected package libnginx-mod-http-upstream-fair.", "Preparing to unpack .../20-libnginx-mod-http-upstream-fair_1.18.0-0ubuntu1_amd64.deb ...", "Unpacking libnginx-mod-http-upstream-fair (1.18.0-0ubuntu1) ...", "Selecting previously unselected package libnginx-mod-http-xslt-filter.", "Preparing to unpack .../21-libnginx-mod-http-xslt-filter_1.18.0-0ubuntu1_amd64.deb ...", "Unpacking libnginx-mod-http-xslt-filter (1.18.0-0ubuntu1) ...", "Selecting previously unselected package libnginx-mod-mail.", "Preparing to unpack .../22-libnginx-mod-mail_1.18.0-0ubuntu1_amd64.deb ...", "Unpacking libnginx-mod-mail (1.18.0-0ubuntu1) ...", "Selecting previously unselected package libnginx-mod-stream.", "Preparing to unpack .../23-libnginx-mod-stream_1.18.0-0ubuntu1_amd64.deb ...", "Unpacking libnginx-mod-stream (1.18.0-0ubuntu1) ...", "Selecting previously unselected package nginx-full.", "Preparing to unpack .../24-nginx-full_1.18.0-0ubuntu1_amd64.deb ...", "Unpacking nginx-full (1.18.0-0ubuntu1) ...", "Setting up libxpm4:amd64 (1:3.5.12-1) ...", "Setting up nginx-common (1.18.0-0ubuntu1) ...", "Created symlink /etc/systemd/system/multi-user.target.wants/nginx.service -> /lib/systemd/system/nginx.service.", "Setting up libjbig0:amd64 (2.1-3.1build1) ...", "Setting up libnginx-mod-http-xslt-filter (1.18.0-0ubuntu1) ...", "Setting up libnginx-mod-http-auth-pam (1.18.0-0ubuntu1) ...", "Setting up libwebp6:amd64 (0.6.1-2) ...", "Setting up fonts-dejavu-core (2.37-1) ...", "Setting up libjpeg-turbo8:amd64 (2.0.3-0ubuntu1.20.04.1) ...", "Setting up libnginx-mod-http-echo (1.18.0-0ubuntu1) ...", "Setting up libnginx-mod-http-subs-filter (1.18.0-0ubuntu1) ...", "Setting up libgeoip1:amd64 (1.6.12-6build1) ...", "Setting up geoip-database (20191224-2) ...", "Setting up libnginx-mod-http-geoip2 (1.18.0-0ubuntu1) ...", "Setting up libjpeg8:amd64 (8c-2ubuntu8) ...", "Setting up libnginx-mod-http-dav-ext (1.18.0-0ubuntu1) ...", "Setting up libnginx-mod-mail (1.18.0-0ubuntu1) ...", "Setting up fontconfig-config (2.13.1-2ubuntu3) ...", "Setting up libnginx-mod-stream (1.18.0-0ubuntu1) ...", "Setting up libnginx-mod-http-upstream-fair (1.18.0-0ubuntu1) ...", "Setting up libnginx-mod-http-geoip (1.18.0-0ubuntu1) ...", "Setting up libtiff5:amd64 (4.1.0+git191117-2ubuntu0.20.04.1) ...", "Setting up libfontconfig1:amd64 (2.13.1-2ubuntu3) ...", "Setting up libgd3:amd64 (2.2.5-5.2ubuntu2) ...", "Setting up libnginx-mod-http-image-filter (1.18.0-0ubuntu1) ...", "Setting up nginx-full (1.18.0-0ubuntu1) ...", "Processing triggers for libc-bin (2.31-0ubuntu9) ...", "Processing triggers for ufw (0.36-6) ...", "Processing triggers for systemd (245.4-4ubuntu3.2) ...", "Processing triggers for man-db (2.9.1-1) ..."]}
2021-05-20 09:45:52,302 p=2586262 u=lma n=ansible | TASK [app-test : configure nginx] ***********************************************************************************************************************************************************************************
2021-05-20 09:45:52,419 p=2586262 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": false, "msg": "Could not find or access 'nginx/nginx.conf'\nSearched in:\n\t/home/lma/work/new/ansible-test/roles/app-test/templates/nginx/nginx.conf\n\t/home/lma/work/new/ansible-test/roles/app-test/nginx/nginx.conf\n\t/home/lma/work/new/ansible-test/roles/app-test/tasks/templates/nginx/nginx.conf\n\t/home/lma/work/new/ansible-test/roles/app-test/tasks/nginx/nginx.conf\n\t/home/lma/work/new/ansible-test/playbooks/templates/nginx/nginx.conf\n\t/home/lma/work/new/ansible-test/playbooks/nginx/nginx.conf on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2021-05-20 09:45:52,420 p=2586262 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 09:45:52,421 p=2586262 u=lma n=ansible | app-test                   : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-20 09:46:38,334 p=2586569 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 09:46:38,341 p=2586569 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:46:38,341 p=2586569 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 09:46:38,527 p=2586569 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 09:46:38,542 p=2586569 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 09:46:40,376 p=2586569 u=lma n=ansible | ok: [app-test]
2021-05-20 09:46:40,385 p=2586569 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 09:46:40,425 p=2586569 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 09:46:40,433 p=2586569 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 09:46:44,152 p=2586569 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621493202, "cache_updated": true, "changed": false}
2021-05-20 09:46:44,161 p=2586569 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 09:46:44,201 p=2586569 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/srv/www", "web_server_group": "www-data"}, "changed": false}
2021-05-20 09:46:44,209 p=2586569 u=lma n=ansible | TASK [app-test : install nginx webserver] ***************************************************************************************************************************************************************************
2021-05-20 09:46:45,984 p=2586569 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621493202, "cache_updated": false, "changed": false}
2021-05-20 09:46:45,996 p=2586569 u=lma n=ansible | TASK [app-test : configure nginx] ***********************************************************************************************************************************************************************************
2021-05-20 09:46:47,118 p=2586569 u=lma n=ansible | changed: [app-test] => {"changed": true, "checksum": "a3029c1292ff4a337cabf3d2a1faa05547768ea2", "dest": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "gid": 0, "group": "root", "md5sum": "66e9851c902b7912f9189af75dad8d47", "mode": "0644", "owner": "root", "size": 460, "src": "/home/deployer/.ansible/tmp/ansible-tmp-1621493206.030968-155759402579199/source", "state": "file", "uid": 0}
2021-05-20 09:46:47,127 p=2586569 u=lma n=ansible | TASK [app-test : link to enable nginx configuration] ****************************************************************************************************************************************************************
2021-05-20 09:46:47,766 p=2586569 u=lma n=ansible | changed: [app-test] => {"changed": true, "dest": "/etc/nginx/sites-enabled/app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0777", "owner": "root", "size": 47, "src": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "state": "link", "uid": 0}
2021-05-20 09:46:47,774 p=2586569 u=lma n=ansible | TASK [app-test : disable default configuration] *********************************************************************************************************************************************************************
2021-05-20 09:46:48,300 p=2586569 u=lma n=ansible | ERROR! The requested handler 'restart nginx' was not found in either the main handlers list nor in the listening handlers list
2021-05-20 09:48:03,463 p=2586957 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 09:48:03,470 p=2586957 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:48:03,470 p=2586957 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 09:48:03,670 p=2586957 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 09:48:03,681 p=2586957 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 09:48:06,746 p=2586957 u=lma n=ansible | ok: [app-test]
2021-05-20 09:48:06,756 p=2586957 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 09:48:06,795 p=2586957 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 09:48:06,804 p=2586957 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 09:48:10,524 p=2586957 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621493289, "cache_updated": true, "changed": false}
2021-05-20 09:48:10,538 p=2586957 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 09:48:10,580 p=2586957 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/srv/www", "web_server_group": "www-data"}, "changed": false}
2021-05-20 09:48:10,593 p=2586957 u=lma n=ansible | TASK [app-test : install nginx webserver] ***************************************************************************************************************************************************************************
2021-05-20 09:48:12,351 p=2586957 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621493289, "cache_updated": false, "changed": false}
2021-05-20 09:48:12,361 p=2586957 u=lma n=ansible | TASK [app-test : configure nginx] ***********************************************************************************************************************************************************************************
2021-05-20 09:48:13,414 p=2586957 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "a3029c1292ff4a337cabf3d2a1faa05547768ea2", "dest": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "size": 460, "state": "file", "uid": 0}
2021-05-20 09:48:13,422 p=2586957 u=lma n=ansible | TASK [app-test : link to enable nginx configuration] ****************************************************************************************************************************************************************
2021-05-20 09:48:13,893 p=2586957 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/etc/nginx/sites-enabled/app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0777", "owner": "root", "size": 47, "src": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "state": "link", "uid": 0}
2021-05-20 09:48:13,902 p=2586957 u=lma n=ansible | TASK [app-test : disable default configuration] *********************************************************************************************************************************************************************
2021-05-20 09:48:14,367 p=2586957 u=lma n=ansible | ok: [app-test] => {"changed": false, "path": "/etc/nginx/sites-enabled/default", "state": "absent"}
2021-05-20 09:48:14,375 p=2586957 u=lma n=ansible | TASK [app-test : set nginx directories permissions] *****************************************************************************************************************************************************************
2021-05-20 09:48:14,849 p=2586957 u=lma n=ansible | changed: [app-test] => (item=/var/log/nginx) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/nginx", "mode": "0755", "owner": "root", "path": "/var/log/nginx", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 09:48:15,292 p=2586957 u=lma n=ansible | changed: [app-test] => (item=/etc/nginx) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/nginx", "mode": "0755", "owner": "root", "path": "/etc/nginx", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 09:48:15,742 p=2586957 u=lma n=ansible | changed: [app-test] => (item=/etc/nginx/sites-available) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-available", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-available", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 09:48:16,180 p=2586957 u=lma n=ansible | changed: [app-test] => (item=/etc/nginx/sites-enabled) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-enabled", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-enabled", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 09:48:16,190 p=2586957 u=lma n=ansible | TASK [app-test : set nginx logs permissions] ************************************************************************************************************************************************************************
2021-05-20 09:48:16,668 p=2586957 u=lma n=ansible | changed: [app-test] => (item=access.log) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "access.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/access.log", "size": 0, "state": "file", "uid": 33}
2021-05-20 09:48:17,204 p=2586957 u=lma n=ansible | changed: [app-test] => (item=error.log) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "error.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/error.log", "size": 0, "state": "file", "uid": 33}
2021-05-20 09:48:17,207 p=2586957 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 09:48:17,207 p=2586957 u=lma n=ansible | app-test                   : ok=10   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-20 09:52:57,399 p=2588069 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 09:52:57,406 p=2588069 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:52:57,406 p=2588069 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 09:52:57,595 p=2588069 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 09:52:57,605 p=2588069 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 09:53:00,562 p=2588069 u=lma n=ansible | ok: [app-test]
2021-05-20 09:53:00,571 p=2588069 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 09:53:00,610 p=2588069 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 09:53:00,620 p=2588069 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 09:53:04,080 p=2588069 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621493582, "cache_updated": true, "changed": false}
2021-05-20 09:53:04,087 p=2588069 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 09:53:04,124 p=2588069 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www", "web_server_group": "www-data"}, "changed": false}
2021-05-20 09:53:04,132 p=2588069 u=lma n=ansible | TASK [app-test : install nginx webserver] ***************************************************************************************************************************************************************************
2021-05-20 09:53:05,749 p=2588069 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621493582, "cache_updated": false, "changed": false}
2021-05-20 09:53:05,758 p=2588069 u=lma n=ansible | TASK [app-test : configure nginx] ***********************************************************************************************************************************************************************************
2021-05-20 09:53:06,878 p=2588069 u=lma n=ansible | changed: [app-test] => {"changed": true, "checksum": "5a63557068f4edb05e924844cc52d9e93099f28c", "dest": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "gid": 0, "group": "root", "md5sum": "52c7fe7e060c278383d8530ba16b22a6", "mode": "0644", "owner": "root", "size": 460, "src": "/home/deployer/.ansible/tmp/ansible-tmp-1621493585.7959592-278259205408911/source", "state": "file", "uid": 0}
2021-05-20 09:53:06,887 p=2588069 u=lma n=ansible | TASK [app-test : link to enable nginx configuration] ****************************************************************************************************************************************************************
2021-05-20 09:53:07,481 p=2588069 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/etc/nginx/sites-enabled/app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0777", "owner": "root", "size": 47, "src": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "state": "link", "uid": 0}
2021-05-20 09:53:07,491 p=2588069 u=lma n=ansible | TASK [app-test : disable default configuration] *********************************************************************************************************************************************************************
2021-05-20 09:53:07,969 p=2588069 u=lma n=ansible | ok: [app-test] => {"changed": false, "path": "/etc/nginx/sites-enabled/default", "state": "absent"}
2021-05-20 09:53:07,979 p=2588069 u=lma n=ansible | TASK [app-test : set nginx directories permissions] *****************************************************************************************************************************************************************
2021-05-20 09:53:08,505 p=2588069 u=lma n=ansible | ok: [app-test] => (item=/var/log/nginx) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/var/log/nginx", "mode": "0755", "owner": "root", "path": "/var/log/nginx", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 09:53:09,035 p=2588069 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx", "mode": "0755", "owner": "root", "path": "/etc/nginx", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 09:53:09,506 p=2588069 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-available) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-available", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-available", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 09:53:09,955 p=2588069 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-enabled) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-enabled", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-enabled", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 09:53:09,966 p=2588069 u=lma n=ansible | TASK [app-test : set nginx logs permissions] ************************************************************************************************************************************************************************
2021-05-20 09:53:10,467 p=2588069 u=lma n=ansible | ok: [app-test] => (item=access.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "access.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/access.log", "size": 0, "state": "file", "uid": 33}
2021-05-20 09:53:10,923 p=2588069 u=lma n=ansible | ok: [app-test] => (item=error.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "error.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/error.log", "size": 0, "state": "file", "uid": 33}
2021-05-20 09:53:10,926 p=2588069 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 09:53:10,926 p=2588069 u=lma n=ansible | app-test                   : ok=10   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-20 09:54:02,931 p=2588462 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 09:54:02,937 p=2588462 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 09:54:02,938 p=2588462 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 09:54:03,131 p=2588462 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 09:54:03,141 p=2588462 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 09:54:05,241 p=2588462 u=lma n=ansible | ok: [app-test]
2021-05-20 09:54:05,248 p=2588462 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 09:54:05,285 p=2588462 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 09:54:05,297 p=2588462 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 09:54:08,801 p=2588462 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621493647, "cache_updated": true, "changed": false}
2021-05-20 09:54:08,811 p=2588462 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 09:54:08,849 p=2588462 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www", "web_server_group": "www-data"}, "changed": false}
2021-05-20 09:54:08,856 p=2588462 u=lma n=ansible | TASK [app-test : install nginx webserver] ***************************************************************************************************************************************************************************
2021-05-20 09:54:10,506 p=2588462 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621493647, "cache_updated": false, "changed": false}
2021-05-20 09:54:10,515 p=2588462 u=lma n=ansible | TASK [app-test : configure nginx] ***********************************************************************************************************************************************************************************
2021-05-20 09:54:11,551 p=2588462 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "5a63557068f4edb05e924844cc52d9e93099f28c", "dest": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "size": 460, "state": "file", "uid": 0}
2021-05-20 09:54:11,562 p=2588462 u=lma n=ansible | TASK [app-test : link to enable nginx configuration] ****************************************************************************************************************************************************************
2021-05-20 09:54:12,042 p=2588462 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/etc/nginx/sites-enabled/app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0777", "owner": "root", "size": 47, "src": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "state": "link", "uid": 0}
2021-05-20 09:54:12,053 p=2588462 u=lma n=ansible | TASK [app-test : disable default configuration] *********************************************************************************************************************************************************************
2021-05-20 09:54:12,522 p=2588462 u=lma n=ansible | ok: [app-test] => {"changed": false, "path": "/etc/nginx/sites-enabled/default", "state": "absent"}
2021-05-20 09:54:12,531 p=2588462 u=lma n=ansible | TASK [app-test : set nginx directories permissions] *****************************************************************************************************************************************************************
2021-05-20 09:54:13,000 p=2588462 u=lma n=ansible | ok: [app-test] => (item=/var/log/nginx) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/var/log/nginx", "mode": "0755", "owner": "root", "path": "/var/log/nginx", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 09:54:13,537 p=2588462 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx", "mode": "0755", "owner": "root", "path": "/etc/nginx", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 09:54:14,068 p=2588462 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-available) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-available", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-available", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 09:54:14,510 p=2588462 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-enabled) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-enabled", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-enabled", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 09:54:14,518 p=2588462 u=lma n=ansible | TASK [app-test : set nginx logs permissions] ************************************************************************************************************************************************************************
2021-05-20 09:54:15,066 p=2588462 u=lma n=ansible | ok: [app-test] => (item=access.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "access.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/access.log", "size": 0, "state": "file", "uid": 33}
2021-05-20 09:54:15,505 p=2588462 u=lma n=ansible | ok: [app-test] => (item=error.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "error.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/error.log", "size": 0, "state": "file", "uid": 33}
2021-05-20 09:54:15,508 p=2588462 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 09:54:15,508 p=2588462 u=lma n=ansible | app-test                   : ok=10   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-20 10:00:00,624 p=2589699 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 10:00:00,631 p=2589699 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:00:00,631 p=2589699 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 10:00:00,775 p=2589699 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  found unacceptable key (unhashable type: 'AnsibleMapping')

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/main.yml': line 17, column 24, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

      set_fact:
       web_root_path: {{ web_root_path_ubuntu }}
                       ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2021-05-20 10:00:26,863 p=2589818 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 10:00:26,870 p=2589818 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:00:26,870 p=2589818 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 10:00:27,075 p=2589818 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 10:00:27,087 p=2589818 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 10:00:30,205 p=2589818 u=lma n=ansible | ok: [app-test]
2021-05-20 10:00:30,215 p=2589818 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 10:00:30,251 p=2589818 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 10:00:30,261 p=2589818 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 10:00:33,699 p=2589818 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621494032, "cache_updated": true, "changed": false}
2021-05-20 10:00:33,708 p=2589818 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 10:00:33,746 p=2589818 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 10:00:33,756 p=2589818 u=lma n=ansible | TASK [app-test : install nginx webserver] ***************************************************************************************************************************************************************************
2021-05-20 10:00:35,374 p=2589818 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621494032, "cache_updated": false, "changed": false}
2021-05-20 10:00:35,382 p=2589818 u=lma n=ansible | TASK [app-test : configure nginx] ***********************************************************************************************************************************************************************************
2021-05-20 10:00:36,588 p=2589818 u=lma n=ansible | changed: [app-test] => {"changed": true, "checksum": "09c535d2e4de665e0235c9ecd7fa2c1d12192b67", "dest": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "gid": 0, "group": "root", "md5sum": "aa2d6ab62aff3ee7df7263ceaa2fe91b", "mode": "0644", "owner": "root", "size": 487, "src": "/home/deployer/.ansible/tmp/ansible-tmp-1621494035.4209743-40545391723355/source", "state": "file", "uid": 0}
2021-05-20 10:00:36,597 p=2589818 u=lma n=ansible | TASK [app-test : link to enable nginx configuration] ****************************************************************************************************************************************************************
2021-05-20 10:00:37,177 p=2589818 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/etc/nginx/sites-enabled/app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0777", "owner": "root", "size": 47, "src": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "state": "link", "uid": 0}
2021-05-20 10:00:37,187 p=2589818 u=lma n=ansible | TASK [app-test : disable default configuration] *********************************************************************************************************************************************************************
2021-05-20 10:00:37,656 p=2589818 u=lma n=ansible | ok: [app-test] => {"changed": false, "path": "/etc/nginx/sites-enabled/default", "state": "absent"}
2021-05-20 10:00:37,666 p=2589818 u=lma n=ansible | TASK [app-test : set nginx directories permissions] *****************************************************************************************************************************************************************
2021-05-20 10:00:38,149 p=2589818 u=lma n=ansible | ok: [app-test] => (item=/var/log/nginx) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/var/log/nginx", "mode": "0755", "owner": "root", "path": "/var/log/nginx", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:00:38,594 p=2589818 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx", "mode": "0755", "owner": "root", "path": "/etc/nginx", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:00:39,052 p=2589818 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-available) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-available", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-available", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:00:39,591 p=2589818 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-enabled) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-enabled", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-enabled", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:00:39,599 p=2589818 u=lma n=ansible | TASK [app-test : set nginx logs permissions] ************************************************************************************************************************************************************************
2021-05-20 10:00:40,069 p=2589818 u=lma n=ansible | ok: [app-test] => (item=access.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "access.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/access.log", "size": 0, "state": "file", "uid": 33}
2021-05-20 10:00:40,506 p=2589818 u=lma n=ansible | ok: [app-test] => (item=error.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "error.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/error.log", "size": 0, "state": "file", "uid": 33}
2021-05-20 10:00:40,509 p=2589818 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 10:00:40,510 p=2589818 u=lma n=ansible | app-test                   : ok=10   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-20 10:03:08,160 p=2590511 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 10:03:08,168 p=2590511 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:03:08,168 p=2590511 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 10:03:08,323 p=2590511 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  found unacceptable key (unhashable type: 'AnsibleMapping')

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/nginx.yml': line 37, column 12, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

        - /etc/nginx/sites-enabled
        - {{ web_root_path }}
           ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2021-05-20 10:03:30,798 p=2590573 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 10:03:30,804 p=2590573 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:03:30,804 p=2590573 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 10:03:30,994 p=2590573 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 10:03:31,005 p=2590573 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 10:03:34,366 p=2590573 u=lma n=ansible | ok: [app-test]
2021-05-20 10:03:34,377 p=2590573 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 10:03:34,413 p=2590573 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 10:03:34,422 p=2590573 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 10:03:37,993 p=2590573 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621494216, "cache_updated": true, "changed": false}
2021-05-20 10:03:38,003 p=2590573 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 10:03:38,041 p=2590573 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 10:03:38,054 p=2590573 u=lma n=ansible | TASK [app-test : install nginx webserver] ***************************************************************************************************************************************************************************
2021-05-20 10:03:39,817 p=2590573 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621494216, "cache_updated": false, "changed": false}
2021-05-20 10:03:39,829 p=2590573 u=lma n=ansible | TASK [app-test : configure nginx] ***********************************************************************************************************************************************************************************
2021-05-20 10:03:40,889 p=2590573 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "09c535d2e4de665e0235c9ecd7fa2c1d12192b67", "dest": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "size": 487, "state": "file", "uid": 0}
2021-05-20 10:03:40,901 p=2590573 u=lma n=ansible | TASK [app-test : link to enable nginx configuration] ****************************************************************************************************************************************************************
2021-05-20 10:03:41,409 p=2590573 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/etc/nginx/sites-enabled/app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0777", "owner": "root", "size": 47, "src": "/etc/nginx/sites-available/app_uwsgi_nginx.conf", "state": "link", "uid": 0}
2021-05-20 10:03:41,418 p=2590573 u=lma n=ansible | TASK [app-test : disable default configuration] *********************************************************************************************************************************************************************
2021-05-20 10:03:41,912 p=2590573 u=lma n=ansible | ok: [app-test] => {"changed": false, "path": "/etc/nginx/sites-enabled/default", "state": "absent"}
2021-05-20 10:03:41,923 p=2590573 u=lma n=ansible | TASK [app-test : create webroot dir] ********************************************************************************************************************************************************************************
2021-05-20 10:03:42,422 p=2590573 u=lma n=ansible | changed: [app-test] => {"changed": true, "gid": 33, "group": "www-data", "mode": "0755", "owner": "root", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:03:42,432 p=2590573 u=lma n=ansible | TASK [app-test : set nginx directories permissions] *****************************************************************************************************************************************************************
2021-05-20 10:03:42,935 p=2590573 u=lma n=ansible | ok: [app-test] => (item=/var/log/nginx) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/var/log/nginx", "mode": "0755", "owner": "root", "path": "/var/log/nginx", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:03:43,380 p=2590573 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx", "mode": "0755", "owner": "root", "path": "/etc/nginx", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:03:43,840 p=2590573 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-available) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-available", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-available", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:03:44,292 p=2590573 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-enabled) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-enabled", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-enabled", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:03:44,813 p=2590573 u=lma n=ansible | ok: [app-test] => (item=/var/www/app-test) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/var/www/app-test", "mode": "0755", "owner": "root", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:03:44,826 p=2590573 u=lma n=ansible | TASK [app-test : set nginx logs permissions] ************************************************************************************************************************************************************************
2021-05-20 10:03:45,303 p=2590573 u=lma n=ansible | ok: [app-test] => (item=access.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "access.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/access.log", "size": 0, "state": "file", "uid": 33}
2021-05-20 10:03:45,744 p=2590573 u=lma n=ansible | ok: [app-test] => (item=error.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "error.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/error.log", "size": 0, "state": "file", "uid": 33}
2021-05-20 10:03:45,747 p=2590573 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 10:03:45,748 p=2590573 u=lma n=ansible | app-test                   : ok=11   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-20 10:41:12,614 p=2599090 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 10:41:12,622 p=2599090 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:41:12,622 p=2599090 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 10:41:12,792 p=2599090 u=lma n=ansible | [DEPRECATION WARNING]: Included file '/home/lma/work/new/ansible-test/playbooks/supervisor.yaml' not found, however since this include is not explicitly marked as 'static: yes', we will try and include it 
dynamically later. In the future, this will be an error unless 'static: no' is used on the include task. If you do not want missing includes to be considered dynamic, use 'static: yes' on the include or set the 
global ansible.cfg options to make all includes static for tasks and/or handlers. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in 
ansible.cfg.
2021-05-20 10:41:12,826 p=2599090 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 10:41:12,837 p=2599090 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 10:41:15,922 p=2599090 u=lma n=ansible | ok: [app-test]
2021-05-20 10:41:15,933 p=2599090 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 10:41:15,969 p=2599090 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 10:41:15,982 p=2599090 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 10:41:20,078 p=2599090 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621496478, "cache_updated": true, "changed": false}
2021-05-20 10:41:20,090 p=2599090 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 10:41:20,126 p=2599090 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 10:41:20,138 p=2599090 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 10:41:20,169 p=2599170 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `pkg: "{{ item }}"`, please use `pkg: ['python-
dev', 'python-setuptools']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:42:13,750 p=2599090 u=lma n=ansible | changed: [app-test] => (item=['python-dev', 'python-setuptools']) => {"ansible_loop_var": "item", "cache_update_time": 1621496478, "cache_updated": false, "changed": true, "item": ["python-dev", "python-setuptools"], "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libc-dev-bin libc6 libc6-dev libcrypt-dev libexpat1-dev libpython2-dev\n  libpython2-stdlib libpython2.7 libpython2.7-dev libpython2.7-minimal\n  libpython2.7-stdlib linux-libc-dev manpages-dev python-is-python2\n  python-pkg-resources python2 python2-dev python2-minimal python2.7\n  python2.7-dev python2.7-minimal\nSuggested packages:\n  glibc-doc python-setuptools-doc python2-doc python-tk python2.7-doc binutils\n  binfmt-support\nThe following NEW packages will be installed:\n  libc-dev-bin libc6-dev libcrypt-dev libexpat1-dev libpython2-dev\n  libpython2-stdlib libpython2.7 libpython2.7-dev libpython2.7-minimal\n  libpython2.7-stdlib linux-libc-dev manpages-dev python-dev-is-python2\n  python-is-python2 python-pkg-resources python-setuptools python2 python2-dev\n  python2-minimal python2.7 python2.7-dev python2.7-minimal\nThe following packages will be upgraded:\n  libc6\n1 upgraded, 22 newly installed, 0 to remove and 118 not upgraded.\nNeed to get 17.0 MB of archives.\nAfter this operation, 67.5 MB of additional disk space will be used.\nGet:1 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libpython2.7-minimal amd64 2.7.18-1~20.04.1 [335 kB]\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 python2.7-minimal amd64 2.7.18-1~20.04.1 [1285 kB]\nGet:3 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python2-minimal amd64 2.7.17-2ubuntu4 [27.5 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libc6 amd64 2.31-0ubuntu9.2 [2715 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libpython2.7-stdlib amd64 2.7.18-1~20.04.1 [1887 kB]\nGet:6 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 python2.7 amd64 2.7.18-1~20.04.1 [248 kB]\nGet:7 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 libpython2-stdlib amd64 2.7.17-2ubuntu4 [7072 B]\nGet:8 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python2 amd64 2.7.17-2ubuntu4 [26.5 kB]\nGet:9 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libc-dev-bin amd64 2.31-0ubuntu9.2 [71.8 kB]\nGet:10 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-libc-dev amd64 5.4.0-73.82 [1130 kB]\nGet:11 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libcrypt-dev amd64 1:4.4.10-10ubuntu4 [104 kB]\nGet:12 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libc6-dev amd64 2.31-0ubuntu9.2 [2520 kB]\nGet:13 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libexpat1-dev amd64 2.2.9-1build1 [116 kB]\nGet:14 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libpython2.7 amd64 2.7.18-1~20.04.1 [1038 kB]\nGet:15 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libpython2.7-dev amd64 2.7.18-1~20.04.1 [2475 kB]\nGet:16 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 libpython2-dev amd64 2.7.17-2ubuntu4 [7140 B]\nGet:17 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 manpages-dev all 5.05-1 [2266 kB]\nGet:18 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python-is-python2 all 2.7.17-4 [2496 B]\nGet:19 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 python2.7-dev amd64 2.7.18-1~20.04.1 [287 kB]\nGet:20 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python2-dev amd64 2.7.17-2ubuntu4 [1268 B]\nGet:21 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python-dev-is-python2 all 2.7.17-4 [1396 B]\nGet:22 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python-pkg-resources all 44.0.0-2 [129 kB]\nGet:23 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python-setuptools all 44.0.0-2 [330 kB]\nPreconfiguring packages ...\nFetched 17.0 MB in 2s (9762 kB/s)\nSelecting previously unselected package libpython2.7-minimal:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 75928 files and directories currently installed.)\r\nPreparing to unpack .../libpython2.7-minimal_2.7.18-1~20.04.1_amd64.deb ...\r\nUnpacking libpython2.7-minimal:amd64 (2.7.18-1~20.04.1) ...\r\nSelecting previously unselected package python2.7-minimal.\r\nPreparing to unpack .../python2.7-minimal_2.7.18-1~20.04.1_amd64.deb ...\r\nUnpacking python2.7-minimal (2.7.18-1~20.04.1) ...\r\nSelecting previously unselected package python2-minimal.\r\nPreparing to unpack .../python2-minimal_2.7.17-2ubuntu4_amd64.deb ...\r\nUnpacking python2-minimal (2.7.17-2ubuntu4) ...\r\nPreparing to unpack .../libc6_2.31-0ubuntu9.2_amd64.deb ...\r\nUnpacking libc6:amd64 (2.31-0ubuntu9.2) over (2.31-0ubuntu9) ...\r\nSetting up libc6:amd64 (2.31-0ubuntu9.2) ...\r\nSelecting previously unselected package libpython2.7-stdlib:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 76165 files and directories currently installed.)\r\nPreparing to unpack .../libpython2.7-stdlib_2.7.18-1~20.04.1_amd64.deb ...\r\nUnpacking libpython2.7-stdlib:amd64 (2.7.18-1~20.04.1) ...\r\nSelecting previously unselected package python2.7.\r\nPreparing to unpack .../python2.7_2.7.18-1~20.04.1_amd64.deb ...\r\nUnpacking python2.7 (2.7.18-1~20.04.1) ...\r\nSelecting previously unselected package libpython2-stdlib:amd64.\r\nPreparing to unpack .../libpython2-stdlib_2.7.17-2ubuntu4_amd64.deb ...\r\nUnpacking libpython2-stdlib:amd64 (2.7.17-2ubuntu4) ...\r\nSetting up libpython2.7-minimal:amd64 (2.7.18-1~20.04.1) ...\r\nSetting up python2.7-minimal (2.7.18-1~20.04.1) ...\r\nSetting up python2-minimal (2.7.17-2ubuntu4) ...\r\nSelecting previously unselected package python2.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 76675 files and directories currently installed.)\r\nPreparing to unpack .../00-python2_2.7.17-2ubuntu4_amd64.deb ...\r\nUnpacking python2 (2.7.17-2ubuntu4) ...\r\nSelecting previously unselected package libc-dev-bin.\r\nPreparing to unpack .../01-libc-dev-bin_2.31-0ubuntu9.2_amd64.deb ...\r\nUnpacking libc-dev-bin (2.31-0ubuntu9.2) ...\r\nSelecting previously unselected package linux-libc-dev:amd64.\r\nPreparing to unpack .../02-linux-libc-dev_5.4.0-73.82_amd64.deb ...\r\nUnpacking linux-libc-dev:amd64 (5.4.0-73.82) ...\r\nSelecting previously unselected package libcrypt-dev:amd64.\r\nPreparing to unpack .../03-libcrypt-dev_1%3a4.4.10-10ubuntu4_amd64.deb ...\r\nUnpacking libcrypt-dev:amd64 (1:4.4.10-10ubuntu4) ...\r\nSelecting previously unselected package libc6-dev:amd64.\r\nPreparing to unpack .../04-libc6-dev_2.31-0ubuntu9.2_amd64.deb ...\r\nUnpacking libc6-dev:amd64 (2.31-0ubuntu9.2) ...\r\nSelecting previously unselected package libexpat1-dev:amd64.\r\nPreparing to unpack .../05-libexpat1-dev_2.2.9-1build1_amd64.deb ...\r\nUnpacking libexpat1-dev:amd64 (2.2.9-1build1) ...\r\nSelecting previously unselected package libpython2.7:amd64.\r\nPreparing to unpack .../06-libpython2.7_2.7.18-1~20.04.1_amd64.deb ...\r\nUnpacking libpython2.7:amd64 (2.7.18-1~20.04.1) ...\r\nSelecting previously unselected package libpython2.7-dev:amd64.\r\nPreparing to unpack .../07-libpython2.7-dev_2.7.18-1~20.04.1_amd64.deb ...\r\nUnpacking libpython2.7-dev:amd64 (2.7.18-1~20.04.1) ...\r\nSelecting previously unselected package libpython2-dev:amd64.\r\nPreparing to unpack .../08-libpython2-dev_2.7.17-2ubuntu4_amd64.deb ...\r\nUnpacking libpython2-dev:amd64 (2.7.17-2ubuntu4) ...\r\nSelecting previously unselected package manpages-dev.\r\nPreparing to unpack .../09-manpages-dev_5.05-1_all.deb ...\r\nUnpacking manpages-dev (5.05-1) ...\r\nSelecting previously unselected package python-is-python2.\r\nPreparing to unpack .../10-python-is-python2_2.7.17-4_all.deb ...\r\nUnpacking python-is-python2 (2.7.17-4) ...\r\nSelecting previously unselected package python2.7-dev.\r\nPreparing to unpack .../11-python2.7-dev_2.7.18-1~20.04.1_amd64.deb ...\r\nUnpacking python2.7-dev (2.7.18-1~20.04.1) ...\r\nSelecting previously unselected package python2-dev.\r\nPreparing to unpack .../12-python2-dev_2.7.17-2ubuntu4_amd64.deb ...\r\nUnpacking python2-dev (2.7.17-2ubuntu4) ...\r\nSelecting previously unselected package python-dev-is-python2.\r\nPreparing to unpack .../13-python-dev-is-python2_2.7.17-4_all.deb ...\r\nUnpacking python-dev-is-python2 (2.7.17-4) ...\r\nSelecting previously unselected package python-pkg-resources.\r\nPreparing to unpack .../14-python-pkg-resources_44.0.0-2_all.deb ...\r\nUnpacking python-pkg-resources (44.0.0-2) ...\r\nSelecting previously unselected package python-setuptools.\r\nPreparing to unpack .../15-python-setuptools_44.0.0-2_all.deb ...\r\nUnpacking python-setuptools (44.0.0-2) ...\r\nSetting up manpages-dev (5.05-1) ...\r\nSetting up linux-libc-dev:amd64 (5.4.0-73.82) ...\r\nSetting up libpython2.7-stdlib:amd64 (2.7.18-1~20.04.1) ...\r\nSetting up libcrypt-dev:amd64 (1:4.4.10-10ubuntu4) ...\r\nSetting up libc-dev-bin (2.31-0ubuntu9.2) ...\r\nSetting up libpython2.7:amd64 (2.7.18-1~20.04.1) ...\r\nSetting up python2.7 (2.7.18-1~20.04.1) ...\r\nSetting up libpython2-stdlib:amd64 (2.7.17-2ubuntu4) ...\r\nSetting up python2 (2.7.17-2ubuntu4) ...\r\nSetting up libc6-dev:amd64 (2.31-0ubuntu9.2) ...\r\nSetting up python-is-python2 (2.7.17-4) ...\r\nSetting up python-pkg-resources (44.0.0-2) ...\r\nSetting up libexpat1-dev:amd64 (2.2.9-1build1) ...\r\nSetting up python-setuptools (44.0.0-2) ...\r\nSetting up libpython2.7-dev:amd64 (2.7.18-1~20.04.1) ...\r\nSetting up libpython2-dev:amd64 (2.7.17-2ubuntu4) ...\r\nSetting up python2.7-dev (2.7.18-1~20.04.1) ...\r\nSetting up python2-dev (2.7.17-2ubuntu4) ...\r\nSetting up python-dev-is-python2 (2.7.17-4) ...\r\nProcessing triggers for libc-bin (2.31-0ubuntu9) ...\r\nProcessing triggers for man-db (2.9.1-1) ...\r\nProcessing triggers for mime-support (3.64ubuntu1) ...\r\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following additional packages will be installed:", "  libc-dev-bin libc6 libc6-dev libcrypt-dev libexpat1-dev libpython2-dev", "  libpython2-stdlib libpython2.7 libpython2.7-dev libpython2.7-minimal", "  libpython2.7-stdlib linux-libc-dev manpages-dev python-is-python2", "  python-pkg-resources python2 python2-dev python2-minimal python2.7", "  python2.7-dev python2.7-minimal", "Suggested packages:", "  glibc-doc python-setuptools-doc python2-doc python-tk python2.7-doc binutils", "  binfmt-support", "The following NEW packages will be installed:", "  libc-dev-bin libc6-dev libcrypt-dev libexpat1-dev libpython2-dev", "  libpython2-stdlib libpython2.7 libpython2.7-dev libpython2.7-minimal", "  libpython2.7-stdlib linux-libc-dev manpages-dev python-dev-is-python2", "  python-is-python2 python-pkg-resources python-setuptools python2 python2-dev", "  python2-minimal python2.7 python2.7-dev python2.7-minimal", "The following packages will be upgraded:", "  libc6", "1 upgraded, 22 newly installed, 0 to remove and 118 not upgraded.", "Need to get 17.0 MB of archives.", "After this operation, 67.5 MB of additional disk space will be used.", "Get:1 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libpython2.7-minimal amd64 2.7.18-1~20.04.1 [335 kB]", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 python2.7-minimal amd64 2.7.18-1~20.04.1 [1285 kB]", "Get:3 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python2-minimal amd64 2.7.17-2ubuntu4 [27.5 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libc6 amd64 2.31-0ubuntu9.2 [2715 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libpython2.7-stdlib amd64 2.7.18-1~20.04.1 [1887 kB]", "Get:6 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 python2.7 amd64 2.7.18-1~20.04.1 [248 kB]", "Get:7 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 libpython2-stdlib amd64 2.7.17-2ubuntu4 [7072 B]", "Get:8 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python2 amd64 2.7.17-2ubuntu4 [26.5 kB]", "Get:9 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libc-dev-bin amd64 2.31-0ubuntu9.2 [71.8 kB]", "Get:10 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 linux-libc-dev amd64 5.4.0-73.82 [1130 kB]", "Get:11 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libcrypt-dev amd64 1:4.4.10-10ubuntu4 [104 kB]", "Get:12 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libc6-dev amd64 2.31-0ubuntu9.2 [2520 kB]", "Get:13 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libexpat1-dev amd64 2.2.9-1build1 [116 kB]", "Get:14 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libpython2.7 amd64 2.7.18-1~20.04.1 [1038 kB]", "Get:15 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 libpython2.7-dev amd64 2.7.18-1~20.04.1 [2475 kB]", "Get:16 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 libpython2-dev amd64 2.7.17-2ubuntu4 [7140 B]", "Get:17 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 manpages-dev all 5.05-1 [2266 kB]", "Get:18 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python-is-python2 all 2.7.17-4 [2496 B]", "Get:19 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 python2.7-dev amd64 2.7.18-1~20.04.1 [287 kB]", "Get:20 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python2-dev amd64 2.7.17-2ubuntu4 [1268 B]", "Get:21 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python-dev-is-python2 all 2.7.17-4 [1396 B]", "Get:22 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python-pkg-resources all 44.0.0-2 [129 kB]", "Get:23 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python-setuptools all 44.0.0-2 [330 kB]", "Preconfiguring packages ...", "Fetched 17.0 MB in 2s (9762 kB/s)", "Selecting previously unselected package libpython2.7-minimal:amd64.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 75928 files and directories currently installed.)", "Preparing to unpack .../libpython2.7-minimal_2.7.18-1~20.04.1_amd64.deb ...", "Unpacking libpython2.7-minimal:amd64 (2.7.18-1~20.04.1) ...", "Selecting previously unselected package python2.7-minimal.", "Preparing to unpack .../python2.7-minimal_2.7.18-1~20.04.1_amd64.deb ...", "Unpacking python2.7-minimal (2.7.18-1~20.04.1) ...", "Selecting previously unselected package python2-minimal.", "Preparing to unpack .../python2-minimal_2.7.17-2ubuntu4_amd64.deb ...", "Unpacking python2-minimal (2.7.17-2ubuntu4) ...", "Preparing to unpack .../libc6_2.31-0ubuntu9.2_amd64.deb ...", "Unpacking libc6:amd64 (2.31-0ubuntu9.2) over (2.31-0ubuntu9) ...", "Setting up libc6:amd64 (2.31-0ubuntu9.2) ...", "Selecting previously unselected package libpython2.7-stdlib:amd64.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 76165 files and directories currently installed.)", "Preparing to unpack .../libpython2.7-stdlib_2.7.18-1~20.04.1_amd64.deb ...", "Unpacking libpython2.7-stdlib:amd64 (2.7.18-1~20.04.1) ...", "Selecting previously unselected package python2.7.", "Preparing to unpack .../python2.7_2.7.18-1~20.04.1_amd64.deb ...", "Unpacking python2.7 (2.7.18-1~20.04.1) ...", "Selecting previously unselected package libpython2-stdlib:amd64.", "Preparing to unpack .../libpython2-stdlib_2.7.17-2ubuntu4_amd64.deb ...", "Unpacking libpython2-stdlib:amd64 (2.7.17-2ubuntu4) ...", "Setting up libpython2.7-minimal:amd64 (2.7.18-1~20.04.1) ...", "Setting up python2.7-minimal (2.7.18-1~20.04.1) ...", "Setting up python2-minimal (2.7.17-2ubuntu4) ...", "Selecting previously unselected package python2.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 76675 files and directories currently installed.)", "Preparing to unpack .../00-python2_2.7.17-2ubuntu4_amd64.deb ...", "Unpacking python2 (2.7.17-2ubuntu4) ...", "Selecting previously unselected package libc-dev-bin.", "Preparing to unpack .../01-libc-dev-bin_2.31-0ubuntu9.2_amd64.deb ...", "Unpacking libc-dev-bin (2.31-0ubuntu9.2) ...", "Selecting previously unselected package linux-libc-dev:amd64.", "Preparing to unpack .../02-linux-libc-dev_5.4.0-73.82_amd64.deb ...", "Unpacking linux-libc-dev:amd64 (5.4.0-73.82) ...", "Selecting previously unselected package libcrypt-dev:amd64.", "Preparing to unpack .../03-libcrypt-dev_1%3a4.4.10-10ubuntu4_amd64.deb ...", "Unpacking libcrypt-dev:amd64 (1:4.4.10-10ubuntu4) ...", "Selecting previously unselected package libc6-dev:amd64.", "Preparing to unpack .../04-libc6-dev_2.31-0ubuntu9.2_amd64.deb ...", "Unpacking libc6-dev:amd64 (2.31-0ubuntu9.2) ...", "Selecting previously unselected package libexpat1-dev:amd64.", "Preparing to unpack .../05-libexpat1-dev_2.2.9-1build1_amd64.deb ...", "Unpacking libexpat1-dev:amd64 (2.2.9-1build1) ...", "Selecting previously unselected package libpython2.7:amd64.", "Preparing to unpack .../06-libpython2.7_2.7.18-1~20.04.1_amd64.deb ...", "Unpacking libpython2.7:amd64 (2.7.18-1~20.04.1) ...", "Selecting previously unselected package libpython2.7-dev:amd64.", "Preparing to unpack .../07-libpython2.7-dev_2.7.18-1~20.04.1_amd64.deb ...", "Unpacking libpython2.7-dev:amd64 (2.7.18-1~20.04.1) ...", "Selecting previously unselected package libpython2-dev:amd64.", "Preparing to unpack .../08-libpython2-dev_2.7.17-2ubuntu4_amd64.deb ...", "Unpacking libpython2-dev:amd64 (2.7.17-2ubuntu4) ...", "Selecting previously unselected package manpages-dev.", "Preparing to unpack .../09-manpages-dev_5.05-1_all.deb ...", "Unpacking manpages-dev (5.05-1) ...", "Selecting previously unselected package python-is-python2.", "Preparing to unpack .../10-python-is-python2_2.7.17-4_all.deb ...", "Unpacking python-is-python2 (2.7.17-4) ...", "Selecting previously unselected package python2.7-dev.", "Preparing to unpack .../11-python2.7-dev_2.7.18-1~20.04.1_amd64.deb ...", "Unpacking python2.7-dev (2.7.18-1~20.04.1) ...", "Selecting previously unselected package python2-dev.", "Preparing to unpack .../12-python2-dev_2.7.17-2ubuntu4_amd64.deb ...", "Unpacking python2-dev (2.7.17-2ubuntu4) ...", "Selecting previously unselected package python-dev-is-python2.", "Preparing to unpack .../13-python-dev-is-python2_2.7.17-4_all.deb ...", "Unpacking python-dev-is-python2 (2.7.17-4) ...", "Selecting previously unselected package python-pkg-resources.", "Preparing to unpack .../14-python-pkg-resources_44.0.0-2_all.deb ...", "Unpacking python-pkg-resources (44.0.0-2) ...", "Selecting previously unselected package python-setuptools.", "Preparing to unpack .../15-python-setuptools_44.0.0-2_all.deb ...", "Unpacking python-setuptools (44.0.0-2) ...", "Setting up manpages-dev (5.05-1) ...", "Setting up linux-libc-dev:amd64 (5.4.0-73.82) ...", "Setting up libpython2.7-stdlib:amd64 (2.7.18-1~20.04.1) ...", "Setting up libcrypt-dev:amd64 (1:4.4.10-10ubuntu4) ...", "Setting up libc-dev-bin (2.31-0ubuntu9.2) ...", "Setting up libpython2.7:amd64 (2.7.18-1~20.04.1) ...", "Setting up python2.7 (2.7.18-1~20.04.1) ...", "Setting up libpython2-stdlib:amd64 (2.7.17-2ubuntu4) ...", "Setting up python2 (2.7.17-2ubuntu4) ...", "Setting up libc6-dev:amd64 (2.31-0ubuntu9.2) ...", "Setting up python-is-python2 (2.7.17-4) ...", "Setting up python-pkg-resources (44.0.0-2) ...", "Setting up libexpat1-dev:amd64 (2.2.9-1build1) ...", "Setting up python-setuptools (44.0.0-2) ...", "Setting up libpython2.7-dev:amd64 (2.7.18-1~20.04.1) ...", "Setting up libpython2-dev:amd64 (2.7.17-2ubuntu4) ...", "Setting up python2.7-dev (2.7.18-1~20.04.1) ...", "Setting up python2-dev (2.7.17-2ubuntu4) ...", "Setting up python-dev-is-python2 (2.7.17-4) ...", "Processing triggers for libc-bin (2.31-0ubuntu9) ...", "Processing triggers for man-db (2.9.1-1) ...", "Processing triggers for mime-support (3.64ubuntu1) ..."]}
2021-05-20 10:42:13,758 p=2599090 u=lma n=ansible | TASK [app-test : install pip] ***************************************************************************************************************************************************************************************
2021-05-20 10:42:14,312 p=2599090 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": false, "msg": "Failed to find required executable easy_install in paths: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin"}
2021-05-20 10:42:14,314 p=2599090 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 10:42:14,314 p=2599090 u=lma n=ansible | app-test                   : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-20 10:44:01,962 p=2599680 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 10:44:01,968 p=2599680 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:44:01,968 p=2599680 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 10:44:02,127 p=2599680 u=lma n=ansible | [DEPRECATION WARNING]: Included file '/home/lma/work/new/ansible-test/playbooks/supervisor.yaml' not found, however since this include is not explicitly marked as 'static: yes', we will try and include it 
dynamically later. In the future, this will be an error unless 'static: no' is used on the include task. If you do not want missing includes to be considered dynamic, use 'static: yes' on the include or set the 
global ansible.cfg options to make all includes static for tasks and/or handlers. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in 
ansible.cfg.
2021-05-20 10:44:02,162 p=2599680 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 10:44:02,172 p=2599680 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 10:44:05,038 p=2599680 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:44:05,039 p=2599680 u=lma n=ansible | ok: [app-test]
2021-05-20 10:44:05,048 p=2599680 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 10:44:05,085 p=2599680 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 10:44:05,094 p=2599680 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 10:44:23,309 p=2599680 u=lma n=ansible | [WARNING]: Updating cache and auto-installing missing dependency: python-apt

2021-05-20 10:44:23,310 p=2599680 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621496662, "cache_updated": true, "changed": false}
2021-05-20 10:44:23,320 p=2599680 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 10:44:23,357 p=2599680 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 10:44:23,364 p=2599680 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 10:44:24,979 p=2599680 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621496662, "cache_updated": false, "changed": false}
2021-05-20 10:44:24,989 p=2599680 u=lma n=ansible | TASK [app-test : install pip] ***************************************************************************************************************************************************************************************
2021-05-20 10:44:25,452 p=2599680 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": false, "msg": "Failed to find required executable easy_install in paths: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin"}
2021-05-20 10:44:25,454 p=2599680 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 10:44:25,454 p=2599680 u=lma n=ansible | app-test                   : ok=5    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-20 10:48:33,782 p=2600566 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 10:48:33,789 p=2600566 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:48:33,789 p=2600566 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 10:48:34,006 p=2600566 u=lma n=ansible | ERROR! couldn't resolve module/action 'easy_install3'. This often indicates a misspelling, missing collection, or incorrect module path.

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/python.yml': line 8, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: install pip
  ^ here

2021-05-20 10:49:05,507 p=2600660 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 10:49:05,514 p=2600660 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:49:05,514 p=2600660 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 10:49:05,670 p=2600660 u=lma n=ansible | [DEPRECATION WARNING]: Included file '/home/lma/work/new/ansible-test/playbooks/supervisor.yaml' not found, however since this include is not explicitly marked as 'static: yes', we will try and include it 
dynamically later. In the future, this will be an error unless 'static: no' is used on the include task. If you do not want missing includes to be considered dynamic, use 'static: yes' on the include or set the 
global ansible.cfg options to make all includes static for tasks and/or handlers. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in 
ansible.cfg.
2021-05-20 10:49:05,705 p=2600660 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 10:49:05,716 p=2600660 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 10:49:08,705 p=2600660 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:49:08,705 p=2600660 u=lma n=ansible | ok: [app-test]
2021-05-20 10:49:08,713 p=2600660 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 10:49:08,750 p=2600660 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 10:49:08,759 p=2600660 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 10:49:12,140 p=2600660 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621496950, "cache_updated": true, "changed": false}
2021-05-20 10:49:12,154 p=2600660 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 10:49:12,191 p=2600660 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 10:49:12,204 p=2600660 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 10:50:06,073 p=2600660 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621496950, "cache_updated": false, "changed": true, "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  binutils binutils-common binutils-x86-64-linux-gnu build-essential cpp cpp-9\n  dpkg-dev fakeroot g++ g++-9 gcc gcc-9 gcc-9-base libalgorithm-diff-perl\n  libalgorithm-diff-xs-perl libalgorithm-merge-perl libasan5 libatomic1\n  libbinutils libcc1-0 libctf-nobfd0 libctf0 libdpkg-perl libfakeroot\n  libfile-fcntllock-perl libgcc-9-dev libgomp1 libisl22 libitm1 liblsan0\n  libmpc3 libpython3-dev libpython3.8-dev libquadmath0 libstdc++-9-dev\n  libtsan0 libubsan1 make python-pip-whl python3-dev python3-wheel\n  python3.8-dev zlib1g zlib1g-dev\nSuggested packages:\n  binutils-doc cpp-doc gcc-9-locales debian-keyring g++-multilib\n  g++-9-multilib gcc-9-doc gcc-multilib autoconf automake libtool flex bison\n  gdb gcc-doc gcc-9-multilib bzr libstdc++-9-doc make-doc\nThe following NEW packages will be installed:\n  binutils binutils-common binutils-x86-64-linux-gnu build-essential cpp cpp-9\n  dpkg-dev fakeroot g++ g++-9 gcc gcc-9 gcc-9-base libalgorithm-diff-perl\n  libalgorithm-diff-xs-perl libalgorithm-merge-perl libasan5 libatomic1\n  libbinutils libcc1-0 libctf-nobfd0 libctf0 libdpkg-perl libfakeroot\n  libfile-fcntllock-perl libgcc-9-dev libgomp1 libisl22 libitm1 liblsan0\n  libmpc3 libpython3-dev libpython3.8-dev libquadmath0 libstdc++-9-dev\n  libtsan0 libubsan1 make python-pip-whl python3-dev python3-pip python3-wheel\n  python3.8-dev zlib1g-dev\nThe following packages will be upgraded:\n  zlib1g\n1 upgraded, 44 newly installed, 0 to remove and 117 not upgraded.\nNeed to get 40.6 MB of archives.\nAfter this operation, 169 MB of additional disk space will be used.\nGet:1 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 zlib1g amd64 1:1.2.11.dfsg-2ubuntu1.2 [53.6 kB]\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 binutils-common amd64 2.34-6ubuntu1.1 [207 kB]\nGet:3 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libbinutils amd64 2.34-6ubuntu1.1 [475 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libctf-nobfd0 amd64 2.34-6ubuntu1.1 [47.1 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libctf0 amd64 2.34-6ubuntu1.1 [46.6 kB]\nGet:6 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 binutils-x86-64-linux-gnu amd64 2.34-6ubuntu1.1 [1613 kB]\nGet:7 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 binutils amd64 2.34-6ubuntu1.1 [3380 B]\nGet:8 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 gcc-9-base amd64 9.3.0-17ubuntu1~20.04 [19.1 kB]\nGet:9 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libisl22 amd64 0.22.1-1 [592 kB]\nGet:10 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libmpc3 amd64 1.1.0-1 [40.8 kB]\nGet:11 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 cpp-9 amd64 9.3.0-17ubuntu1~20.04 [7494 kB]\nGet:12 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 cpp amd64 4:9.3.0-1ubuntu2 [27.6 kB]\nGet:13 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libcc1-0 amd64 10.2.0-5ubuntu1~20.04 [41.1 kB]\nGet:14 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libgomp1 amd64 10.2.0-5ubuntu1~20.04 [102 kB]\nGet:15 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libitm1 amd64 10.2.0-5ubuntu1~20.04 [26.4 kB]\nGet:16 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libatomic1 amd64 10.2.0-5ubuntu1~20.04 [9300 B]\nGet:17 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libasan5 amd64 9.3.0-17ubuntu1~20.04 [394 kB]\nGet:18 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 liblsan0 amd64 10.2.0-5ubuntu1~20.04 [144 kB]\nGet:19 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libtsan0 amd64 10.2.0-5ubuntu1~20.04 [320 kB]\nGet:20 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libubsan1 amd64 10.2.0-5ubuntu1~20.04 [136 kB]\nGet:21 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libquadmath0 amd64 10.2.0-5ubuntu1~20.04 [146 kB]\nGet:22 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libgcc-9-dev amd64 9.3.0-17ubuntu1~20.04 [2360 kB]\nGet:23 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 gcc-9 amd64 9.3.0-17ubuntu1~20.04 [8241 kB]\nGet:24 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 gcc amd64 4:9.3.0-1ubuntu2 [5208 B]\nGet:25 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libstdc++-9-dev amd64 9.3.0-17ubuntu1~20.04 [1714 kB]\nGet:26 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 g++-9 amd64 9.3.0-17ubuntu1~20.04 [8405 kB]\nGet:27 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 g++ amd64 4:9.3.0-1ubuntu2 [1604 B]\nGet:28 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 make amd64 4.2.1-1.2 [162 kB]\nGet:29 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libdpkg-perl all 1.19.7ubuntu3 [230 kB]\nGet:30 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 dpkg-dev all 1.19.7ubuntu3 [679 kB]\nGet:31 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 build-essential amd64 12.8ubuntu1.1 [4664 B]\nGet:32 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libfakeroot amd64 1.24-1 [25.7 kB]\nGet:33 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 fakeroot amd64 1.24-1 [62.6 kB]\nGet:34 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libalgorithm-diff-perl all 1.19.03-2 [46.6 kB]\nGet:35 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libalgorithm-diff-xs-perl amd64 0.04-6 [11.3 kB]\nGet:36 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libalgorithm-merge-perl all 0.08-3 [12.0 kB]\nGet:37 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libfile-fcntllock-perl amd64 0.22-3build4 [33.1 kB]\nGet:38 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libpython3.8-dev amd64 3.8.5-1~20.04.2 [3942 kB]\nGet:39 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libpython3-dev amd64 3.8.2-0ubuntu2 [7236 B]\nGet:40 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 python-pip-whl all 20.0.2-5ubuntu1.5 [1805 kB]\nGet:41 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 zlib1g-dev amd64 1:1.2.11.dfsg-2ubuntu1.2 [155 kB]\nGet:42 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 python3.8-dev amd64 3.8.5-1~20.04.2 [515 kB]\nGet:43 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 python3-dev amd64 3.8.2-0ubuntu2 [1212 B]\nGet:44 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python3-wheel all 0.34.2-1 [23.8 kB]\nGet:45 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 python3-pip all 20.0.2-5ubuntu1.5 [230 kB]\nFetched 40.6 MB in 4s (10.1 MB/s)\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 80728 files and directories currently installed.)\r\nPreparing to unpack .../zlib1g_1%3a1.2.11.dfsg-2ubuntu1.2_amd64.deb ...\r\nUnpacking zlib1g:amd64 (1:1.2.11.dfsg-2ubuntu1.2) over (1:1.2.11.dfsg-2ubuntu1) ...\r\nSetting up zlib1g:amd64 (1:1.2.11.dfsg-2ubuntu1.2) ...\r\nSelecting previously unselected package binutils-common:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 80728 files and directories currently installed.)\r\nPreparing to unpack .../00-binutils-common_2.34-6ubuntu1.1_amd64.deb ...\r\nUnpacking binutils-common:amd64 (2.34-6ubuntu1.1) ...\r\nSelecting previously unselected package libbinutils:amd64.\r\nPreparing to unpack .../01-libbinutils_2.34-6ubuntu1.1_amd64.deb ...\r\nUnpacking libbinutils:amd64 (2.34-6ubuntu1.1) ...\r\nSelecting previously unselected package libctf-nobfd0:amd64.\r\nPreparing to unpack .../02-libctf-nobfd0_2.34-6ubuntu1.1_amd64.deb ...\r\nUnpacking libctf-nobfd0:amd64 (2.34-6ubuntu1.1) ...\r\nSelecting previously unselected package libctf0:amd64.\r\nPreparing to unpack .../03-libctf0_2.34-6ubuntu1.1_amd64.deb ...\r\nUnpacking libctf0:amd64 (2.34-6ubuntu1.1) ...\r\nSelecting previously unselected package binutils-x86-64-linux-gnu.\r\nPreparing to unpack .../04-binutils-x86-64-linux-gnu_2.34-6ubuntu1.1_amd64.deb ...\r\nUnpacking binutils-x86-64-linux-gnu (2.34-6ubuntu1.1) ...\r\nSelecting previously unselected package binutils.\r\nPreparing to unpack .../05-binutils_2.34-6ubuntu1.1_amd64.deb ...\r\nUnpacking binutils (2.34-6ubuntu1.1) ...\r\nSelecting previously unselected package gcc-9-base:amd64.\r\nPreparing to unpack .../06-gcc-9-base_9.3.0-17ubuntu1~20.04_amd64.deb ...\r\nUnpacking gcc-9-base:amd64 (9.3.0-17ubuntu1~20.04) ...\r\nSelecting previously unselected package libisl22:amd64.\r\nPreparing to unpack .../07-libisl22_0.22.1-1_amd64.deb ...\r\nUnpacking libisl22:amd64 (0.22.1-1) ...\r\nSelecting previously unselected package libmpc3:amd64.\r\nPreparing to unpack .../08-libmpc3_1.1.0-1_amd64.deb ...\r\nUnpacking libmpc3:amd64 (1.1.0-1) ...\r\nSelecting previously unselected package cpp-9.\r\nPreparing to unpack .../09-cpp-9_9.3.0-17ubuntu1~20.04_amd64.deb ...\r\nUnpacking cpp-9 (9.3.0-17ubuntu1~20.04) ...\r\nSelecting previously unselected package cpp.\r\nPreparing to unpack .../10-cpp_4%3a9.3.0-1ubuntu2_amd64.deb ...\r\nUnpacking cpp (4:9.3.0-1ubuntu2) ...\r\nSelecting previously unselected package libcc1-0:amd64.\r\nPreparing to unpack .../11-libcc1-0_10.2.0-5ubuntu1~20.04_amd64.deb ...\r\nUnpacking libcc1-0:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSelecting previously unselected package libgomp1:amd64.\r\nPreparing to unpack .../12-libgomp1_10.2.0-5ubuntu1~20.04_amd64.deb ...\r\nUnpacking libgomp1:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSelecting previously unselected package libitm1:amd64.\r\nPreparing to unpack .../13-libitm1_10.2.0-5ubuntu1~20.04_amd64.deb ...\r\nUnpacking libitm1:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSelecting previously unselected package libatomic1:amd64.\r\nPreparing to unpack .../14-libatomic1_10.2.0-5ubuntu1~20.04_amd64.deb ...\r\nUnpacking libatomic1:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSelecting previously unselected package libasan5:amd64.\r\nPreparing to unpack .../15-libasan5_9.3.0-17ubuntu1~20.04_amd64.deb ...\r\nUnpacking libasan5:amd64 (9.3.0-17ubuntu1~20.04) ...\r\nSelecting previously unselected package liblsan0:amd64.\r\nPreparing to unpack .../16-liblsan0_10.2.0-5ubuntu1~20.04_amd64.deb ...\r\nUnpacking liblsan0:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSelecting previously unselected package libtsan0:amd64.\r\nPreparing to unpack .../17-libtsan0_10.2.0-5ubuntu1~20.04_amd64.deb ...\r\nUnpacking libtsan0:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSelecting previously unselected package libubsan1:amd64.\r\nPreparing to unpack .../18-libubsan1_10.2.0-5ubuntu1~20.04_amd64.deb ...\r\nUnpacking libubsan1:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSelecting previously unselected package libquadmath0:amd64.\r\nPreparing to unpack .../19-libquadmath0_10.2.0-5ubuntu1~20.04_amd64.deb ...\r\nUnpacking libquadmath0:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSelecting previously unselected package libgcc-9-dev:amd64.\r\nPreparing to unpack .../20-libgcc-9-dev_9.3.0-17ubuntu1~20.04_amd64.deb ...\r\nUnpacking libgcc-9-dev:amd64 (9.3.0-17ubuntu1~20.04) ...\r\nSelecting previously unselected package gcc-9.\r\nPreparing to unpack .../21-gcc-9_9.3.0-17ubuntu1~20.04_amd64.deb ...\r\nUnpacking gcc-9 (9.3.0-17ubuntu1~20.04) ...\r\nSelecting previously unselected package gcc.\r\nPreparing to unpack .../22-gcc_4%3a9.3.0-1ubuntu2_amd64.deb ...\r\nUnpacking gcc (4:9.3.0-1ubuntu2) ...\r\nSelecting previously unselected package libstdc++-9-dev:amd64.\r\nPreparing to unpack .../23-libstdc++-9-dev_9.3.0-17ubuntu1~20.04_amd64.deb ...\r\nUnpacking libstdc++-9-dev:amd64 (9.3.0-17ubuntu1~20.04) ...\r\nSelecting previously unselected package g++-9.\r\nPreparing to unpack .../24-g++-9_9.3.0-17ubuntu1~20.04_amd64.deb ...\r\nUnpacking g++-9 (9.3.0-17ubuntu1~20.04) ...\r\nSelecting previously unselected package g++.\r\nPreparing to unpack .../25-g++_4%3a9.3.0-1ubuntu2_amd64.deb ...\r\nUnpacking g++ (4:9.3.0-1ubuntu2) ...\r\nSelecting previously unselected package make.\r\nPreparing to unpack .../26-make_4.2.1-1.2_amd64.deb ...\r\nUnpacking make (4.2.1-1.2) ...\r\nSelecting previously unselected package libdpkg-perl.\r\nPreparing to unpack .../27-libdpkg-perl_1.19.7ubuntu3_all.deb ...\r\nUnpacking libdpkg-perl (1.19.7ubuntu3) ...\r\nSelecting previously unselected package dpkg-dev.\r\nPreparing to unpack .../28-dpkg-dev_1.19.7ubuntu3_all.deb ...\r\nUnpacking dpkg-dev (1.19.7ubuntu3) ...\r\nSelecting previously unselected package build-essential.\r\nPreparing to unpack .../29-build-essential_12.8ubuntu1.1_amd64.deb ...\r\nUnpacking build-essential (12.8ubuntu1.1) ...\r\nSelecting previously unselected package libfakeroot:amd64.\r\nPreparing to unpack .../30-libfakeroot_1.24-1_amd64.deb ...\r\nUnpacking libfakeroot:amd64 (1.24-1) ...\r\nSelecting previously unselected package fakeroot.\r\nPreparing to unpack .../31-fakeroot_1.24-1_amd64.deb ...\r\nUnpacking fakeroot (1.24-1) ...\r\nSelecting previously unselected package libalgorithm-diff-perl.\r\nPreparing to unpack .../32-libalgorithm-diff-perl_1.19.03-2_all.deb ...\r\nUnpacking libalgorithm-diff-perl (1.19.03-2) ...\r\nSelecting previously unselected package libalgorithm-diff-xs-perl.\r\nPreparing to unpack .../33-libalgorithm-diff-xs-perl_0.04-6_amd64.deb ...\r\nUnpacking libalgorithm-diff-xs-perl (0.04-6) ...\r\nSelecting previously unselected package libalgorithm-merge-perl.\r\nPreparing to unpack .../34-libalgorithm-merge-perl_0.08-3_all.deb ...\r\nUnpacking libalgorithm-merge-perl (0.08-3) ...\r\nSelecting previously unselected package libfile-fcntllock-perl.\r\nPreparing to unpack .../35-libfile-fcntllock-perl_0.22-3build4_amd64.deb ...\r\nUnpacking libfile-fcntllock-perl (0.22-3build4) ...\r\nSelecting previously unselected package libpython3.8-dev:amd64.\r\nPreparing to unpack .../36-libpython3.8-dev_3.8.5-1~20.04.2_amd64.deb ...\r\nUnpacking libpython3.8-dev:amd64 (3.8.5-1~20.04.2) ...\r\nSelecting previously unselected package libpython3-dev:amd64.\r\nPreparing to unpack .../37-libpython3-dev_3.8.2-0ubuntu2_amd64.deb ...\r\nUnpacking libpython3-dev:amd64 (3.8.2-0ubuntu2) ...\r\nSelecting previously unselected package python-pip-whl.\r\nPreparing to unpack .../38-python-pip-whl_20.0.2-5ubuntu1.5_all.deb ...\r\nUnpacking python-pip-whl (20.0.2-5ubuntu1.5) ...\r\nSelecting previously unselected package zlib1g-dev:amd64.\r\nPreparing to unpack .../39-zlib1g-dev_1%3a1.2.11.dfsg-2ubuntu1.2_amd64.deb ...\r\nUnpacking zlib1g-dev:amd64 (1:1.2.11.dfsg-2ubuntu1.2) ...\r\nSelecting previously unselected package python3.8-dev.\r\nPreparing to unpack .../40-python3.8-dev_3.8.5-1~20.04.2_amd64.deb ...\r\nUnpacking python3.8-dev (3.8.5-1~20.04.2) ...\r\nSelecting previously unselected package python3-dev.\r\nPreparing to unpack .../41-python3-dev_3.8.2-0ubuntu2_amd64.deb ...\r\nUnpacking python3-dev (3.8.2-0ubuntu2) ...\r\nSelecting previously unselected package python3-wheel.\r\nPreparing to unpack .../42-python3-wheel_0.34.2-1_all.deb ...\r\nUnpacking python3-wheel (0.34.2-1) ...\r\nSelecting previously unselected package python3-pip.\r\nPreparing to unpack .../43-python3-pip_20.0.2-5ubuntu1.5_all.deb ...\r\nUnpacking python3-pip (20.0.2-5ubuntu1.5) ...\r\nSetting up libfile-fcntllock-perl (0.22-3build4) ...\r\nSetting up libalgorithm-diff-perl (1.19.03-2) ...\r\nSetting up binutils-common:amd64 (2.34-6ubuntu1.1) ...\r\nSetting up libctf-nobfd0:amd64 (2.34-6ubuntu1.1) ...\r\nSetting up libgomp1:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSetting up python3-wheel (0.34.2-1) ...\r\nSetting up libfakeroot:amd64 (1.24-1) ...\r\nSetting up fakeroot (1.24-1) ...\r\nupdate-alternatives: using /usr/bin/fakeroot-sysv to provide /usr/bin/fakeroot (fakeroot) in auto mode\r\nSetting up libpython3.8-dev:amd64 (3.8.5-1~20.04.2) ...\r\nSetting up make (4.2.1-1.2) ...\r\nSetting up libquadmath0:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSetting up libmpc3:amd64 (1.1.0-1) ...\r\nSetting up libatomic1:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSetting up libdpkg-perl (1.19.7ubuntu3) ...\r\nSetting up libubsan1:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSetting up zlib1g-dev:amd64 (1:1.2.11.dfsg-2ubuntu1.2) ...\r\nSetting up libisl22:amd64 (0.22.1-1) ...\r\nSetting up python-pip-whl (20.0.2-5ubuntu1.5) ...\r\nSetting up libbinutils:amd64 (2.34-6ubuntu1.1) ...\r\nSetting up libalgorithm-diff-xs-perl (0.04-6) ...\r\nSetting up libcc1-0:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSetting up liblsan0:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSetting up libitm1:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSetting up gcc-9-base:amd64 (9.3.0-17ubuntu1~20.04) ...\r\nSetting up libalgorithm-merge-perl (0.08-3) ...\r\nSetting up libtsan0:amd64 (10.2.0-5ubuntu1~20.04) ...\r\nSetting up libctf0:amd64 (2.34-6ubuntu1.1) ...\r\nSetting up libpython3-dev:amd64 (3.8.2-0ubuntu2) ...\r\nSetting up libasan5:amd64 (9.3.0-17ubuntu1~20.04) ...\r\nSetting up python3-pip (20.0.2-5ubuntu1.5) ...\r\nSetting up python3.8-dev (3.8.5-1~20.04.2) ...\r\nSetting up cpp-9 (9.3.0-17ubuntu1~20.04) ...\r\nSetting up binutils-x86-64-linux-gnu (2.34-6ubuntu1.1) ...\r\nSetting up binutils (2.34-6ubuntu1.1) ...\r\nSetting up dpkg-dev (1.19.7ubuntu3) ...\r\nSetting up libgcc-9-dev:amd64 (9.3.0-17ubuntu1~20.04) ...\r\nSetting up python3-dev (3.8.2-0ubuntu2) ...\r\nSetting up cpp (4:9.3.0-1ubuntu2) ...\r\nSetting up gcc-9 (9.3.0-17ubuntu1~20.04) ...\r\nSetting up libstdc++-9-dev:amd64 (9.3.0-17ubuntu1~20.04) ...\r\nSetting up gcc (4:9.3.0-1ubuntu2) ...\r\nSetting up g++-9 (9.3.0-17ubuntu1~20.04) ...\r\nSetting up g++ (4:9.3.0-1ubuntu2) ...\r\nupdate-alternatives: using /usr/bin/g++ to provide /usr/bin/c++ (c++) in auto mode\r\nSetting up build-essential (12.8ubuntu1.1) ...\r\nProcessing triggers for man-db (2.9.1-1) ...\r\nProcessing triggers for libc-bin (2.31-0ubuntu9) ...\r\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following additional packages will be installed:", "  binutils binutils-common binutils-x86-64-linux-gnu build-essential cpp cpp-9", "  dpkg-dev fakeroot g++ g++-9 gcc gcc-9 gcc-9-base libalgorithm-diff-perl", "  libalgorithm-diff-xs-perl libalgorithm-merge-perl libasan5 libatomic1", "  libbinutils libcc1-0 libctf-nobfd0 libctf0 libdpkg-perl libfakeroot", "  libfile-fcntllock-perl libgcc-9-dev libgomp1 libisl22 libitm1 liblsan0", "  libmpc3 libpython3-dev libpython3.8-dev libquadmath0 libstdc++-9-dev", "  libtsan0 libubsan1 make python-pip-whl python3-dev python3-wheel", "  python3.8-dev zlib1g zlib1g-dev", "Suggested packages:", "  binutils-doc cpp-doc gcc-9-locales debian-keyring g++-multilib", "  g++-9-multilib gcc-9-doc gcc-multilib autoconf automake libtool flex bison", "  gdb gcc-doc gcc-9-multilib bzr libstdc++-9-doc make-doc", "The following NEW packages will be installed:", "  binutils binutils-common binutils-x86-64-linux-gnu build-essential cpp cpp-9", "  dpkg-dev fakeroot g++ g++-9 gcc gcc-9 gcc-9-base libalgorithm-diff-perl", "  libalgorithm-diff-xs-perl libalgorithm-merge-perl libasan5 libatomic1", "  libbinutils libcc1-0 libctf-nobfd0 libctf0 libdpkg-perl libfakeroot", "  libfile-fcntllock-perl libgcc-9-dev libgomp1 libisl22 libitm1 liblsan0", "  libmpc3 libpython3-dev libpython3.8-dev libquadmath0 libstdc++-9-dev", "  libtsan0 libubsan1 make python-pip-whl python3-dev python3-pip python3-wheel", "  python3.8-dev zlib1g-dev", "The following packages will be upgraded:", "  zlib1g", "1 upgraded, 44 newly installed, 0 to remove and 117 not upgraded.", "Need to get 40.6 MB of archives.", "After this operation, 169 MB of additional disk space will be used.", "Get:1 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 zlib1g amd64 1:1.2.11.dfsg-2ubuntu1.2 [53.6 kB]", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 binutils-common amd64 2.34-6ubuntu1.1 [207 kB]", "Get:3 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libbinutils amd64 2.34-6ubuntu1.1 [475 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libctf-nobfd0 amd64 2.34-6ubuntu1.1 [47.1 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libctf0 amd64 2.34-6ubuntu1.1 [46.6 kB]", "Get:6 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 binutils-x86-64-linux-gnu amd64 2.34-6ubuntu1.1 [1613 kB]", "Get:7 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 binutils amd64 2.34-6ubuntu1.1 [3380 B]", "Get:8 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 gcc-9-base amd64 9.3.0-17ubuntu1~20.04 [19.1 kB]", "Get:9 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libisl22 amd64 0.22.1-1 [592 kB]", "Get:10 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libmpc3 amd64 1.1.0-1 [40.8 kB]", "Get:11 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 cpp-9 amd64 9.3.0-17ubuntu1~20.04 [7494 kB]", "Get:12 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 cpp amd64 4:9.3.0-1ubuntu2 [27.6 kB]", "Get:13 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libcc1-0 amd64 10.2.0-5ubuntu1~20.04 [41.1 kB]", "Get:14 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libgomp1 amd64 10.2.0-5ubuntu1~20.04 [102 kB]", "Get:15 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libitm1 amd64 10.2.0-5ubuntu1~20.04 [26.4 kB]", "Get:16 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libatomic1 amd64 10.2.0-5ubuntu1~20.04 [9300 B]", "Get:17 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libasan5 amd64 9.3.0-17ubuntu1~20.04 [394 kB]", "Get:18 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 liblsan0 amd64 10.2.0-5ubuntu1~20.04 [144 kB]", "Get:19 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libtsan0 amd64 10.2.0-5ubuntu1~20.04 [320 kB]", "Get:20 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libubsan1 amd64 10.2.0-5ubuntu1~20.04 [136 kB]", "Get:21 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libquadmath0 amd64 10.2.0-5ubuntu1~20.04 [146 kB]", "Get:22 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libgcc-9-dev amd64 9.3.0-17ubuntu1~20.04 [2360 kB]", "Get:23 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 gcc-9 amd64 9.3.0-17ubuntu1~20.04 [8241 kB]", "Get:24 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 gcc amd64 4:9.3.0-1ubuntu2 [5208 B]", "Get:25 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libstdc++-9-dev amd64 9.3.0-17ubuntu1~20.04 [1714 kB]", "Get:26 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 g++-9 amd64 9.3.0-17ubuntu1~20.04 [8405 kB]", "Get:27 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 g++ amd64 4:9.3.0-1ubuntu2 [1604 B]", "Get:28 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 make amd64 4.2.1-1.2 [162 kB]", "Get:29 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libdpkg-perl all 1.19.7ubuntu3 [230 kB]", "Get:30 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 dpkg-dev all 1.19.7ubuntu3 [679 kB]", "Get:31 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 build-essential amd64 12.8ubuntu1.1 [4664 B]", "Get:32 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libfakeroot amd64 1.24-1 [25.7 kB]", "Get:33 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 fakeroot amd64 1.24-1 [62.6 kB]", "Get:34 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libalgorithm-diff-perl all 1.19.03-2 [46.6 kB]", "Get:35 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libalgorithm-diff-xs-perl amd64 0.04-6 [11.3 kB]", "Get:36 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libalgorithm-merge-perl all 0.08-3 [12.0 kB]", "Get:37 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libfile-fcntllock-perl amd64 0.22-3build4 [33.1 kB]", "Get:38 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 libpython3.8-dev amd64 3.8.5-1~20.04.2 [3942 kB]", "Get:39 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 libpython3-dev amd64 3.8.2-0ubuntu2 [7236 B]", "Get:40 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 python-pip-whl all 20.0.2-5ubuntu1.5 [1805 kB]", "Get:41 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 zlib1g-dev amd64 1:1.2.11.dfsg-2ubuntu1.2 [155 kB]", "Get:42 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 python3.8-dev amd64 3.8.5-1~20.04.2 [515 kB]", "Get:43 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 python3-dev amd64 3.8.2-0ubuntu2 [1212 B]", "Get:44 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 python3-wheel all 0.34.2-1 [23.8 kB]", "Get:45 http://ru.archive.ubuntu.com/ubuntu focal-updates/universe amd64 python3-pip all 20.0.2-5ubuntu1.5 [230 kB]", "Fetched 40.6 MB in 4s (10.1 MB/s)", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 80728 files and directories currently installed.)", "Preparing to unpack .../zlib1g_1%3a1.2.11.dfsg-2ubuntu1.2_amd64.deb ...", "Unpacking zlib1g:amd64 (1:1.2.11.dfsg-2ubuntu1.2) over (1:1.2.11.dfsg-2ubuntu1) ...", "Setting up zlib1g:amd64 (1:1.2.11.dfsg-2ubuntu1.2) ...", "Selecting previously unselected package binutils-common:amd64.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 80728 files and directories currently installed.)", "Preparing to unpack .../00-binutils-common_2.34-6ubuntu1.1_amd64.deb ...", "Unpacking binutils-common:amd64 (2.34-6ubuntu1.1) ...", "Selecting previously unselected package libbinutils:amd64.", "Preparing to unpack .../01-libbinutils_2.34-6ubuntu1.1_amd64.deb ...", "Unpacking libbinutils:amd64 (2.34-6ubuntu1.1) ...", "Selecting previously unselected package libctf-nobfd0:amd64.", "Preparing to unpack .../02-libctf-nobfd0_2.34-6ubuntu1.1_amd64.deb ...", "Unpacking libctf-nobfd0:amd64 (2.34-6ubuntu1.1) ...", "Selecting previously unselected package libctf0:amd64.", "Preparing to unpack .../03-libctf0_2.34-6ubuntu1.1_amd64.deb ...", "Unpacking libctf0:amd64 (2.34-6ubuntu1.1) ...", "Selecting previously unselected package binutils-x86-64-linux-gnu.", "Preparing to unpack .../04-binutils-x86-64-linux-gnu_2.34-6ubuntu1.1_amd64.deb ...", "Unpacking binutils-x86-64-linux-gnu (2.34-6ubuntu1.1) ...", "Selecting previously unselected package binutils.", "Preparing to unpack .../05-binutils_2.34-6ubuntu1.1_amd64.deb ...", "Unpacking binutils (2.34-6ubuntu1.1) ...", "Selecting previously unselected package gcc-9-base:amd64.", "Preparing to unpack .../06-gcc-9-base_9.3.0-17ubuntu1~20.04_amd64.deb ...", "Unpacking gcc-9-base:amd64 (9.3.0-17ubuntu1~20.04) ...", "Selecting previously unselected package libisl22:amd64.", "Preparing to unpack .../07-libisl22_0.22.1-1_amd64.deb ...", "Unpacking libisl22:amd64 (0.22.1-1) ...", "Selecting previously unselected package libmpc3:amd64.", "Preparing to unpack .../08-libmpc3_1.1.0-1_amd64.deb ...", "Unpacking libmpc3:amd64 (1.1.0-1) ...", "Selecting previously unselected package cpp-9.", "Preparing to unpack .../09-cpp-9_9.3.0-17ubuntu1~20.04_amd64.deb ...", "Unpacking cpp-9 (9.3.0-17ubuntu1~20.04) ...", "Selecting previously unselected package cpp.", "Preparing to unpack .../10-cpp_4%3a9.3.0-1ubuntu2_amd64.deb ...", "Unpacking cpp (4:9.3.0-1ubuntu2) ...", "Selecting previously unselected package libcc1-0:amd64.", "Preparing to unpack .../11-libcc1-0_10.2.0-5ubuntu1~20.04_amd64.deb ...", "Unpacking libcc1-0:amd64 (10.2.0-5ubuntu1~20.04) ...", "Selecting previously unselected package libgomp1:amd64.", "Preparing to unpack .../12-libgomp1_10.2.0-5ubuntu1~20.04_amd64.deb ...", "Unpacking libgomp1:amd64 (10.2.0-5ubuntu1~20.04) ...", "Selecting previously unselected package libitm1:amd64.", "Preparing to unpack .../13-libitm1_10.2.0-5ubuntu1~20.04_amd64.deb ...", "Unpacking libitm1:amd64 (10.2.0-5ubuntu1~20.04) ...", "Selecting previously unselected package libatomic1:amd64.", "Preparing to unpack .../14-libatomic1_10.2.0-5ubuntu1~20.04_amd64.deb ...", "Unpacking libatomic1:amd64 (10.2.0-5ubuntu1~20.04) ...", "Selecting previously unselected package libasan5:amd64.", "Preparing to unpack .../15-libasan5_9.3.0-17ubuntu1~20.04_amd64.deb ...", "Unpacking libasan5:amd64 (9.3.0-17ubuntu1~20.04) ...", "Selecting previously unselected package liblsan0:amd64.", "Preparing to unpack .../16-liblsan0_10.2.0-5ubuntu1~20.04_amd64.deb ...", "Unpacking liblsan0:amd64 (10.2.0-5ubuntu1~20.04) ...", "Selecting previously unselected package libtsan0:amd64.", "Preparing to unpack .../17-libtsan0_10.2.0-5ubuntu1~20.04_amd64.deb ...", "Unpacking libtsan0:amd64 (10.2.0-5ubuntu1~20.04) ...", "Selecting previously unselected package libubsan1:amd64.", "Preparing to unpack .../18-libubsan1_10.2.0-5ubuntu1~20.04_amd64.deb ...", "Unpacking libubsan1:amd64 (10.2.0-5ubuntu1~20.04) ...", "Selecting previously unselected package libquadmath0:amd64.", "Preparing to unpack .../19-libquadmath0_10.2.0-5ubuntu1~20.04_amd64.deb ...", "Unpacking libquadmath0:amd64 (10.2.0-5ubuntu1~20.04) ...", "Selecting previously unselected package libgcc-9-dev:amd64.", "Preparing to unpack .../20-libgcc-9-dev_9.3.0-17ubuntu1~20.04_amd64.deb ...", "Unpacking libgcc-9-dev:amd64 (9.3.0-17ubuntu1~20.04) ...", "Selecting previously unselected package gcc-9.", "Preparing to unpack .../21-gcc-9_9.3.0-17ubuntu1~20.04_amd64.deb ...", "Unpacking gcc-9 (9.3.0-17ubuntu1~20.04) ...", "Selecting previously unselected package gcc.", "Preparing to unpack .../22-gcc_4%3a9.3.0-1ubuntu2_amd64.deb ...", "Unpacking gcc (4:9.3.0-1ubuntu2) ...", "Selecting previously unselected package libstdc++-9-dev:amd64.", "Preparing to unpack .../23-libstdc++-9-dev_9.3.0-17ubuntu1~20.04_amd64.deb ...", "Unpacking libstdc++-9-dev:amd64 (9.3.0-17ubuntu1~20.04) ...", "Selecting previously unselected package g++-9.", "Preparing to unpack .../24-g++-9_9.3.0-17ubuntu1~20.04_amd64.deb ...", "Unpacking g++-9 (9.3.0-17ubuntu1~20.04) ...", "Selecting previously unselected package g++.", "Preparing to unpack .../25-g++_4%3a9.3.0-1ubuntu2_amd64.deb ...", "Unpacking g++ (4:9.3.0-1ubuntu2) ...", "Selecting previously unselected package make.", "Preparing to unpack .../26-make_4.2.1-1.2_amd64.deb ...", "Unpacking make (4.2.1-1.2) ...", "Selecting previously unselected package libdpkg-perl.", "Preparing to unpack .../27-libdpkg-perl_1.19.7ubuntu3_all.deb ...", "Unpacking libdpkg-perl (1.19.7ubuntu3) ...", "Selecting previously unselected package dpkg-dev.", "Preparing to unpack .../28-dpkg-dev_1.19.7ubuntu3_all.deb ...", "Unpacking dpkg-dev (1.19.7ubuntu3) ...", "Selecting previously unselected package build-essential.", "Preparing to unpack .../29-build-essential_12.8ubuntu1.1_amd64.deb ...", "Unpacking build-essential (12.8ubuntu1.1) ...", "Selecting previously unselected package libfakeroot:amd64.", "Preparing to unpack .../30-libfakeroot_1.24-1_amd64.deb ...", "Unpacking libfakeroot:amd64 (1.24-1) ...", "Selecting previously unselected package fakeroot.", "Preparing to unpack .../31-fakeroot_1.24-1_amd64.deb ...", "Unpacking fakeroot (1.24-1) ...", "Selecting previously unselected package libalgorithm-diff-perl.", "Preparing to unpack .../32-libalgorithm-diff-perl_1.19.03-2_all.deb ...", "Unpacking libalgorithm-diff-perl (1.19.03-2) ...", "Selecting previously unselected package libalgorithm-diff-xs-perl.", "Preparing to unpack .../33-libalgorithm-diff-xs-perl_0.04-6_amd64.deb ...", "Unpacking libalgorithm-diff-xs-perl (0.04-6) ...", "Selecting previously unselected package libalgorithm-merge-perl.", "Preparing to unpack .../34-libalgorithm-merge-perl_0.08-3_all.deb ...", "Unpacking libalgorithm-merge-perl (0.08-3) ...", "Selecting previously unselected package libfile-fcntllock-perl.", "Preparing to unpack .../35-libfile-fcntllock-perl_0.22-3build4_amd64.deb ...", "Unpacking libfile-fcntllock-perl (0.22-3build4) ...", "Selecting previously unselected package libpython3.8-dev:amd64.", "Preparing to unpack .../36-libpython3.8-dev_3.8.5-1~20.04.2_amd64.deb ...", "Unpacking libpython3.8-dev:amd64 (3.8.5-1~20.04.2) ...", "Selecting previously unselected package libpython3-dev:amd64.", "Preparing to unpack .../37-libpython3-dev_3.8.2-0ubuntu2_amd64.deb ...", "Unpacking libpython3-dev:amd64 (3.8.2-0ubuntu2) ...", "Selecting previously unselected package python-pip-whl.", "Preparing to unpack .../38-python-pip-whl_20.0.2-5ubuntu1.5_all.deb ...", "Unpacking python-pip-whl (20.0.2-5ubuntu1.5) ...", "Selecting previously unselected package zlib1g-dev:amd64.", "Preparing to unpack .../39-zlib1g-dev_1%3a1.2.11.dfsg-2ubuntu1.2_amd64.deb ...", "Unpacking zlib1g-dev:amd64 (1:1.2.11.dfsg-2ubuntu1.2) ...", "Selecting previously unselected package python3.8-dev.", "Preparing to unpack .../40-python3.8-dev_3.8.5-1~20.04.2_amd64.deb ...", "Unpacking python3.8-dev (3.8.5-1~20.04.2) ...", "Selecting previously unselected package python3-dev.", "Preparing to unpack .../41-python3-dev_3.8.2-0ubuntu2_amd64.deb ...", "Unpacking python3-dev (3.8.2-0ubuntu2) ...", "Selecting previously unselected package python3-wheel.", "Preparing to unpack .../42-python3-wheel_0.34.2-1_all.deb ...", "Unpacking python3-wheel (0.34.2-1) ...", "Selecting previously unselected package python3-pip.", "Preparing to unpack .../43-python3-pip_20.0.2-5ubuntu1.5_all.deb ...", "Unpacking python3-pip (20.0.2-5ubuntu1.5) ...", "Setting up libfile-fcntllock-perl (0.22-3build4) ...", "Setting up libalgorithm-diff-perl (1.19.03-2) ...", "Setting up binutils-common:amd64 (2.34-6ubuntu1.1) ...", "Setting up libctf-nobfd0:amd64 (2.34-6ubuntu1.1) ...", "Setting up libgomp1:amd64 (10.2.0-5ubuntu1~20.04) ...", "Setting up python3-wheel (0.34.2-1) ...", "Setting up libfakeroot:amd64 (1.24-1) ...", "Setting up fakeroot (1.24-1) ...", "update-alternatives: using /usr/bin/fakeroot-sysv to provide /usr/bin/fakeroot (fakeroot) in auto mode", "Setting up libpython3.8-dev:amd64 (3.8.5-1~20.04.2) ...", "Setting up make (4.2.1-1.2) ...", "Setting up libquadmath0:amd64 (10.2.0-5ubuntu1~20.04) ...", "Setting up libmpc3:amd64 (1.1.0-1) ...", "Setting up libatomic1:amd64 (10.2.0-5ubuntu1~20.04) ...", "Setting up libdpkg-perl (1.19.7ubuntu3) ...", "Setting up libubsan1:amd64 (10.2.0-5ubuntu1~20.04) ...", "Setting up zlib1g-dev:amd64 (1:1.2.11.dfsg-2ubuntu1.2) ...", "Setting up libisl22:amd64 (0.22.1-1) ...", "Setting up python-pip-whl (20.0.2-5ubuntu1.5) ...", "Setting up libbinutils:amd64 (2.34-6ubuntu1.1) ...", "Setting up libalgorithm-diff-xs-perl (0.04-6) ...", "Setting up libcc1-0:amd64 (10.2.0-5ubuntu1~20.04) ...", "Setting up liblsan0:amd64 (10.2.0-5ubuntu1~20.04) ...", "Setting up libitm1:amd64 (10.2.0-5ubuntu1~20.04) ...", "Setting up gcc-9-base:amd64 (9.3.0-17ubuntu1~20.04) ...", "Setting up libalgorithm-merge-perl (0.08-3) ...", "Setting up libtsan0:amd64 (10.2.0-5ubuntu1~20.04) ...", "Setting up libctf0:amd64 (2.34-6ubuntu1.1) ...", "Setting up libpython3-dev:amd64 (3.8.2-0ubuntu2) ...", "Setting up libasan5:amd64 (9.3.0-17ubuntu1~20.04) ...", "Setting up python3-pip (20.0.2-5ubuntu1.5) ...", "Setting up python3.8-dev (3.8.5-1~20.04.2) ...", "Setting up cpp-9 (9.3.0-17ubuntu1~20.04) ...", "Setting up binutils-x86-64-linux-gnu (2.34-6ubuntu1.1) ...", "Setting up binutils (2.34-6ubuntu1.1) ...", "Setting up dpkg-dev (1.19.7ubuntu3) ...", "Setting up libgcc-9-dev:amd64 (9.3.0-17ubuntu1~20.04) ...", "Setting up python3-dev (3.8.2-0ubuntu2) ...", "Setting up cpp (4:9.3.0-1ubuntu2) ...", "Setting up gcc-9 (9.3.0-17ubuntu1~20.04) ...", "Setting up libstdc++-9-dev:amd64 (9.3.0-17ubuntu1~20.04) ...", "Setting up gcc (4:9.3.0-1ubuntu2) ...", "Setting up g++-9 (9.3.0-17ubuntu1~20.04) ...", "Setting up g++ (4:9.3.0-1ubuntu2) ...", "update-alternatives: using /usr/bin/g++ to provide /usr/bin/c++ (c++) in auto mode", "Setting up build-essential (12.8ubuntu1.1) ...", "Processing triggers for man-db (2.9.1-1) ...", "Processing triggers for libc-bin (2.31-0ubuntu9) ..."]}
2021-05-20 10:50:06,080 p=2600660 u=lma n=ansible | TASK [app-test : install pip] ***************************************************************************************************************************************************************************************
2021-05-20 10:50:06,773 p=2600660 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": false, "msg": "Failed to find required executable easy_install in paths: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin"}
2021-05-20 10:50:06,775 p=2600660 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 10:50:06,775 p=2600660 u=lma n=ansible | app-test                   : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-20 10:52:45,495 p=2601409 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 10:52:45,501 p=2601409 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:52:45,502 p=2601409 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 10:52:45,662 p=2601409 u=lma n=ansible | [DEPRECATION WARNING]: Included file '/home/lma/work/new/ansible-test/playbooks/supervisor.yaml' not found, however since this include is not explicitly marked as 'static: yes', we will try and include it 
dynamically later. In the future, this will be an error unless 'static: no' is used on the include task. If you do not want missing includes to be considered dynamic, use 'static: yes' on the include or set the 
global ansible.cfg options to make all includes static for tasks and/or handlers. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in 
ansible.cfg.
2021-05-20 10:52:45,696 p=2601409 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 10:52:45,707 p=2601409 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 10:52:51,246 p=2601409 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:52:51,246 p=2601409 u=lma n=ansible | ok: [app-test]
2021-05-20 10:52:51,255 p=2601409 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 10:52:51,296 p=2601409 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 10:52:51,305 p=2601409 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 10:52:54,850 p=2601409 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497173, "cache_updated": true, "changed": false}
2021-05-20 10:52:54,858 p=2601409 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 10:52:54,893 p=2601409 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 10:52:54,902 p=2601409 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 10:52:56,796 p=2601409 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497173, "cache_updated": false, "changed": false}
2021-05-20 10:52:56,805 p=2601409 u=lma n=ansible | TASK [app-test : install virtualenv] ********************************************************************************************************************************************************************************
2021-05-20 10:52:56,839 p=2601502 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "pip" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: ['pip',
 'virtualenv']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:53:08,513 p=2601409 u=lma n=ansible | changed: [app-test] => (item=['pip', 'virtualenv']) => {"ansible_loop_var": "item", "changed": true, "cmd": ["/usr/bin/pip", "install", "--upgrade", "pip", "virtualenv"], "item": ["pip", "virtualenv"], "name": ["pip", "virtualenv"], "requirements": null, "state": "present", "stderr": "", "stderr_lines": [], "stdout": "Collecting pip\n  Downloading pip-21.1.1-py3-none-any.whl (1.5 MB)\nCollecting virtualenv\n  Downloading virtualenv-20.4.6-py2.py3-none-any.whl (7.2 MB)\nRequirement already satisfied, skipping upgrade: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)\nCollecting appdirs<2,>=1.4.3\n  Downloading appdirs-1.4.4-py2.py3-none-any.whl (9.6 kB)\nCollecting distlib<1,>=0.3.1\n  Downloading distlib-0.3.1-py2.py3-none-any.whl (335 kB)\nCollecting filelock<4,>=3.0.0\n  Downloading filelock-3.0.12-py3-none-any.whl (7.6 kB)\nInstalling collected packages: pip, appdirs, distlib, filelock, virtualenv\n  Attempting uninstall: pip\n    Found existing installation: pip 20.0.2\n    Not uninstalling pip at /usr/lib/python3/dist-packages, outside environment /usr\n    Can't uninstall 'pip'. No files were found to uninstall.\nSuccessfully installed appdirs-1.4.4 distlib-0.3.1 filelock-3.0.12 pip-21.1.1 virtualenv-20.4.6\n", "stdout_lines": ["Collecting pip", "  Downloading pip-21.1.1-py3-none-any.whl (1.5 MB)", "Collecting virtualenv", "  Downloading virtualenv-20.4.6-py2.py3-none-any.whl (7.2 MB)", "Requirement already satisfied, skipping upgrade: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)", "Collecting appdirs<2,>=1.4.3", "  Downloading appdirs-1.4.4-py2.py3-none-any.whl (9.6 kB)", "Collecting distlib<1,>=0.3.1", "  Downloading distlib-0.3.1-py2.py3-none-any.whl (335 kB)", "Collecting filelock<4,>=3.0.0", "  Downloading filelock-3.0.12-py3-none-any.whl (7.6 kB)", "Installing collected packages: pip, appdirs, distlib, filelock, virtualenv", "  Attempting uninstall: pip", "    Found existing installation: pip 20.0.2", "    Not uninstalling pip at /usr/lib/python3/dist-packages, outside environment /usr", "    Can't uninstall 'pip'. No files were found to uninstall.", "Successfully installed appdirs-1.4.4 distlib-0.3.1 filelock-3.0.12 pip-21.1.1 virtualenv-20.4.6"], "version": null, "virtualenv": null}
2021-05-20 10:53:08,522 p=2601409 u=lma n=ansible | TASK [app-test : include] *******************************************************************************************************************************************************************************************
2021-05-20 10:53:08,545 p=2601409 u=lma n=ansible | fatal: [app-test]: FAILED! => {"reason": "Could not find or access '/home/lma/work/new/ansible-test/playbooks/supervisor.yaml' on the Ansible Controller."}
2021-05-20 10:53:08,547 p=2601409 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 10:53:08,547 p=2601409 u=lma n=ansible | app-test                   : ok=6    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-20 10:55:07,922 p=2601894 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 10:55:07,929 p=2601894 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:55:07,929 p=2601894 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 10:55:08,123 p=2601894 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 10:55:08,134 p=2601894 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 10:55:11,524 p=2601894 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:55:11,524 p=2601894 u=lma n=ansible | ok: [app-test]
2021-05-20 10:55:11,536 p=2601894 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 10:55:11,572 p=2601894 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 10:55:11,582 p=2601894 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 10:55:14,684 p=2601894 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497313, "cache_updated": true, "changed": false}
2021-05-20 10:55:14,695 p=2601894 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 10:55:14,735 p=2601894 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 10:55:14,749 p=2601894 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 10:55:16,151 p=2601894 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497313, "cache_updated": false, "changed": false}
2021-05-20 10:55:16,160 p=2601894 u=lma n=ansible | TASK [app-test : install virtualenv] ********************************************************************************************************************************************************************************
2021-05-20 10:55:16,194 p=2601985 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "pip" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: ['pip',
 'virtualenv']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:55:19,562 p=2601894 u=lma n=ansible | ok: [app-test] => (item=['pip', 'virtualenv']) => {"ansible_loop_var": "item", "changed": false, "cmd": ["/usr/local/bin/pip", "install", "--upgrade", "pip", "virtualenv"], "item": ["pip", "virtualenv"], "name": ["pip", "virtualenv"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: pip in /usr/local/lib/python3.8/dist-packages (21.1.1)\nRequirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.4.6)\nRequirement already satisfied: filelock<4,>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)\nRequirement already satisfied: appdirs<2,>=1.4.3 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.4.4)\nRequirement already satisfied: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)\nRequirement already satisfied: distlib<1,>=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)\n", "stdout_lines": ["Requirement already satisfied: pip in /usr/local/lib/python3.8/dist-packages (21.1.1)", "Requirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.4.6)", "Requirement already satisfied: filelock<4,>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)", "Requirement already satisfied: appdirs<2,>=1.4.3 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.4.4)", "Requirement already satisfied: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)", "Requirement already satisfied: distlib<1,>=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)"], "version": null, "virtualenv": null}
2021-05-20 10:55:19,574 p=2601894 u=lma n=ansible | TASK [app-test : install supervisord] *******************************************************************************************************************************************************************************
2021-05-20 10:55:40,894 p=2601894 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621497313, "cache_updated": false, "changed": true, "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  supervisor-doc\nThe following NEW packages will be installed:\n  supervisor\n0 upgraded, 1 newly installed, 0 to remove and 117 not upgraded.\nNeed to get 281 kB of archives.\nAfter this operation, 1682 kB of additional disk space will be used.\nGet:1 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 supervisor all 4.1.0-1ubuntu1 [281 kB]\nFetched 281 kB in 0s (1252 kB/s)\nSelecting previously unselected package supervisor.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 83128 files and directories currently installed.)\r\nPreparing to unpack .../supervisor_4.1.0-1ubuntu1_all.deb ...\r\nUnpacking supervisor (4.1.0-1ubuntu1) ...\r\nSetting up supervisor (4.1.0-1ubuntu1) ...\r\nCreated symlink /etc/systemd/system/multi-user.target.wants/supervisor.service -> /lib/systemd/system/supervisor.service.\r\nProcessing triggers for man-db (2.9.1-1) ...\r\nProcessing triggers for systemd (245.4-4ubuntu3.2) ...\r\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "Suggested packages:", "  supervisor-doc", "The following NEW packages will be installed:", "  supervisor", "0 upgraded, 1 newly installed, 0 to remove and 117 not upgraded.", "Need to get 281 kB of archives.", "After this operation, 1682 kB of additional disk space will be used.", "Get:1 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 supervisor all 4.1.0-1ubuntu1 [281 kB]", "Fetched 281 kB in 0s (1252 kB/s)", "Selecting previously unselected package supervisor.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 83128 files and directories currently installed.)", "Preparing to unpack .../supervisor_4.1.0-1ubuntu1_all.deb ...", "Unpacking supervisor (4.1.0-1ubuntu1) ...", "Setting up supervisor (4.1.0-1ubuntu1) ...", "Created symlink /etc/systemd/system/multi-user.target.wants/supervisor.service -> /lib/systemd/system/supervisor.service.", "Processing triggers for man-db (2.9.1-1) ...", "Processing triggers for systemd (245.4-4ubuntu3.2) ..."]}
2021-05-20 10:55:40,903 p=2601894 u=lma n=ansible | TASK [app-test : set permissions on supervisor config and log directories] ******************************************************************************************************************************************
2021-05-20 10:55:41,441 p=2601894 u=lma n=ansible | changed: [app-test] => (item=/etc/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/supervisor", "mode": "0755", "owner": "root", "path": "/etc/supervisor", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:55:41,853 p=2601894 u=lma n=ansible | changed: [app-test] => (item=/etc/supervisor/conf.d) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/supervisor/conf.d", "mode": "0755", "owner": "root", "path": "/etc/supervisor/conf.d", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:55:42,209 p=2601894 u=lma n=ansible | changed: [app-test] => (item=/var/log/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/supervisor", "mode": "0755", "owner": "root", "path": "/var/log/supervisor", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:55:42,221 p=2601894 u=lma n=ansible | TASK [app-test : modify supervisor configuration] *******************************************************************************************************************************************************************
2021-05-20 10:55:42,764 p=2601894 u=lma n=ansible | changed: [app-test] => (item={'key': 'chmod', 'value': '0770'}) => {"ansible_loop_var": "item", "changed": true, "gid": 0, "group": "root", "item": {"key": "chmod", "value": "0770"}, "mode": "0644", "msg": "option changed", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1124, "state": "file", "uid": 0}
2021-05-20 10:55:43,129 p=2601894 u=lma n=ansible | changed: [app-test] => (item={'key': 'chown', 'value': 'root:www-data'}) => {"ansible_loop_var": "item", "changed": true, "gid": 0, "group": "root", "item": {"key": "chown", "value": "root:www-data"}, "mode": "0644", "msg": "option added", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 10:55:43,140 p=2601894 u=lma n=ansible | TASK [app-test : upload supervisor configuration to web server home] ************************************************************************************************************************************************
2021-05-20 10:55:43,250 p=2601894 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": false, "msg": "Could not find or access 'supervisor/app_supervisor.conf'\nSearched in:\n\t/home/lma/work/new/ansible-test/roles/app-test/templates/supervisor/app_supervisor.conf\n\t/home/lma/work/new/ansible-test/roles/app-test/supervisor/app_supervisor.conf\n\t/home/lma/work/new/ansible-test/roles/app-test/tasks/templates/supervisor/app_supervisor.conf\n\t/home/lma/work/new/ansible-test/roles/app-test/tasks/supervisor/app_supervisor.conf\n\t/home/lma/work/new/ansible-test/playbooks/templates/supervisor/app_supervisor.conf\n\t/home/lma/work/new/ansible-test/playbooks/supervisor/app_supervisor.conf on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2021-05-20 10:55:43,251 p=2601894 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 10:55:43,252 p=2601894 u=lma n=ansible | app-test                   : ok=9    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-20 10:57:37,453 p=2602539 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 10:57:37,460 p=2602539 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:57:37,460 p=2602539 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 10:57:37,654 p=2602539 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 10:57:37,665 p=2602539 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 10:57:42,148 p=2602539 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:57:42,148 p=2602539 u=lma n=ansible | ok: [app-test]
2021-05-20 10:57:42,156 p=2602539 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 10:57:42,192 p=2602539 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 10:57:42,203 p=2602539 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 10:57:45,815 p=2602539 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497464, "cache_updated": true, "changed": false}
2021-05-20 10:57:45,824 p=2602539 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 10:57:45,863 p=2602539 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 10:57:45,874 p=2602539 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-20 10:57:46,402 p=2602539 u=lma n=ansible | changed: [app-test] => {"changed": true, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:57:46,414 p=2602539 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-20 10:57:46,798 p=2602539 u=lma n=ansible | changed: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:57:47,218 p=2602539 u=lma n=ansible | changed: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:57:47,554 p=2602539 u=lma n=ansible | changed: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:57:47,945 p=2602539 u=lma n=ansible | changed: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:57:47,954 p=2602539 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-20 10:57:48,341 p=2602539 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-20 10:57:48,685 p=2602539 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-20 10:57:49,019 p=2602539 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-20 10:57:49,362 p=2602539 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-20 10:57:49,373 p=2602539 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-20 10:57:50,282 p=2602539 u=lma n=ansible | changed: [app-test] => {"append": true, "changed": true, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-20 10:57:50,290 p=2602539 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 10:57:51,708 p=2602539 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497464, "cache_updated": false, "changed": false}
2021-05-20 10:57:51,717 p=2602539 u=lma n=ansible | TASK [app-test : install virtualenv] ********************************************************************************************************************************************************************************
2021-05-20 10:57:51,753 p=2602795 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "pip" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: ['pip',
 'virtualenv']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:57:54,534 p=2602539 u=lma n=ansible | ok: [app-test] => (item=['pip', 'virtualenv']) => {"ansible_loop_var": "item", "changed": false, "cmd": ["/usr/local/bin/pip", "install", "--upgrade", "pip", "virtualenv"], "item": ["pip", "virtualenv"], "name": ["pip", "virtualenv"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: pip in /usr/local/lib/python3.8/dist-packages (21.1.1)\nRequirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.4.6)\nRequirement already satisfied: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)\nRequirement already satisfied: filelock<4,>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)\nRequirement already satisfied: distlib<1,>=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)\nRequirement already satisfied: appdirs<2,>=1.4.3 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.4.4)\n", "stdout_lines": ["Requirement already satisfied: pip in /usr/local/lib/python3.8/dist-packages (21.1.1)", "Requirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.4.6)", "Requirement already satisfied: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)", "Requirement already satisfied: filelock<4,>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)", "Requirement already satisfied: distlib<1,>=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)", "Requirement already satisfied: appdirs<2,>=1.4.3 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.4.4)"], "version": null, "virtualenv": null}
2021-05-20 10:57:54,545 p=2602539 u=lma n=ansible | TASK [app-test : install supervisord] *******************************************************************************************************************************************************************************
2021-05-20 10:57:55,997 p=2602539 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497464, "cache_updated": false, "changed": false}
2021-05-20 10:57:56,007 p=2602539 u=lma n=ansible | TASK [app-test : set permissions on supervisor config and log directories] ******************************************************************************************************************************************
2021-05-20 10:57:56,385 p=2602539 u=lma n=ansible | changed: [app-test] => (item=/etc/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/supervisor", "mode": "0755", "owner": "www-data", "path": "/etc/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:57:56,775 p=2602539 u=lma n=ansible | ok: [app-test] => (item=/etc/supervisor/conf.d) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/supervisor/conf.d", "mode": "0755", "owner": "root", "path": "/etc/supervisor/conf.d", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:57:57,120 p=2602539 u=lma n=ansible | changed: [app-test] => (item=/var/log/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/supervisor", "mode": "0755", "owner": "www-data", "path": "/var/log/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:57:57,131 p=2602539 u=lma n=ansible | TASK [app-test : modify supervisor configuration] *******************************************************************************************************************************************************************
2021-05-20 10:57:57,643 p=2602539 u=lma n=ansible | ok: [app-test] => (item={'key': 'chmod', 'value': '0770'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chmod", "value": "0770"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 10:57:57,978 p=2602539 u=lma n=ansible | ok: [app-test] => (item={'key': 'chown', 'value': 'root:www-data'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chown", "value": "root:www-data"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 10:57:57,989 p=2602539 u=lma n=ansible | TASK [app-test : upload supervisor configuration to web server home] ************************************************************************************************************************************************
2021-05-20 10:57:58,100 p=2602539 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": false, "msg": "Could not find or access 'supervisor/app_supervisor.conf'\nSearched in:\n\t/home/lma/work/new/ansible-test/roles/app-test/templates/supervisor/app_supervisor.conf\n\t/home/lma/work/new/ansible-test/roles/app-test/supervisor/app_supervisor.conf\n\t/home/lma/work/new/ansible-test/roles/app-test/tasks/templates/supervisor/app_supervisor.conf\n\t/home/lma/work/new/ansible-test/roles/app-test/tasks/supervisor/app_supervisor.conf\n\t/home/lma/work/new/ansible-test/playbooks/templates/supervisor/app_supervisor.conf\n\t/home/lma/work/new/ansible-test/playbooks/supervisor/app_supervisor.conf on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2021-05-20 10:57:58,102 p=2602539 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 10:57:58,102 p=2602539 u=lma n=ansible | app-test                   : ok=13   changed=5    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-20 10:58:34,006 p=2603030 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 10:58:34,013 p=2603030 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:58:34,013 p=2603030 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 10:58:34,215 p=2603030 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 10:58:34,227 p=2603030 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 10:58:35,893 p=2603030 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:58:35,893 p=2603030 u=lma n=ansible | ok: [app-test]
2021-05-20 10:58:35,901 p=2603030 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 10:58:35,936 p=2603030 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 10:58:35,943 p=2603030 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 10:58:39,070 p=2603030 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497517, "cache_updated": true, "changed": false}
2021-05-20 10:58:39,078 p=2603030 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 10:58:39,119 p=2603030 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 10:58:39,129 p=2603030 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-20 10:58:39,604 p=2603030 u=lma n=ansible | ok: [app-test] => {"changed": false, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:58:39,613 p=2603030 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-20 10:58:39,994 p=2603030 u=lma n=ansible | ok: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:58:40,350 p=2603030 u=lma n=ansible | ok: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:58:40,694 p=2603030 u=lma n=ansible | ok: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:58:41,046 p=2603030 u=lma n=ansible | ok: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:58:41,059 p=2603030 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-20 10:58:41,478 p=2603030 u=lma n=ansible | ok: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-20 10:58:41,824 p=2603030 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-20 10:58:42,177 p=2603030 u=lma n=ansible | ok: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-20 10:58:42,510 p=2603030 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-20 10:58:42,523 p=2603030 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-20 10:58:43,116 p=2603030 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-20 10:58:43,126 p=2603030 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 10:58:44,612 p=2603030 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497517, "cache_updated": false, "changed": false}
2021-05-20 10:58:44,621 p=2603030 u=lma n=ansible | TASK [app-test : install virtualenv] ********************************************************************************************************************************************************************************
2021-05-20 10:58:44,656 p=2603264 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "pip" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: ['pip',
 'virtualenv']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 10:58:46,901 p=2603030 u=lma n=ansible | ok: [app-test] => (item=['pip', 'virtualenv']) => {"ansible_loop_var": "item", "changed": false, "cmd": ["/usr/local/bin/pip", "install", "--upgrade", "pip", "virtualenv"], "item": ["pip", "virtualenv"], "name": ["pip", "virtualenv"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: pip in /usr/local/lib/python3.8/dist-packages (21.1.1)\nRequirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.4.6)\nRequirement already satisfied: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)\nRequirement already satisfied: distlib<1,>=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)\nRequirement already satisfied: appdirs<2,>=1.4.3 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.4.4)\nRequirement already satisfied: filelock<4,>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)\n", "stdout_lines": ["Requirement already satisfied: pip in /usr/local/lib/python3.8/dist-packages (21.1.1)", "Requirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.4.6)", "Requirement already satisfied: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)", "Requirement already satisfied: distlib<1,>=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)", "Requirement already satisfied: appdirs<2,>=1.4.3 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.4.4)", "Requirement already satisfied: filelock<4,>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)"], "version": null, "virtualenv": null}
2021-05-20 10:58:46,914 p=2603030 u=lma n=ansible | TASK [app-test : install supervisord] *******************************************************************************************************************************************************************************
2021-05-20 10:58:48,372 p=2603030 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497517, "cache_updated": false, "changed": false}
2021-05-20 10:58:48,382 p=2603030 u=lma n=ansible | TASK [app-test : set permissions on supervisor config and log directories] ******************************************************************************************************************************************
2021-05-20 10:58:48,758 p=2603030 u=lma n=ansible | changed: [app-test] => (item=/etc/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/supervisor", "mode": "0755", "owner": "www-data", "path": "/etc/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:58:49,117 p=2603030 u=lma n=ansible | ok: [app-test] => (item=/etc/supervisor/conf.d) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/supervisor/conf.d", "mode": "0755", "owner": "root", "path": "/etc/supervisor/conf.d", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 10:58:49,462 p=2603030 u=lma n=ansible | changed: [app-test] => (item=/var/log/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/supervisor", "mode": "0755", "owner": "www-data", "path": "/var/log/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 10:58:49,472 p=2603030 u=lma n=ansible | TASK [app-test : modify supervisor configuration] *******************************************************************************************************************************************************************
2021-05-20 10:58:49,999 p=2603030 u=lma n=ansible | ok: [app-test] => (item={'key': 'chmod', 'value': '0770'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chmod", "value": "0770"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 10:58:50,364 p=2603030 u=lma n=ansible | ok: [app-test] => (item={'key': 'chown', 'value': 'root:www-data'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chown", "value": "root:www-data"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 10:58:50,375 p=2603030 u=lma n=ansible | TASK [app-test : upload supervisor configuration to web server home] ************************************************************************************************************************************************
2021-05-20 10:58:51,293 p=2603030 u=lma n=ansible | changed: [app-test] => {"changed": true, "checksum": "627125896a6a94d33436c4b9a6c5f9cc05783ce1", "dest": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "gid": 0, "group": "root", "md5sum": "13b0fc1c786e3f706a6e5387eb66f847", "mode": "0644", "owner": "root", "size": 431, "src": "/home/deployer/.ansible/tmp/ansible-tmp-1621497530.4088852-168547256782465/source", "state": "file", "uid": 0}
2021-05-20 10:58:51,301 p=2603030 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-20 10:58:51,669 p=2603030 u=lma n=ansible | fatal: [app-test]: FAILED! => {"msg": "Failed to get information on remote file (/var/www/app-test/python-sample-app_webapp/python-sample-app/README.md): Permission denied"}
2021-05-20 10:58:51,670 p=2603030 u=lma n=ansible | RUNNING HANDLER [app-test : start supervisord] **********************************************************************************************************************************************************************
2021-05-20 10:58:51,672 p=2603030 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 10:58:51,672 p=2603030 u=lma n=ansible | app-test                   : ok=14   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-20 11:01:19,023 p=2603888 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 11:01:19,030 p=2603888 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:01:19,031 p=2603888 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 11:01:19,238 p=2603888 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 11:01:19,251 p=2603888 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 11:01:22,034 p=2603888 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:01:22,035 p=2603888 u=lma n=ansible | ok: [app-test]
2021-05-20 11:01:22,044 p=2603888 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 11:01:22,077 p=2603888 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 11:01:22,088 p=2603888 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 11:01:25,445 p=2603888 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497684, "cache_updated": true, "changed": false}
2021-05-20 11:01:25,456 p=2603888 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 11:01:25,493 p=2603888 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 11:01:25,504 p=2603888 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-20 11:01:25,978 p=2603888 u=lma n=ansible | ok: [app-test] => {"changed": false, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:01:25,988 p=2603888 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-20 11:01:26,372 p=2603888 u=lma n=ansible | ok: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:01:26,700 p=2603888 u=lma n=ansible | ok: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:01:27,032 p=2603888 u=lma n=ansible | ok: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:01:27,382 p=2603888 u=lma n=ansible | ok: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:01:27,391 p=2603888 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-20 11:01:27,769 p=2603888 u=lma n=ansible | ok: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-20 11:01:28,122 p=2603888 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-20 11:01:28,480 p=2603888 u=lma n=ansible | ok: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-20 11:01:28,819 p=2603888 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-20 11:01:28,828 p=2603888 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-20 11:01:29,396 p=2603888 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-20 11:01:29,404 p=2603888 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-20 11:01:30,270 p=2603888 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": false, "checksum": "8398b9e989261c79814391a7a9fe1a5eb6f0d4c8", "gid": 1001, "group": "deployer", "mode": "0775", "msg": "chown failed: [Errno 1] Operation not permitted: '/var/www/app-test/python-sample-app_webapp'", "owner": "deployer", "path": "/var/www/app-test/python-sample-app_webapp", "size": 4096, "state": "directory", "uid": 1001}
2021-05-20 11:01:30,272 p=2603888 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 11:01:30,272 p=2603888 u=lma n=ansible | app-test                   : ok=8    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-20 11:02:07,875 p=2604243 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 11:02:07,881 p=2604243 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:02:07,881 p=2604243 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 11:02:08,078 p=2604243 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 11:02:08,090 p=2604243 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 11:02:09,620 p=2604243 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:02:09,620 p=2604243 u=lma n=ansible | ok: [app-test]
2021-05-20 11:02:09,628 p=2604243 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 11:02:09,663 p=2604243 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 11:02:09,677 p=2604243 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 11:02:12,891 p=2604243 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497731, "cache_updated": true, "changed": false}
2021-05-20 11:02:12,899 p=2604243 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 11:02:12,944 p=2604243 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 11:02:12,953 p=2604243 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-20 11:02:13,479 p=2604243 u=lma n=ansible | ok: [app-test] => {"changed": false, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:02:13,489 p=2604243 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-20 11:02:13,860 p=2604243 u=lma n=ansible | ok: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:02:14,202 p=2604243 u=lma n=ansible | ok: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:02:14,530 p=2604243 u=lma n=ansible | ok: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:02:14,889 p=2604243 u=lma n=ansible | ok: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:02:14,898 p=2604243 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-20 11:02:15,264 p=2604243 u=lma n=ansible | ok: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-20 11:02:15,612 p=2604243 u=lma n=ansible | ok: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-20 11:02:16,009 p=2604243 u=lma n=ansible | ok: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-20 11:02:16,345 p=2604243 u=lma n=ansible | ok: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-20 11:02:16,356 p=2604243 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-20 11:02:16,936 p=2604243 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-20 11:02:16,949 p=2604243 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-20 11:02:26,922 p=2604243 u=lma n=ansible | changed: [app-test] => {"changed": true, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-20 11:02:26,932 p=2604243 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 11:02:28,333 p=2604243 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497731, "cache_updated": false, "changed": false}
2021-05-20 11:02:28,342 p=2604243 u=lma n=ansible | TASK [app-test : install virtualenv] ********************************************************************************************************************************************************************************
2021-05-20 11:02:28,377 p=2604825 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "pip" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: ['pip',
 'virtualenv']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:02:30,988 p=2604243 u=lma n=ansible | ok: [app-test] => (item=['pip', 'virtualenv']) => {"ansible_loop_var": "item", "changed": false, "cmd": ["/usr/local/bin/pip", "install", "--upgrade", "pip", "virtualenv"], "item": ["pip", "virtualenv"], "name": ["pip", "virtualenv"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: pip in /usr/local/lib/python3.8/dist-packages (21.1.1)\nRequirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.4.6)\nRequirement already satisfied: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)\nRequirement already satisfied: filelock<4,>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)\nRequirement already satisfied: appdirs<2,>=1.4.3 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.4.4)\nRequirement already satisfied: distlib<1,>=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)\n", "stdout_lines": ["Requirement already satisfied: pip in /usr/local/lib/python3.8/dist-packages (21.1.1)", "Requirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.4.6)", "Requirement already satisfied: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)", "Requirement already satisfied: filelock<4,>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)", "Requirement already satisfied: appdirs<2,>=1.4.3 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.4.4)", "Requirement already satisfied: distlib<1,>=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)"], "version": null, "virtualenv": null}
2021-05-20 11:02:30,998 p=2604243 u=lma n=ansible | TASK [app-test : install supervisord] *******************************************************************************************************************************************************************************
2021-05-20 11:02:32,376 p=2604243 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497731, "cache_updated": false, "changed": false}
2021-05-20 11:02:32,390 p=2604243 u=lma n=ansible | TASK [app-test : set permissions on supervisor config and log directories] ******************************************************************************************************************************************
2021-05-20 11:02:32,788 p=2604243 u=lma n=ansible | changed: [app-test] => (item=/etc/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/supervisor", "mode": "0755", "owner": "www-data", "path": "/etc/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:02:33,132 p=2604243 u=lma n=ansible | ok: [app-test] => (item=/etc/supervisor/conf.d) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/supervisor/conf.d", "mode": "0755", "owner": "root", "path": "/etc/supervisor/conf.d", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 11:02:33,464 p=2604243 u=lma n=ansible | changed: [app-test] => (item=/var/log/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/supervisor", "mode": "0755", "owner": "www-data", "path": "/var/log/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:02:33,476 p=2604243 u=lma n=ansible | TASK [app-test : modify supervisor configuration] *******************************************************************************************************************************************************************
2021-05-20 11:02:33,957 p=2604243 u=lma n=ansible | ok: [app-test] => (item={'key': 'chmod', 'value': '0770'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chmod", "value": "0770"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 11:02:34,294 p=2604243 u=lma n=ansible | ok: [app-test] => (item={'key': 'chown', 'value': 'root:www-data'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chown", "value": "root:www-data"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 11:02:34,303 p=2604243 u=lma n=ansible | TASK [app-test : upload supervisor configuration to web server home] ************************************************************************************************************************************************
2021-05-20 11:02:35,028 p=2604243 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "627125896a6a94d33436c4b9a6c5f9cc05783ce1", "dest": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "size": 431, "state": "file", "uid": 0}
2021-05-20 11:02:35,038 p=2604243 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-20 11:02:40,257 p=2604243 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-20 11:02:40,259 p=2604243 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 11:02:40,259 p=2604243 u=lma n=ansible | app-test                   : ok=16   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-20 11:03:08,960 p=2605210 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 11:03:08,966 p=2605210 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:03:08,966 p=2605210 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 11:03:09,178 p=2605210 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 11:03:09,190 p=2605210 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 11:03:10,679 p=2605210 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:03:10,680 p=2605210 u=lma n=ansible | ok: [app-test]
2021-05-20 11:03:10,691 p=2605210 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 11:03:10,727 p=2605210 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 11:03:10,736 p=2605210 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 11:03:13,774 p=2605210 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497792, "cache_updated": true, "changed": false}
2021-05-20 11:03:13,784 p=2605210 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 11:03:13,819 p=2605210 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 11:03:13,831 p=2605210 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-20 11:03:14,316 p=2605210 u=lma n=ansible | ok: [app-test] => {"changed": false, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:03:14,328 p=2605210 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-20 11:03:14,696 p=2605210 u=lma n=ansible | ok: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:03:15,057 p=2605210 u=lma n=ansible | ok: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:03:15,396 p=2605210 u=lma n=ansible | ok: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:03:15,797 p=2605210 u=lma n=ansible | ok: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:03:15,806 p=2605210 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-20 11:03:16,182 p=2605210 u=lma n=ansible | ok: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-20 11:03:16,539 p=2605210 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-20 11:03:16,874 p=2605210 u=lma n=ansible | ok: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-20 11:03:17,241 p=2605210 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-20 11:03:17,251 p=2605210 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-20 11:03:17,824 p=2605210 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-20 11:03:17,837 p=2605210 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-20 11:03:27,845 p=2605210 u=lma n=ansible | changed: [app-test] => {"changed": true, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-20 11:03:27,854 p=2605210 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 11:03:29,233 p=2605210 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497792, "cache_updated": false, "changed": false}
2021-05-20 11:03:29,243 p=2605210 u=lma n=ansible | TASK [app-test : install virtualenv] ********************************************************************************************************************************************************************************
2021-05-20 11:03:29,278 p=2605792 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "pip" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: ['pip',
 'virtualenv']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:03:31,850 p=2605210 u=lma n=ansible | ok: [app-test] => (item=['pip', 'virtualenv']) => {"ansible_loop_var": "item", "changed": false, "cmd": ["/usr/local/bin/pip", "install", "--upgrade", "pip", "virtualenv"], "item": ["pip", "virtualenv"], "name": ["pip", "virtualenv"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: pip in /usr/local/lib/python3.8/dist-packages (21.1.1)\nRequirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.4.6)\nRequirement already satisfied: appdirs<2,>=1.4.3 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.4.4)\nRequirement already satisfied: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)\nRequirement already satisfied: distlib<1,>=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)\nRequirement already satisfied: filelock<4,>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)\n", "stdout_lines": ["Requirement already satisfied: pip in /usr/local/lib/python3.8/dist-packages (21.1.1)", "Requirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.4.6)", "Requirement already satisfied: appdirs<2,>=1.4.3 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.4.4)", "Requirement already satisfied: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)", "Requirement already satisfied: distlib<1,>=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)", "Requirement already satisfied: filelock<4,>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)"], "version": null, "virtualenv": null}
2021-05-20 11:03:31,862 p=2605210 u=lma n=ansible | TASK [app-test : install supervisord] *******************************************************************************************************************************************************************************
2021-05-20 11:03:33,380 p=2605210 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497792, "cache_updated": false, "changed": false}
2021-05-20 11:03:33,394 p=2605210 u=lma n=ansible | TASK [app-test : set permissions on supervisor config and log directories] ******************************************************************************************************************************************
2021-05-20 11:03:33,775 p=2605210 u=lma n=ansible | changed: [app-test] => (item=/etc/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/supervisor", "mode": "0755", "owner": "www-data", "path": "/etc/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:03:34,113 p=2605210 u=lma n=ansible | ok: [app-test] => (item=/etc/supervisor/conf.d) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/supervisor/conf.d", "mode": "0755", "owner": "root", "path": "/etc/supervisor/conf.d", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 11:03:34,451 p=2605210 u=lma n=ansible | changed: [app-test] => (item=/var/log/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/supervisor", "mode": "0755", "owner": "www-data", "path": "/var/log/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:03:34,459 p=2605210 u=lma n=ansible | TASK [app-test : modify supervisor configuration] *******************************************************************************************************************************************************************
2021-05-20 11:03:34,928 p=2605210 u=lma n=ansible | ok: [app-test] => (item={'key': 'chmod', 'value': '0770'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chmod", "value": "0770"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 11:03:35,261 p=2605210 u=lma n=ansible | ok: [app-test] => (item={'key': 'chown', 'value': 'root:www-data'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chown", "value": "root:www-data"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 11:03:35,274 p=2605210 u=lma n=ansible | TASK [app-test : upload supervisor configuration to web server home] ************************************************************************************************************************************************
2021-05-20 11:03:35,993 p=2605210 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "627125896a6a94d33436c4b9a6c5f9cc05783ce1", "dest": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "size": 431, "state": "file", "uid": 0}
2021-05-20 11:03:36,003 p=2605210 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-20 11:03:41,592 p=2605210 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-20 11:03:41,595 p=2605210 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 11:03:41,595 p=2605210 u=lma n=ansible | app-test                   : ok=16   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-20 11:04:08,025 p=2606167 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 11:04:08,032 p=2606167 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:04:08,032 p=2606167 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 11:04:08,229 p=2606167 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 11:04:08,242 p=2606167 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 11:04:09,759 p=2606167 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:04:09,760 p=2606167 u=lma n=ansible | ok: [app-test]
2021-05-20 11:04:09,770 p=2606167 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 11:04:09,807 p=2606167 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 11:04:09,819 p=2606167 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 11:04:12,931 p=2606167 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497851, "cache_updated": true, "changed": false}
2021-05-20 11:04:12,939 p=2606167 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 11:04:12,978 p=2606167 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 11:04:12,989 p=2606167 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-20 11:04:13,468 p=2606167 u=lma n=ansible | ok: [app-test] => {"changed": false, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:04:13,476 p=2606167 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-20 11:04:13,871 p=2606167 u=lma n=ansible | ok: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:04:14,293 p=2606167 u=lma n=ansible | ok: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:04:14,628 p=2606167 u=lma n=ansible | ok: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:04:14,992 p=2606167 u=lma n=ansible | ok: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:04:15,003 p=2606167 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-20 11:04:15,451 p=2606167 u=lma n=ansible | ok: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-20 11:04:15,855 p=2606167 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-20 11:04:16,283 p=2606167 u=lma n=ansible | ok: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-20 11:04:16,611 p=2606167 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-20 11:04:16,623 p=2606167 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-20 11:04:17,213 p=2606167 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-20 11:04:17,223 p=2606167 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-20 11:04:22,561 p=2606167 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-20 11:04:22,570 p=2606167 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 11:04:23,948 p=2606167 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497851, "cache_updated": false, "changed": false}
2021-05-20 11:04:23,959 p=2606167 u=lma n=ansible | TASK [app-test : install virtualenv] ********************************************************************************************************************************************************************************
2021-05-20 11:04:23,991 p=2606559 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "pip" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: ['pip',
 'virtualenv']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:04:26,531 p=2606167 u=lma n=ansible | ok: [app-test] => (item=['pip', 'virtualenv']) => {"ansible_loop_var": "item", "changed": false, "cmd": ["/usr/local/bin/pip", "install", "--upgrade", "pip", "virtualenv"], "item": ["pip", "virtualenv"], "name": ["pip", "virtualenv"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: pip in /usr/local/lib/python3.8/dist-packages (21.1.1)\nRequirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.4.6)\nRequirement already satisfied: distlib<1,>=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)\nRequirement already satisfied: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)\nRequirement already satisfied: filelock<4,>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)\nRequirement already satisfied: appdirs<2,>=1.4.3 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.4.4)\n", "stdout_lines": ["Requirement already satisfied: pip in /usr/local/lib/python3.8/dist-packages (21.1.1)", "Requirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.4.6)", "Requirement already satisfied: distlib<1,>=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)", "Requirement already satisfied: six<2,>=1.9.0 in /usr/lib/python3/dist-packages (from virtualenv) (1.14.0)", "Requirement already satisfied: filelock<4,>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)", "Requirement already satisfied: appdirs<2,>=1.4.3 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.4.4)"], "version": null, "virtualenv": null}
2021-05-20 11:04:26,540 p=2606167 u=lma n=ansible | TASK [app-test : install build utilities] ***************************************************************************************************************************************************************************
2021-05-20 11:04:28,123 p=2606167 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497851, "cache_updated": false, "changed": false}
2021-05-20 11:04:28,133 p=2606167 u=lma n=ansible | TASK [app-test : install python-dev package] ************************************************************************************************************************************************************************
2021-05-20 11:04:29,616 p=2606167 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497851, "cache_updated": false, "changed": false}
2021-05-20 11:04:29,625 p=2606167 u=lma n=ansible | TASK [app-test : install uwsgi server] ******************************************************************************************************************************************************************************
2021-05-20 11:05:35,005 p=2606167 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": ["/var/www/app-test/virtualenvs/uwsgi/bin/pip", "install", "uwsgi==2.0.15"], "name": ["uwsgi"], "requirements": null, "state": "present", "stderr": "", "stderr_lines": [], "stdout": "created virtual environment CPython3.8.5.final.0-64 in 1338ms\n  creator CPython3Posix(dest=/var/www/app-test/virtualenvs/uwsgi, clear=False, no_vcs_ignore=False, global=False)\n  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)\n    added seed packages: pip==21.1.1, setuptools==56.0.0, wheel==0.36.2\n  activators BashActivator,CShellActivator,FishActivator,PowerShellActivator,PythonActivator,XonshActivator\nCollecting uwsgi==2.0.15\n  Downloading uwsgi-2.0.15.tar.gz (795 kB)\nBuilding wheels for collected packages: uwsgi\n  Building wheel for uwsgi (setup.py): started\n  Building wheel for uwsgi (setup.py): finished with status 'done'\n  Created wheel for uwsgi: filename=uWSGI-2.0.15-cp38-cp38-linux_x86_64.whl size=509073 sha256=c12a5affdc05f9ec6b95885d6b64e3d98fb6f14e3c83cbc1c5fa11920087db10\n  Stored in directory: /root/.cache/pip/wheels/3d/50/c8/d47e708a89383afd49f33ee0cfca707ecbb60a0432a569c019\nSuccessfully built uwsgi\nInstalling collected packages: uwsgi\nSuccessfully installed uwsgi-2.0.15\n", "stdout_lines": ["created virtual environment CPython3.8.5.final.0-64 in 1338ms", "  creator CPython3Posix(dest=/var/www/app-test/virtualenvs/uwsgi, clear=False, no_vcs_ignore=False, global=False)", "  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)", "    added seed packages: pip==21.1.1, setuptools==56.0.0, wheel==0.36.2", "  activators BashActivator,CShellActivator,FishActivator,PowerShellActivator,PythonActivator,XonshActivator", "Collecting uwsgi==2.0.15", "  Downloading uwsgi-2.0.15.tar.gz (795 kB)", "Building wheels for collected packages: uwsgi", "  Building wheel for uwsgi (setup.py): started", "  Building wheel for uwsgi (setup.py): finished with status 'done'", "  Created wheel for uwsgi: filename=uWSGI-2.0.15-cp38-cp38-linux_x86_64.whl size=509073 sha256=c12a5affdc05f9ec6b95885d6b64e3d98fb6f14e3c83cbc1c5fa11920087db10", "  Stored in directory: /root/.cache/pip/wheels/3d/50/c8/d47e708a89383afd49f33ee0cfca707ecbb60a0432a569c019", "Successfully built uwsgi", "Installing collected packages: uwsgi", "Successfully installed uwsgi-2.0.15"], "version": "2.0.15", "virtualenv": "/var/www/app-test/virtualenvs/uwsgi"}
2021-05-20 11:05:35,014 p=2606167 u=lma n=ansible | TASK [app-test : configure app on uwsgi server] *********************************************************************************************************************************************************************
2021-05-20 11:05:36,264 p=2606167 u=lma n=ansible | changed: [app-test] => {"changed": true, "checksum": "fdd3ff6a3f42e0648d8f896353be903dc1626ab2", "dest": "/var/www/app-test/config/uwsgi/python-sample-app_uwsgi.ini", "gid": 0, "group": "root", "md5sum": "838c94c9c3d9867a98684ef69772c192", "mode": "0644", "owner": "root", "size": 194, "src": "/home/deployer/.ansible/tmp/ansible-tmp-1621497935.0499895-56017833992058/source", "state": "file", "uid": 0}
2021-05-20 11:05:36,276 p=2606167 u=lma n=ansible | TASK [app-test : install supervisord] *******************************************************************************************************************************************************************************
2021-05-20 11:05:37,757 p=2606167 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621497851, "cache_updated": false, "changed": false}
2021-05-20 11:05:37,766 p=2606167 u=lma n=ansible | TASK [app-test : set permissions on supervisor config and log directories] ******************************************************************************************************************************************
2021-05-20 11:05:38,140 p=2606167 u=lma n=ansible | changed: [app-test] => (item=/etc/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/supervisor", "mode": "0755", "owner": "www-data", "path": "/etc/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:05:38,487 p=2606167 u=lma n=ansible | ok: [app-test] => (item=/etc/supervisor/conf.d) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/supervisor/conf.d", "mode": "0755", "owner": "root", "path": "/etc/supervisor/conf.d", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 11:05:38,825 p=2606167 u=lma n=ansible | changed: [app-test] => (item=/var/log/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/supervisor", "mode": "0755", "owner": "www-data", "path": "/var/log/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:05:38,836 p=2606167 u=lma n=ansible | TASK [app-test : modify supervisor configuration] *******************************************************************************************************************************************************************
2021-05-20 11:05:39,342 p=2606167 u=lma n=ansible | ok: [app-test] => (item={'key': 'chmod', 'value': '0770'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chmod", "value": "0770"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 11:05:39,676 p=2606167 u=lma n=ansible | ok: [app-test] => (item={'key': 'chown', 'value': 'root:www-data'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chown", "value": "root:www-data"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 11:05:39,687 p=2606167 u=lma n=ansible | TASK [app-test : upload supervisor configuration to web server home] ************************************************************************************************************************************************
2021-05-20 11:05:40,451 p=2606167 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "627125896a6a94d33436c4b9a6c5f9cc05783ce1", "dest": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "size": 431, "state": "file", "uid": 0}
2021-05-20 11:05:40,462 p=2606167 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-20 11:05:45,719 p=2606167 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-20 11:05:45,721 p=2606167 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 11:05:45,722 p=2606167 u=lma n=ansible | app-test                   : ok=20   changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-20 11:20:30,330 p=2609848 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 11:20:30,337 p=2609848 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:20:30,337 p=2609848 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 11:20:30,502 p=2609848 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  did not find expected key

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/python.yml': line 23, column 5, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    extra_args: "-- upgrade"
    - pip
    ^ here

2021-05-20 11:20:42,699 p=2609899 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 11:20:42,706 p=2609899 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:20:42,706 p=2609899 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 11:20:42,866 p=2609899 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  did not find expected key

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/python.yml': line 23, column 5, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    extra_args: '-- upgrade'
    - pip
    ^ here

2021-05-20 11:21:23,496 p=2610007 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 11:21:23,503 p=2610007 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:21:23,503 p=2610007 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 11:21:23,675 p=2610007 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  did not find expected '-' indicator

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/python.yml': line 24, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

#     virtualenv_python: python3.4
      requirements: "{{ app_root_path }}/requirements.txt"
      ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2021-05-20 11:21:56,617 p=2610120 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 11:21:56,624 p=2610120 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:21:56,624 p=2610120 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 11:21:56,782 p=2610120 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/python.yml': line 23, column 21, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    - virtualenv; "{{ virtualenv_dir }}"
        requirements: "{{ app_root_path }}/requirements.txt"
                    ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2021-05-20 11:22:59,144 p=2610300 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 11:22:59,151 p=2610300 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:22:59,151 p=2610300 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 11:22:59,326 p=2610300 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/python.yml': line 21, column 20, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

  pip: virtualenv; "{{ virtualenv_dir }}"
       requirements: "{{ app_root_path }}/requirements.txt"
                   ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2021-05-20 11:23:34,381 p=2610395 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 11:23:34,387 p=2610395 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:23:34,387 p=2610395 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 11:23:34,593 p=2610395 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 11:23:34,607 p=2610395 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 11:23:38,815 p=2610395 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:23:38,815 p=2610395 u=lma n=ansible | ok: [app-test]
2021-05-20 11:23:38,825 p=2610395 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 11:23:38,862 p=2610395 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 11:23:38,869 p=2610395 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 11:23:47,642 p=2610395 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621499021, "cache_updated": true, "changed": false}
2021-05-20 11:23:47,654 p=2610395 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 11:23:47,692 p=2610395 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 11:23:47,703 p=2610395 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-20 11:23:48,237 p=2610395 u=lma n=ansible | ok: [app-test] => {"changed": false, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:23:48,246 p=2610395 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-20 11:23:48,638 p=2610395 u=lma n=ansible | ok: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:23:49,017 p=2610395 u=lma n=ansible | ok: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:23:49,402 p=2610395 u=lma n=ansible | ok: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:23:49,775 p=2610395 u=lma n=ansible | ok: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:23:49,788 p=2610395 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-20 11:23:50,384 p=2610395 u=lma n=ansible | ok: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-20 11:23:50,728 p=2610395 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-20 11:23:51,138 p=2610395 u=lma n=ansible | ok: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-20 11:23:51,493 p=2610395 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-20 11:23:51,502 p=2610395 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-20 11:23:52,118 p=2610395 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-20 11:23:52,130 p=2610395 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-20 11:23:57,664 p=2610395 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-20 11:23:57,673 p=2610395 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 11:23:59,064 p=2610395 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621499021, "cache_updated": false, "changed": false}
2021-05-20 11:23:59,076 p=2610395 u=lma n=ansible | TASK [app-test : Initiate virtualenv] *******************************************************************************************************************************************************************************
2021-05-20 11:23:59,111 p=2610395 u=lma n=ansible | fatal: [app-test]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'virtualenv_dir' is undefined\n\nThe error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/python.yml': line 19, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Initiate virtualenv\n  ^ here\n"}
2021-05-20 11:23:59,112 p=2610395 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 11:23:59,112 p=2610395 u=lma n=ansible | app-test                   : ok=10   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-20 11:25:21,599 p=2611061 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 11:25:21,605 p=2611061 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:25:21,605 p=2611061 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 11:25:21,803 p=2611061 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 11:25:21,816 p=2611061 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 11:25:24,693 p=2611061 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:25:24,693 p=2611061 u=lma n=ansible | ok: [app-test]
2021-05-20 11:25:24,706 p=2611061 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 11:25:24,745 p=2611061 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 11:25:24,754 p=2611061 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 11:25:27,895 p=2611061 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621499126, "cache_updated": true, "changed": false}
2021-05-20 11:25:27,906 p=2611061 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 11:25:27,946 p=2611061 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 11:25:27,958 p=2611061 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-20 11:25:28,524 p=2611061 u=lma n=ansible | ok: [app-test] => {"changed": false, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:25:28,534 p=2611061 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-20 11:25:28,955 p=2611061 u=lma n=ansible | ok: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:25:29,363 p=2611061 u=lma n=ansible | ok: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:25:29,713 p=2611061 u=lma n=ansible | ok: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:25:30,084 p=2611061 u=lma n=ansible | ok: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:25:30,094 p=2611061 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-20 11:25:30,508 p=2611061 u=lma n=ansible | ok: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-20 11:25:30,860 p=2611061 u=lma n=ansible | ok: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-20 11:25:31,200 p=2611061 u=lma n=ansible | ok: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-20 11:25:31,553 p=2611061 u=lma n=ansible | ok: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-20 11:25:31,562 p=2611061 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-20 11:25:32,253 p=2611061 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-20 11:25:32,264 p=2611061 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-20 11:25:37,847 p=2611061 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-20 11:25:37,855 p=2611061 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 11:25:39,633 p=2611061 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621499126, "cache_updated": false, "changed": false}
2021-05-20 11:25:39,643 p=2611061 u=lma n=ansible | TASK [app-test : Initiate virtualenv] *******************************************************************************************************************************************************************************
2021-05-20 11:26:16,617 p=2611061 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": ["/var/www/app-test/virtualenvs/python-sample-app/bin/pip", "install", "-r", "/var/www/app-test/python-sample-app_webapp/requirements.txt"], "name": null, "requirements": "/var/www/app-test/python-sample-app_webapp/requirements.txt", "state": "present", "stderr": "", "stderr_lines": [], "stdout": "created virtual environment CPython3.8.5.final.0-64 in 987ms\n  creator CPython3Posix(dest=/var/www/app-test/virtualenvs/python-sample-app, clear=False, no_vcs_ignore=False, global=False)\n  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)\n    added seed packages: pip==21.1.1, setuptools==56.0.0, wheel==0.36.2\n  activators BashActivator,CShellActivator,FishActivator,PowerShellActivator,PythonActivator,XonshActivator\nCollecting alembic==1.0.11\n  Downloading alembic-1.0.11.tar.gz (1.0 MB)\nCollecting click==7.0\n  Downloading Click-7.0-py2.py3-none-any.whl (81 kB)\nCollecting Flask==1.1.1\n  Downloading Flask-1.1.1-py2.py3-none-any.whl (94 kB)\nCollecting Flask-Migrate==2.5.2\n  Downloading Flask_Migrate-2.5.2-py2.py3-none-any.whl (13 kB)\nCollecting Flask-SQLAlchemy==2.4.0\n  Downloading Flask_SQLAlchemy-2.4.0-py2.py3-none-any.whl (17 kB)\nCollecting itsdangerous==1.1.0\n  Downloading itsdangerous-1.1.0-py2.py3-none-any.whl (16 kB)\nCollecting Jinja2==2.10.1\n  Downloading Jinja2-2.10.1-py2.py3-none-any.whl (124 kB)\nCollecting Mako==1.0.13\n  Downloading Mako-1.0.13.tar.gz (460 kB)\nCollecting MarkupSafe==1.1.1\n  Downloading MarkupSafe-1.1.1-cp38-cp38-manylinux2010_x86_64.whl (32 kB)\nCollecting psycopg2==2.8.3\n  Downloading psycopg2-2.8.3.tar.gz (377 kB)\nCollecting python-dateutil==2.8.0\n  Downloading python_dateutil-2.8.0-py2.py3-none-any.whl (226 kB)\nCollecting python-editor==1.0.4\n  Downloading python_editor-1.0.4-py3-none-any.whl (4.9 kB)\nCollecting six==1.12.0\n  Downloading six-1.12.0-py2.py3-none-any.whl (10 kB)\nCollecting SQLAlchemy==1.3.5\n  Downloading SQLAlchemy-1.3.5.tar.gz (5.9 MB)\nCollecting Werkzeug==0.15.5\n  Downloading Werkzeug-0.15.5-py2.py3-none-any.whl (328 kB)\nBuilding wheels for collected packages: alembic, Mako, psycopg2, SQLAlchemy\n  Building wheel for alembic (setup.py): started\n  Building wheel for alembic (setup.py): finished with status 'done'\n  Created wheel for alembic: filename=alembic-1.0.11-py2.py3-none-any.whl size=162178 sha256=9926098f16109fb12f48e798302b56dbb271eccc6b9e8272c9d76b76b31804c1\n  Stored in directory: /root/.cache/pip/wheels/ac/d8/3c/69b90fea150a3c9b0b16c4f41c7af72454be022284b4c16e6d\n  Building wheel for Mako (setup.py): started\n  Building wheel for Mako (setup.py): finished with status 'done'\n  Created wheel for Mako: filename=Mako-1.0.13-py3-none-any.whl size=75691 sha256=1a7a2acf3019a0fc68088e17e28192cbfb2995b56292bf2bde021b62549ae681\n  Stored in directory: /root/.cache/pip/wheels/94/c0/a1/13195d809a1f06ce22c6569b59063616d8665bb5ee27bcf362\n  Building wheel for psycopg2 (setup.py): started\n  Building wheel for psycopg2 (setup.py): finished with status 'done'\n  Created wheel for psycopg2: filename=psycopg2-2.8.3-cp38-cp38-linux_x86_64.whl size=502725 sha256=b834cb30715c285b6540ccf3be1a6c350f38ae02706ac09beaa2ce0d47094121\n  Stored in directory: /root/.cache/pip/wheels/9c/f4/9e/329d4de5959958bf6cf7db89d6bc9adbf3903dc1a52c651162\n  Building wheel for SQLAlchemy (setup.py): started\n  Building wheel for SQLAlchemy (setup.py): finished with status 'done'\n  Created wheel for SQLAlchemy: filename=SQLAlchemy-1.3.5-cp38-cp38-linux_x86_64.whl size=1193272 sha256=ab2fd236fec5a90badd1734ad09927f4af1842e75b91905e72505d6ffc652ddf\n  Stored in directory: /root/.cache/pip/wheels/ea/fb/ef/e2b074f4f3c6b8f9a310e604afa48e5bbc0b46119ab9cf558d\nSuccessfully built alembic Mako psycopg2 SQLAlchemy\nInstalling collected packages: MarkupSafe, Werkzeug, six, Jinja2, itsdangerous, click, SQLAlchemy, python-editor, python-dateutil, Mako, Flask, Flask-SQLAlchemy, alembic, psycopg2, Flask-Migrate\nSuccessfully installed Flask-1.1.1 Flask-Migrate-2.5.2 Flask-SQLAlchemy-2.4.0 Jinja2-2.10.1 Mako-1.0.13 MarkupSafe-1.1.1 SQLAlchemy-1.3.5 Werkzeug-0.15.5 alembic-1.0.11 click-7.0 itsdangerous-1.1.0 psycopg2-2.8.3 python-dateutil-2.8.0 python-editor-1.0.4 six-1.12.0\n", "stdout_lines": ["created virtual environment CPython3.8.5.final.0-64 in 987ms", "  creator CPython3Posix(dest=/var/www/app-test/virtualenvs/python-sample-app, clear=False, no_vcs_ignore=False, global=False)", "  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)", "    added seed packages: pip==21.1.1, setuptools==56.0.0, wheel==0.36.2", "  activators BashActivator,CShellActivator,FishActivator,PowerShellActivator,PythonActivator,XonshActivator", "Collecting alembic==1.0.11", "  Downloading alembic-1.0.11.tar.gz (1.0 MB)", "Collecting click==7.0", "  Downloading Click-7.0-py2.py3-none-any.whl (81 kB)", "Collecting Flask==1.1.1", "  Downloading Flask-1.1.1-py2.py3-none-any.whl (94 kB)", "Collecting Flask-Migrate==2.5.2", "  Downloading Flask_Migrate-2.5.2-py2.py3-none-any.whl (13 kB)", "Collecting Flask-SQLAlchemy==2.4.0", "  Downloading Flask_SQLAlchemy-2.4.0-py2.py3-none-any.whl (17 kB)", "Collecting itsdangerous==1.1.0", "  Downloading itsdangerous-1.1.0-py2.py3-none-any.whl (16 kB)", "Collecting Jinja2==2.10.1", "  Downloading Jinja2-2.10.1-py2.py3-none-any.whl (124 kB)", "Collecting Mako==1.0.13", "  Downloading Mako-1.0.13.tar.gz (460 kB)", "Collecting MarkupSafe==1.1.1", "  Downloading MarkupSafe-1.1.1-cp38-cp38-manylinux2010_x86_64.whl (32 kB)", "Collecting psycopg2==2.8.3", "  Downloading psycopg2-2.8.3.tar.gz (377 kB)", "Collecting python-dateutil==2.8.0", "  Downloading python_dateutil-2.8.0-py2.py3-none-any.whl (226 kB)", "Collecting python-editor==1.0.4", "  Downloading python_editor-1.0.4-py3-none-any.whl (4.9 kB)", "Collecting six==1.12.0", "  Downloading six-1.12.0-py2.py3-none-any.whl (10 kB)", "Collecting SQLAlchemy==1.3.5", "  Downloading SQLAlchemy-1.3.5.tar.gz (5.9 MB)", "Collecting Werkzeug==0.15.5", "  Downloading Werkzeug-0.15.5-py2.py3-none-any.whl (328 kB)", "Building wheels for collected packages: alembic, Mako, psycopg2, SQLAlchemy", "  Building wheel for alembic (setup.py): started", "  Building wheel for alembic (setup.py): finished with status 'done'", "  Created wheel for alembic: filename=alembic-1.0.11-py2.py3-none-any.whl size=162178 sha256=9926098f16109fb12f48e798302b56dbb271eccc6b9e8272c9d76b76b31804c1", "  Stored in directory: /root/.cache/pip/wheels/ac/d8/3c/69b90fea150a3c9b0b16c4f41c7af72454be022284b4c16e6d", "  Building wheel for Mako (setup.py): started", "  Building wheel for Mako (setup.py): finished with status 'done'", "  Created wheel for Mako: filename=Mako-1.0.13-py3-none-any.whl size=75691 sha256=1a7a2acf3019a0fc68088e17e28192cbfb2995b56292bf2bde021b62549ae681", "  Stored in directory: /root/.cache/pip/wheels/94/c0/a1/13195d809a1f06ce22c6569b59063616d8665bb5ee27bcf362", "  Building wheel for psycopg2 (setup.py): started", "  Building wheel for psycopg2 (setup.py): finished with status 'done'", "  Created wheel for psycopg2: filename=psycopg2-2.8.3-cp38-cp38-linux_x86_64.whl size=502725 sha256=b834cb30715c285b6540ccf3be1a6c350f38ae02706ac09beaa2ce0d47094121", "  Stored in directory: /root/.cache/pip/wheels/9c/f4/9e/329d4de5959958bf6cf7db89d6bc9adbf3903dc1a52c651162", "  Building wheel for SQLAlchemy (setup.py): started", "  Building wheel for SQLAlchemy (setup.py): finished with status 'done'", "  Created wheel for SQLAlchemy: filename=SQLAlchemy-1.3.5-cp38-cp38-linux_x86_64.whl size=1193272 sha256=ab2fd236fec5a90badd1734ad09927f4af1842e75b91905e72505d6ffc652ddf", "  Stored in directory: /root/.cache/pip/wheels/ea/fb/ef/e2b074f4f3c6b8f9a310e604afa48e5bbc0b46119ab9cf558d", "Successfully built alembic Mako psycopg2 SQLAlchemy", "Installing collected packages: MarkupSafe, Werkzeug, six, Jinja2, itsdangerous, click, SQLAlchemy, python-editor, python-dateutil, Mako, Flask, Flask-SQLAlchemy, alembic, psycopg2, Flask-Migrate", "Successfully installed Flask-1.1.1 Flask-Migrate-2.5.2 Flask-SQLAlchemy-2.4.0 Jinja2-2.10.1 Mako-1.0.13 MarkupSafe-1.1.1 SQLAlchemy-1.3.5 Werkzeug-0.15.5 alembic-1.0.11 click-7.0 itsdangerous-1.1.0 psycopg2-2.8.3 python-dateutil-2.8.0 python-editor-1.0.4 six-1.12.0"], "version": null, "virtualenv": "/var/www/app-test/virtualenvs/python-sample-app"}
2021-05-20 11:26:16,626 p=2611061 u=lma n=ansible | TASK [app-test : install build utilities] ***************************************************************************************************************************************************************************
2021-05-20 11:26:18,169 p=2611061 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621499126, "cache_updated": false, "changed": false}
2021-05-20 11:26:18,181 p=2611061 u=lma n=ansible | TASK [app-test : install python-dev package] ************************************************************************************************************************************************************************
2021-05-20 11:26:19,592 p=2611061 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621499126, "cache_updated": false, "changed": false}
2021-05-20 11:26:19,604 p=2611061 u=lma n=ansible | TASK [app-test : install uwsgi server] ******************************************************************************************************************************************************************************
2021-05-20 11:26:20,794 p=2611061 u=lma n=ansible | ok: [app-test] => {"changed": false, "cmd": ["/var/www/app-test/virtualenvs/uwsgi/bin/pip", "install", "uwsgi==2.0.15"], "name": ["uwsgi"], "requirements": null, "state": "present", "stderr": "", "stderr_lines": [], "stdout": "Requirement already satisfied: uwsgi==2.0.15 in /var/www/app-test/virtualenvs/uwsgi/lib/python3.8/site-packages (2.0.15)\n", "stdout_lines": ["Requirement already satisfied: uwsgi==2.0.15 in /var/www/app-test/virtualenvs/uwsgi/lib/python3.8/site-packages (2.0.15)"], "version": "2.0.15", "virtualenv": "/var/www/app-test/virtualenvs/uwsgi"}
2021-05-20 11:26:20,803 p=2611061 u=lma n=ansible | TASK [app-test : configure app on uwsgi server] *********************************************************************************************************************************************************************
2021-05-20 11:26:21,543 p=2611061 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "fdd3ff6a3f42e0648d8f896353be903dc1626ab2", "dest": "/var/www/app-test/config/uwsgi/python-sample-app_uwsgi.ini", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/var/www/app-test/config/uwsgi/python-sample-app_uwsgi.ini", "size": 194, "state": "file", "uid": 0}
2021-05-20 11:26:21,553 p=2611061 u=lma n=ansible | TASK [app-test : install supervisord] *******************************************************************************************************************************************************************************
2021-05-20 11:26:22,944 p=2611061 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621499126, "cache_updated": false, "changed": false}
2021-05-20 11:26:22,955 p=2611061 u=lma n=ansible | TASK [app-test : set permissions on supervisor config and log directories] ******************************************************************************************************************************************
2021-05-20 11:26:23,378 p=2611061 u=lma n=ansible | changed: [app-test] => (item=/etc/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/supervisor", "mode": "0755", "owner": "www-data", "path": "/etc/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:26:23,721 p=2611061 u=lma n=ansible | ok: [app-test] => (item=/etc/supervisor/conf.d) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/supervisor/conf.d", "mode": "0755", "owner": "root", "path": "/etc/supervisor/conf.d", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 11:26:24,072 p=2611061 u=lma n=ansible | changed: [app-test] => (item=/var/log/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/supervisor", "mode": "0755", "owner": "www-data", "path": "/var/log/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:26:24,085 p=2611061 u=lma n=ansible | TASK [app-test : modify supervisor configuration] *******************************************************************************************************************************************************************
2021-05-20 11:26:24,568 p=2611061 u=lma n=ansible | ok: [app-test] => (item={'key': 'chmod', 'value': '0770'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chmod", "value": "0770"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 11:26:24,894 p=2611061 u=lma n=ansible | ok: [app-test] => (item={'key': 'chown', 'value': 'root:www-data'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chown", "value": "root:www-data"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 11:26:24,902 p=2611061 u=lma n=ansible | TASK [app-test : upload supervisor configuration to web server home] ************************************************************************************************************************************************
2021-05-20 11:26:25,577 p=2611061 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "627125896a6a94d33436c4b9a6c5f9cc05783ce1", "dest": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "size": 431, "state": "file", "uid": 0}
2021-05-20 11:26:25,587 p=2611061 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-20 11:26:30,751 p=2611061 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-20 11:26:30,754 p=2611061 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 11:26:30,754 p=2611061 u=lma n=ansible | app-test                   : ok=20   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-20 11:53:53,758 p=2617031 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-20 11:53:53,765 p=2617031 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:53:53,765 p=2617031 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-20 11:53:53,963 p=2617031 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-20 11:53:53,977 p=2617031 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-20 11:53:58,485 p=2617031 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-20 11:53:58,485 p=2617031 u=lma n=ansible | ok: [app-test]
2021-05-20 11:53:58,494 p=2617031 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-20 11:53:58,532 p=2617031 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-20 11:53:58,545 p=2617031 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-20 11:54:01,974 p=2617031 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621500840, "cache_updated": true, "changed": false}
2021-05-20 11:54:01,985 p=2617031 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-20 11:54:02,031 p=2617031 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-20 11:54:02,039 p=2617031 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-20 11:54:02,529 p=2617031 u=lma n=ansible | ok: [app-test] => {"changed": false, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:54:02,538 p=2617031 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-20 11:54:02,947 p=2617031 u=lma n=ansible | ok: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:54:03,305 p=2617031 u=lma n=ansible | ok: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:54:03,664 p=2617031 u=lma n=ansible | ok: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:54:04,069 p=2617031 u=lma n=ansible | ok: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:54:04,078 p=2617031 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-20 11:54:04,500 p=2617031 u=lma n=ansible | ok: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-20 11:54:04,867 p=2617031 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-20 11:54:05,253 p=2617031 u=lma n=ansible | ok: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-20 11:54:05,612 p=2617031 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-20 11:54:05,627 p=2617031 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-20 11:54:06,286 p=2617031 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-20 11:54:06,297 p=2617031 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-20 11:54:11,853 p=2617031 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-20 11:54:11,863 p=2617031 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-20 11:54:13,363 p=2617031 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621500840, "cache_updated": false, "changed": false}
2021-05-20 11:54:13,371 p=2617031 u=lma n=ansible | TASK [app-test : Initiate virtualenv] *******************************************************************************************************************************************************************************
2021-05-20 11:54:16,223 p=2617031 u=lma n=ansible | ok: [app-test] => {"changed": false, "cmd": ["/var/www/app-test/virtualenvs/python-sample-app/bin/pip", "install", "-r", "/var/www/app-test/python-sample-app_webapp/requirements.txt"], "name": null, "requirements": "/var/www/app-test/python-sample-app_webapp/requirements.txt", "state": "present", "stderr": "", "stderr_lines": [], "stdout": "Requirement already satisfied: alembic==1.0.11 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 1)) (1.0.11)\nRequirement already satisfied: click==7.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 2)) (7.0)\nRequirement already satisfied: Flask==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 3)) (1.1.1)\nRequirement already satisfied: Flask-Migrate==2.5.2 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 4)) (2.5.2)\nRequirement already satisfied: Flask-SQLAlchemy==2.4.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 5)) (2.4.0)\nRequirement already satisfied: itsdangerous==1.1.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 6)) (1.1.0)\nRequirement already satisfied: Jinja2==2.10.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 7)) (2.10.1)\nRequirement already satisfied: Mako==1.0.13 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 8)) (1.0.13)\nRequirement already satisfied: MarkupSafe==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 9)) (1.1.1)\nRequirement already satisfied: psycopg2==2.8.3 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 10)) (2.8.3)\nRequirement already satisfied: python-dateutil==2.8.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 11)) (2.8.0)\nRequirement already satisfied: python-editor==1.0.4 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 12)) (1.0.4)\nRequirement already satisfied: six==1.12.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 13)) (1.12.0)\nRequirement already satisfied: SQLAlchemy==1.3.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 14)) (1.3.5)\nRequirement already satisfied: Werkzeug==0.15.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 15)) (0.15.5)\n", "stdout_lines": ["Requirement already satisfied: alembic==1.0.11 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 1)) (1.0.11)", "Requirement already satisfied: click==7.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 2)) (7.0)", "Requirement already satisfied: Flask==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 3)) (1.1.1)", "Requirement already satisfied: Flask-Migrate==2.5.2 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 4)) (2.5.2)", "Requirement already satisfied: Flask-SQLAlchemy==2.4.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 5)) (2.4.0)", "Requirement already satisfied: itsdangerous==1.1.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 6)) (1.1.0)", "Requirement already satisfied: Jinja2==2.10.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 7)) (2.10.1)", "Requirement already satisfied: Mako==1.0.13 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 8)) (1.0.13)", "Requirement already satisfied: MarkupSafe==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 9)) (1.1.1)", "Requirement already satisfied: psycopg2==2.8.3 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 10)) (2.8.3)", "Requirement already satisfied: python-dateutil==2.8.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 11)) (2.8.0)", "Requirement already satisfied: python-editor==1.0.4 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 12)) (1.0.4)", "Requirement already satisfied: six==1.12.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 13)) (1.12.0)", "Requirement already satisfied: SQLAlchemy==1.3.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 14)) (1.3.5)", "Requirement already satisfied: Werkzeug==0.15.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 15)) (0.15.5)"], "version": null, "virtualenv": "/var/www/app-test/virtualenvs/python-sample-app"}
2021-05-20 11:54:16,233 p=2617031 u=lma n=ansible | TASK [app-test : install build utilities] ***************************************************************************************************************************************************************************
2021-05-20 11:54:17,650 p=2617031 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621500840, "cache_updated": false, "changed": false}
2021-05-20 11:54:17,660 p=2617031 u=lma n=ansible | TASK [app-test : install python-dev package] ************************************************************************************************************************************************************************
2021-05-20 11:54:19,098 p=2617031 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621500840, "cache_updated": false, "changed": false}
2021-05-20 11:54:19,111 p=2617031 u=lma n=ansible | TASK [app-test : install uwsgi server] ******************************************************************************************************************************************************************************
2021-05-20 11:54:20,333 p=2617031 u=lma n=ansible | ok: [app-test] => {"changed": false, "cmd": ["/var/www/app-test/virtualenvs/uwsgi/bin/pip", "install", "uwsgi==2.0.15"], "name": ["uwsgi"], "requirements": null, "state": "present", "stderr": "", "stderr_lines": [], "stdout": "Requirement already satisfied: uwsgi==2.0.15 in /var/www/app-test/virtualenvs/uwsgi/lib/python3.8/site-packages (2.0.15)\n", "stdout_lines": ["Requirement already satisfied: uwsgi==2.0.15 in /var/www/app-test/virtualenvs/uwsgi/lib/python3.8/site-packages (2.0.15)"], "version": "2.0.15", "virtualenv": "/var/www/app-test/virtualenvs/uwsgi"}
2021-05-20 11:54:20,344 p=2617031 u=lma n=ansible | TASK [app-test : configure app on uwsgi server] *********************************************************************************************************************************************************************
2021-05-20 11:54:21,155 p=2617031 u=lma n=ansible | changed: [app-test] => {"changed": true, "checksum": "364647d89b0d306ff5fe8a9532a2bbd178e45281", "dest": "/var/www/app-test/config/uwsgi/python-sample-app_uwsgi.ini", "gid": 0, "group": "root", "md5sum": "59f69d797db34ce8a6fed89b8114e1a1", "mode": "0644", "owner": "root", "size": 191, "src": "/home/deployer/.ansible/tmp/ansible-tmp-1621500860.3786469-161824390658972/source", "state": "file", "uid": 0}
2021-05-20 11:54:21,166 p=2617031 u=lma n=ansible | TASK [app-test : install supervisord] *******************************************************************************************************************************************************************************
2021-05-20 11:54:22,579 p=2617031 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621500840, "cache_updated": false, "changed": false}
2021-05-20 11:54:22,589 p=2617031 u=lma n=ansible | TASK [app-test : set permissions on supervisor config and log directories] ******************************************************************************************************************************************
2021-05-20 11:54:22,965 p=2617031 u=lma n=ansible | changed: [app-test] => (item=/etc/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/supervisor", "mode": "0755", "owner": "www-data", "path": "/etc/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:54:23,305 p=2617031 u=lma n=ansible | ok: [app-test] => (item=/etc/supervisor/conf.d) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/supervisor/conf.d", "mode": "0755", "owner": "root", "path": "/etc/supervisor/conf.d", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 11:54:23,649 p=2617031 u=lma n=ansible | changed: [app-test] => (item=/var/log/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/supervisor", "mode": "0755", "owner": "www-data", "path": "/var/log/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:54:23,658 p=2617031 u=lma n=ansible | TASK [app-test : modify supervisor configuration] *******************************************************************************************************************************************************************
2021-05-20 11:54:24,125 p=2617031 u=lma n=ansible | ok: [app-test] => (item={'key': 'chmod', 'value': '0770'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chmod", "value": "0770"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 11:54:24,441 p=2617031 u=lma n=ansible | ok: [app-test] => (item={'key': 'chown', 'value': 'root:www-data'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chown", "value": "root:www-data"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-20 11:54:24,452 p=2617031 u=lma n=ansible | TASK [app-test : upload supervisor configuration to web server home] ************************************************************************************************************************************************
2021-05-20 11:54:25,132 p=2617031 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "627125896a6a94d33436c4b9a6c5f9cc05783ce1", "dest": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "size": 431, "state": "file", "uid": 0}
2021-05-20 11:54:25,144 p=2617031 u=lma n=ansible | TASK [app-test : install nginx webserver] ***************************************************************************************************************************************************************************
2021-05-20 11:54:26,582 p=2617031 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621500840, "cache_updated": false, "changed": false}
2021-05-20 11:54:26,593 p=2617031 u=lma n=ansible | TASK [app-test : configure nginx] ***********************************************************************************************************************************************************************************
2021-05-20 11:54:27,281 p=2617031 u=lma n=ansible | changed: [app-test] => {"changed": true, "checksum": "577d98bcce07f9eb8707dfab90b1f4486af90241", "dest": "/etc/nginx/sites-available/python-sample-app_uwsgi_nginx.conf", "gid": 0, "group": "root", "md5sum": "7739cc51cac6076524d0a77847b47cf4", "mode": "0644", "owner": "root", "size": 517, "src": "/home/deployer/.ansible/tmp/ansible-tmp-1621500866.6299539-7961300996708/source", "state": "file", "uid": 0}
2021-05-20 11:54:27,288 p=2617031 u=lma n=ansible | TASK [app-test : link to enable nginx configuration] ****************************************************************************************************************************************************************
2021-05-20 11:54:27,659 p=2617031 u=lma n=ansible | changed: [app-test] => {"changed": true, "dest": "/etc/nginx/sites-enabled/python-sample-app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0777", "owner": "root", "size": 61, "src": "/etc/nginx/sites-available/python-sample-app_uwsgi_nginx.conf", "state": "link", "uid": 0}
2021-05-20 11:54:27,667 p=2617031 u=lma n=ansible | TASK [app-test : disable default configuration] *********************************************************************************************************************************************************************
2021-05-20 11:54:28,058 p=2617031 u=lma n=ansible | ok: [app-test] => {"changed": false, "path": "/etc/nginx/sites-enabled/default", "state": "absent"}
2021-05-20 11:54:28,068 p=2617031 u=lma n=ansible | TASK [app-test : set nginx directories permissions] *****************************************************************************************************************************************************************
2021-05-20 11:54:28,468 p=2617031 u=lma n=ansible | changed: [app-test] => (item=/var/log/nginx) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/nginx", "mode": "0755", "owner": "www-data", "path": "/var/log/nginx", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:54:28,868 p=2617031 u=lma n=ansible | changed: [app-test] => (item=/etc/nginx) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/nginx", "mode": "0755", "owner": "www-data", "path": "/etc/nginx", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:54:29,264 p=2617031 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-available) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-available", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-available", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 11:54:29,616 p=2617031 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-enabled) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-enabled", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-enabled", "size": 4096, "state": "directory", "uid": 0}
2021-05-20 11:54:29,966 p=2617031 u=lma n=ansible | changed: [app-test] => (item=/var/www/app-test) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/www/app-test", "mode": "0755", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-20 11:54:29,975 p=2617031 u=lma n=ansible | TASK [app-test : set nginx logs permissions] ************************************************************************************************************************************************************************
2021-05-20 11:54:30,373 p=2617031 u=lma n=ansible | ok: [app-test] => (item=access.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "access.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/access.log", "size": 1380, "state": "file", "uid": 33}
2021-05-20 11:54:30,712 p=2617031 u=lma n=ansible | ok: [app-test] => (item=error.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "error.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/error.log", "size": 0, "state": "file", "uid": 33}
2021-05-20 11:54:30,715 p=2617031 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-20 11:54:30,715 p=2617031 u=lma n=ansible | app-test                   : ok=25   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-26 10:21:18,080 p=263815 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-26 10:21:18,156 p=263815 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-26 10:21:18,156 p=263815 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-26 10:21:18,695 p=263815 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  did not find expected key

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/uwsgi.yml': line 18, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


  - name: Run migrations
  ^ here

2021-05-26 10:22:22,782 p=264009 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-26 10:22:22,789 p=264009 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-26 10:22:22,789 p=264009 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-26 10:22:22,948 p=264009 u=lma n=ansible | ERROR! Syntax Error while loading YAML.
  found unacceptable key (unhashable type: 'AnsibleMapping')

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/uwsgi.yml': line 28, column 17, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

  become: yes
  become_user: {{ web_server_group }}
                ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2021-05-26 10:22:32,631 p=264042 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-26 10:22:32,638 p=264042 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-26 10:22:32,638 p=264042 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-26 10:22:32,983 p=264042 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-26 10:22:33,014 p=264042 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-26 10:22:37,096 p=264042 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-26 10:22:37,096 p=264042 u=lma n=ansible | ok: [app-test]
2021-05-26 10:22:37,105 p=264042 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-26 10:22:37,168 p=264042 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-26 10:22:37,178 p=264042 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-26 10:22:57,800 p=264042 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013760, "cache_updated": true, "changed": false}
2021-05-26 10:22:57,811 p=264042 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-26 10:22:57,851 p=264042 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-26 10:22:57,865 p=264042 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-26 10:22:58,339 p=264042 u=lma n=ansible | changed: [app-test] => {"changed": true, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:22:58,348 p=264042 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-26 10:22:58,776 p=264042 u=lma n=ansible | ok: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:22:59,117 p=264042 u=lma n=ansible | ok: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:22:59,443 p=264042 u=lma n=ansible | ok: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:22:59,797 p=264042 u=lma n=ansible | ok: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:22:59,806 p=264042 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-26 10:23:00,181 p=264042 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-26 10:23:00,563 p=264042 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-26 10:23:00,953 p=264042 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-26 10:23:01,313 p=264042 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-26 10:23:01,320 p=264042 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-26 10:23:01,981 p=264042 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-26 10:23:01,990 p=264042 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-26 10:23:07,433 p=264042 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-26 10:23:07,443 p=264042 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-26 10:23:08,859 p=264042 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013760, "cache_updated": false, "changed": false}
2021-05-26 10:23:08,867 p=264042 u=lma n=ansible | TASK [app-test : Initiate virtualenv] *******************************************************************************************************************************************************************************
2021-05-26 10:23:13,387 p=264042 u=lma n=ansible | ok: [app-test] => {"changed": false, "cmd": ["/var/www/app-test/virtualenvs/python-sample-app/bin/pip", "install", "-r", "/var/www/app-test/python-sample-app_webapp/requirements.txt"], "name": null, "requirements": "/var/www/app-test/python-sample-app_webapp/requirements.txt", "state": "present", "stderr": "", "stderr_lines": [], "stdout": "Requirement already satisfied: alembic==1.0.11 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 1)) (1.0.11)\nRequirement already satisfied: click==7.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 2)) (7.0)\nRequirement already satisfied: Flask==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 3)) (1.1.1)\nRequirement already satisfied: Flask-Migrate==2.5.2 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 4)) (2.5.2)\nRequirement already satisfied: Flask-SQLAlchemy==2.4.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 5)) (2.4.0)\nRequirement already satisfied: itsdangerous==1.1.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 6)) (1.1.0)\nRequirement already satisfied: Jinja2==2.10.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 7)) (2.10.1)\nRequirement already satisfied: Mako==1.0.13 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 8)) (1.0.13)\nRequirement already satisfied: MarkupSafe==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 9)) (1.1.1)\nRequirement already satisfied: psycopg2==2.8.3 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 10)) (2.8.3)\nRequirement already satisfied: python-dateutil==2.8.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 11)) (2.8.0)\nRequirement already satisfied: python-editor==1.0.4 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 12)) (1.0.4)\nRequirement already satisfied: six==1.12.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 13)) (1.12.0)\nRequirement already satisfied: SQLAlchemy==1.3.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 14)) (1.3.5)\nRequirement already satisfied: Werkzeug==0.15.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 15)) (0.15.5)\n", "stdout_lines": ["Requirement already satisfied: alembic==1.0.11 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 1)) (1.0.11)", "Requirement already satisfied: click==7.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 2)) (7.0)", "Requirement already satisfied: Flask==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 3)) (1.1.1)", "Requirement already satisfied: Flask-Migrate==2.5.2 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 4)) (2.5.2)", "Requirement already satisfied: Flask-SQLAlchemy==2.4.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 5)) (2.4.0)", "Requirement already satisfied: itsdangerous==1.1.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 6)) (1.1.0)", "Requirement already satisfied: Jinja2==2.10.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 7)) (2.10.1)", "Requirement already satisfied: Mako==1.0.13 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 8)) (1.0.13)", "Requirement already satisfied: MarkupSafe==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 9)) (1.1.1)", "Requirement already satisfied: psycopg2==2.8.3 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 10)) (2.8.3)", "Requirement already satisfied: python-dateutil==2.8.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 11)) (2.8.0)", "Requirement already satisfied: python-editor==1.0.4 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 12)) (1.0.4)", "Requirement already satisfied: six==1.12.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 13)) (1.12.0)", "Requirement already satisfied: SQLAlchemy==1.3.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 14)) (1.3.5)", "Requirement already satisfied: Werkzeug==0.15.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 15)) (0.15.5)"], "version": null, "virtualenv": "/var/www/app-test/virtualenvs/python-sample-app"}
2021-05-26 10:23:13,396 p=264042 u=lma n=ansible | TASK [app-test : install build utilities] ***************************************************************************************************************************************************************************
2021-05-26 10:23:14,821 p=264042 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013760, "cache_updated": false, "changed": false}
2021-05-26 10:23:14,831 p=264042 u=lma n=ansible | TASK [app-test : install python-dev package] ************************************************************************************************************************************************************************
2021-05-26 10:23:16,193 p=264042 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013760, "cache_updated": false, "changed": false}
2021-05-26 10:23:16,206 p=264042 u=lma n=ansible | TASK [app-test : install uwsgi server] ******************************************************************************************************************************************************************************
2021-05-26 10:23:18,311 p=264042 u=lma n=ansible | ok: [app-test] => {"changed": false, "cmd": ["/var/www/app-test/virtualenvs/uwsgi/bin/pip", "install", "uwsgi==2.0.15"], "name": ["uwsgi"], "requirements": null, "state": "present", "stderr": "", "stderr_lines": [], "stdout": "Requirement already satisfied: uwsgi==2.0.15 in /var/www/app-test/virtualenvs/uwsgi/lib/python3.8/site-packages (2.0.15)\n", "stdout_lines": ["Requirement already satisfied: uwsgi==2.0.15 in /var/www/app-test/virtualenvs/uwsgi/lib/python3.8/site-packages (2.0.15)"], "version": "2.0.15", "virtualenv": "/var/www/app-test/virtualenvs/uwsgi"}
2021-05-26 10:23:18,323 p=264042 u=lma n=ansible | TASK [app-test : configure app on uwsgi server] *********************************************************************************************************************************************************************
2021-05-26 10:23:19,258 p=264042 u=lma n=ansible | changed: [app-test] => {"changed": true, "checksum": "364647d89b0d306ff5fe8a9532a2bbd178e45281", "dest": "/var/www/app-test/config/uwsgi/python-sample-app_uwsgi.ini", "gid": 0, "group": "root", "md5sum": "59f69d797db34ce8a6fed89b8114e1a1", "mode": "0644", "owner": "root", "size": 191, "src": "/home/deployer/.ansible/tmp/ansible-tmp-1622013798.3604493-151981723727827/source", "state": "file", "uid": 0}
2021-05-26 10:23:19,269 p=264042 u=lma n=ansible | TASK [app-test : Run migrations] ************************************************************************************************************************************************************************************
2021-05-26 10:23:19,304 p=264042 u=lma n=ansible | skipping: [app-test] => {"changed": false, "skip_reason": "Conditional result was False"}
2021-05-26 10:23:19,318 p=264042 u=lma n=ansible | TASK [app-test : install supervisord] *******************************************************************************************************************************************************************************
2021-05-26 10:23:20,723 p=264042 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013760, "cache_updated": false, "changed": false}
2021-05-26 10:23:20,734 p=264042 u=lma n=ansible | TASK [app-test : set permissions on supervisor config and log directories] ******************************************************************************************************************************************
2021-05-26 10:23:21,161 p=264042 u=lma n=ansible | changed: [app-test] => (item=/etc/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/supervisor", "mode": "0755", "owner": "www-data", "path": "/etc/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:23:21,536 p=264042 u=lma n=ansible | ok: [app-test] => (item=/etc/supervisor/conf.d) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/supervisor/conf.d", "mode": "0755", "owner": "root", "path": "/etc/supervisor/conf.d", "size": 4096, "state": "directory", "uid": 0}
2021-05-26 10:23:21,856 p=264042 u=lma n=ansible | changed: [app-test] => (item=/var/log/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/supervisor", "mode": "0755", "owner": "www-data", "path": "/var/log/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:23:21,869 p=264042 u=lma n=ansible | TASK [app-test : modify supervisor configuration] *******************************************************************************************************************************************************************
2021-05-26 10:23:22,337 p=264042 u=lma n=ansible | ok: [app-test] => (item={'key': 'chmod', 'value': '0770'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chmod", "value": "0770"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-26 10:23:22,664 p=264042 u=lma n=ansible | ok: [app-test] => (item={'key': 'chown', 'value': 'root:www-data'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chown", "value": "root:www-data"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-26 10:23:22,671 p=264042 u=lma n=ansible | TASK [app-test : upload supervisor configuration to web server home] ************************************************************************************************************************************************
2021-05-26 10:23:23,411 p=264042 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "627125896a6a94d33436c4b9a6c5f9cc05783ce1", "dest": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "size": 431, "state": "file", "uid": 0}
2021-05-26 10:23:23,422 p=264042 u=lma n=ansible | TASK [app-test : install nginx webserver] ***************************************************************************************************************************************************************************
2021-05-26 10:23:25,029 p=264042 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013760, "cache_updated": false, "changed": false}
2021-05-26 10:23:25,039 p=264042 u=lma n=ansible | TASK [app-test : configure nginx] ***********************************************************************************************************************************************************************************
2021-05-26 10:23:25,725 p=264042 u=lma n=ansible | changed: [app-test] => {"changed": true, "checksum": "27156f3805e47ffcc07b442dd0229dd52327937f", "dest": "/etc/nginx/sites-available/python-sample-app_uwsgi_nginx.conf", "gid": 0, "group": "root", "md5sum": "3bc77c2b7d505ef5c00c9df9ff24a90e", "mode": "0644", "owner": "root", "size": 528, "src": "/home/deployer/.ansible/tmp/ansible-tmp-1622013805.0784187-107557100879726/source", "state": "file", "uid": 0}
2021-05-26 10:23:25,736 p=264042 u=lma n=ansible | TASK [app-test : link to enable nginx configuration] ****************************************************************************************************************************************************************
2021-05-26 10:23:26,100 p=264042 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/etc/nginx/sites-enabled/python-sample-app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0777", "owner": "root", "size": 61, "src": "/etc/nginx/sites-available/python-sample-app_uwsgi_nginx.conf", "state": "link", "uid": 0}
2021-05-26 10:23:26,113 p=264042 u=lma n=ansible | TASK [app-test : disable default configuration] *********************************************************************************************************************************************************************
2021-05-26 10:23:26,488 p=264042 u=lma n=ansible | ok: [app-test] => {"changed": false, "path": "/etc/nginx/sites-enabled/default", "state": "absent"}
2021-05-26 10:23:26,499 p=264042 u=lma n=ansible | TASK [app-test : set nginx directories permissions] *****************************************************************************************************************************************************************
2021-05-26 10:23:26,916 p=264042 u=lma n=ansible | changed: [app-test] => (item=/var/log/nginx) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/nginx", "mode": "0755", "owner": "www-data", "path": "/var/log/nginx", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:23:27,290 p=264042 u=lma n=ansible | changed: [app-test] => (item=/etc/nginx) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/nginx", "mode": "0755", "owner": "www-data", "path": "/etc/nginx", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:23:27,641 p=264042 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-available) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-available", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-available", "size": 4096, "state": "directory", "uid": 0}
2021-05-26 10:23:27,975 p=264042 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-enabled) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-enabled", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-enabled", "size": 4096, "state": "directory", "uid": 0}
2021-05-26 10:23:28,304 p=264042 u=lma n=ansible | changed: [app-test] => (item=/var/www/app-test) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/www/app-test", "mode": "0755", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:23:28,313 p=264042 u=lma n=ansible | TASK [app-test : set nginx logs permissions] ************************************************************************************************************************************************************************
2021-05-26 10:23:28,712 p=264042 u=lma n=ansible | changed: [app-test] => (item=access.log) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "access.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/access.log", "size": 0, "state": "file", "uid": 33}
2021-05-26 10:23:29,049 p=264042 u=lma n=ansible | changed: [app-test] => (item=error.log) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "error.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/error.log", "size": 0, "state": "file", "uid": 33}
2021-05-26 10:23:29,052 p=264042 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-26 10:23:29,053 p=264042 u=lma n=ansible | app-test                   : ok=25   changed=7    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2021-05-26 10:23:45,010 p=264982 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-26 10:23:45,017 p=264982 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-26 10:23:45,017 p=264982 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-26 10:23:45,210 p=264982 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-26 10:23:45,224 p=264982 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-26 10:23:46,597 p=264982 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-26 10:23:46,597 p=264982 u=lma n=ansible | ok: [app-test]
2021-05-26 10:23:46,604 p=264982 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-26 10:23:46,642 p=264982 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-26 10:23:46,651 p=264982 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-26 10:23:49,562 p=264982 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013828, "cache_updated": true, "changed": false}
2021-05-26 10:23:49,571 p=264982 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-26 10:23:49,614 p=264982 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-26 10:23:49,623 p=264982 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-26 10:23:50,095 p=264982 u=lma n=ansible | changed: [app-test] => {"changed": true, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:23:50,105 p=264982 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-26 10:23:50,472 p=264982 u=lma n=ansible | ok: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:23:50,863 p=264982 u=lma n=ansible | ok: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:23:51,180 p=264982 u=lma n=ansible | ok: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:23:51,526 p=264982 u=lma n=ansible | ok: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:23:51,534 p=264982 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-26 10:23:51,905 p=264982 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-26 10:23:52,258 p=264982 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-26 10:23:52,586 p=264982 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-26 10:23:52,910 p=264982 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-26 10:23:52,919 p=264982 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-26 10:23:53,464 p=264982 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-26 10:23:53,474 p=264982 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-26 10:23:58,650 p=264982 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-26 10:23:58,662 p=264982 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-26 10:24:00,418 p=264982 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013828, "cache_updated": false, "changed": false}
2021-05-26 10:24:00,428 p=264982 u=lma n=ansible | TASK [app-test : Initiate virtualenv] *******************************************************************************************************************************************************************************
2021-05-26 10:24:03,026 p=264982 u=lma n=ansible | ok: [app-test] => {"changed": false, "cmd": ["/var/www/app-test/virtualenvs/python-sample-app/bin/pip", "install", "-r", "/var/www/app-test/python-sample-app_webapp/requirements.txt"], "name": null, "requirements": "/var/www/app-test/python-sample-app_webapp/requirements.txt", "state": "present", "stderr": "", "stderr_lines": [], "stdout": "Requirement already satisfied: alembic==1.0.11 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 1)) (1.0.11)\nRequirement already satisfied: click==7.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 2)) (7.0)\nRequirement already satisfied: Flask==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 3)) (1.1.1)\nRequirement already satisfied: Flask-Migrate==2.5.2 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 4)) (2.5.2)\nRequirement already satisfied: Flask-SQLAlchemy==2.4.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 5)) (2.4.0)\nRequirement already satisfied: itsdangerous==1.1.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 6)) (1.1.0)\nRequirement already satisfied: Jinja2==2.10.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 7)) (2.10.1)\nRequirement already satisfied: Mako==1.0.13 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 8)) (1.0.13)\nRequirement already satisfied: MarkupSafe==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 9)) (1.1.1)\nRequirement already satisfied: psycopg2==2.8.3 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 10)) (2.8.3)\nRequirement already satisfied: python-dateutil==2.8.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 11)) (2.8.0)\nRequirement already satisfied: python-editor==1.0.4 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 12)) (1.0.4)\nRequirement already satisfied: six==1.12.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 13)) (1.12.0)\nRequirement already satisfied: SQLAlchemy==1.3.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 14)) (1.3.5)\nRequirement already satisfied: Werkzeug==0.15.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 15)) (0.15.5)\n", "stdout_lines": ["Requirement already satisfied: alembic==1.0.11 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 1)) (1.0.11)", "Requirement already satisfied: click==7.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 2)) (7.0)", "Requirement already satisfied: Flask==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 3)) (1.1.1)", "Requirement already satisfied: Flask-Migrate==2.5.2 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 4)) (2.5.2)", "Requirement already satisfied: Flask-SQLAlchemy==2.4.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 5)) (2.4.0)", "Requirement already satisfied: itsdangerous==1.1.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 6)) (1.1.0)", "Requirement already satisfied: Jinja2==2.10.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 7)) (2.10.1)", "Requirement already satisfied: Mako==1.0.13 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 8)) (1.0.13)", "Requirement already satisfied: MarkupSafe==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 9)) (1.1.1)", "Requirement already satisfied: psycopg2==2.8.3 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 10)) (2.8.3)", "Requirement already satisfied: python-dateutil==2.8.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 11)) (2.8.0)", "Requirement already satisfied: python-editor==1.0.4 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 12)) (1.0.4)", "Requirement already satisfied: six==1.12.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 13)) (1.12.0)", "Requirement already satisfied: SQLAlchemy==1.3.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 14)) (1.3.5)", "Requirement already satisfied: Werkzeug==0.15.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 15)) (0.15.5)"], "version": null, "virtualenv": "/var/www/app-test/virtualenvs/python-sample-app"}
2021-05-26 10:24:03,034 p=264982 u=lma n=ansible | TASK [app-test : install build utilities] ***************************************************************************************************************************************************************************
2021-05-26 10:24:04,390 p=264982 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013828, "cache_updated": false, "changed": false}
2021-05-26 10:24:04,402 p=264982 u=lma n=ansible | TASK [app-test : install python-dev package] ************************************************************************************************************************************************************************
2021-05-26 10:24:05,706 p=264982 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013828, "cache_updated": false, "changed": false}
2021-05-26 10:24:05,716 p=264982 u=lma n=ansible | TASK [app-test : install uwsgi server] ******************************************************************************************************************************************************************************
2021-05-26 10:24:06,880 p=264982 u=lma n=ansible | ok: [app-test] => {"changed": false, "cmd": ["/var/www/app-test/virtualenvs/uwsgi/bin/pip", "install", "uwsgi==2.0.15"], "name": ["uwsgi"], "requirements": null, "state": "present", "stderr": "", "stderr_lines": [], "stdout": "Requirement already satisfied: uwsgi==2.0.15 in /var/www/app-test/virtualenvs/uwsgi/lib/python3.8/site-packages (2.0.15)\n", "stdout_lines": ["Requirement already satisfied: uwsgi==2.0.15 in /var/www/app-test/virtualenvs/uwsgi/lib/python3.8/site-packages (2.0.15)"], "version": "2.0.15", "virtualenv": "/var/www/app-test/virtualenvs/uwsgi"}
2021-05-26 10:24:06,891 p=264982 u=lma n=ansible | TASK [app-test : configure app on uwsgi server] *********************************************************************************************************************************************************************
2021-05-26 10:24:07,629 p=264982 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "364647d89b0d306ff5fe8a9532a2bbd178e45281", "dest": "/var/www/app-test/config/uwsgi/python-sample-app_uwsgi.ini", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/var/www/app-test/config/uwsgi/python-sample-app_uwsgi.ini", "size": 191, "state": "file", "uid": 0}
2021-05-26 10:24:07,638 p=264982 u=lma n=ansible | TASK [app-test : Run migrations] ************************************************************************************************************************************************************************************
2021-05-26 10:24:07,672 p=264982 u=lma n=ansible | fatal: [app-test]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'app_app_directory' is undefined\n\nThe error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/uwsgi.yml': line 18, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Run migrations\n  ^ here\n"}
2021-05-26 10:24:07,674 p=264982 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-26 10:24:07,674 p=264982 u=lma n=ansible | app-test                   : ok=15   changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-26 10:24:49,606 p=265601 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-26 10:24:49,612 p=265601 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-26 10:24:49,612 p=265601 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-26 10:24:49,816 p=265601 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-26 10:24:49,830 p=265601 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-26 10:24:51,301 p=265601 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-26 10:24:51,301 p=265601 u=lma n=ansible | ok: [app-test]
2021-05-26 10:24:51,310 p=265601 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-26 10:24:51,349 p=265601 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-26 10:24:51,362 p=265601 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-26 10:24:54,204 p=265601 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013893, "cache_updated": true, "changed": false}
2021-05-26 10:24:54,214 p=265601 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-26 10:24:54,254 p=265601 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-26 10:24:54,263 p=265601 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-26 10:24:54,807 p=265601 u=lma n=ansible | ok: [app-test] => {"changed": false, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:24:54,818 p=265601 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-26 10:24:55,177 p=265601 u=lma n=ansible | ok: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:24:55,512 p=265601 u=lma n=ansible | ok: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:24:55,847 p=265601 u=lma n=ansible | ok: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:24:56,262 p=265601 u=lma n=ansible | ok: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:24:56,270 p=265601 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-26 10:24:56,645 p=265601 u=lma n=ansible | ok: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-26 10:24:57,005 p=265601 u=lma n=ansible | ok: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-26 10:24:57,340 p=265601 u=lma n=ansible | ok: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-26 10:24:57,689 p=265601 u=lma n=ansible | ok: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": false, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-26 10:24:57,699 p=265601 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-26 10:24:58,253 p=265601 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-26 10:24:58,262 p=265601 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-26 10:25:03,594 p=265601 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-26 10:25:03,602 p=265601 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-26 10:25:04,932 p=265601 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013893, "cache_updated": false, "changed": false}
2021-05-26 10:25:04,942 p=265601 u=lma n=ansible | TASK [app-test : Initiate virtualenv] *******************************************************************************************************************************************************************************
2021-05-26 10:25:07,536 p=265601 u=lma n=ansible | ok: [app-test] => {"changed": false, "cmd": ["/var/www/app-test/virtualenvs/python-sample-app/bin/pip", "install", "-r", "/var/www/app-test/python-sample-app_webapp/requirements.txt"], "name": null, "requirements": "/var/www/app-test/python-sample-app_webapp/requirements.txt", "state": "present", "stderr": "", "stderr_lines": [], "stdout": "Requirement already satisfied: alembic==1.0.11 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 1)) (1.0.11)\nRequirement already satisfied: click==7.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 2)) (7.0)\nRequirement already satisfied: Flask==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 3)) (1.1.1)\nRequirement already satisfied: Flask-Migrate==2.5.2 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 4)) (2.5.2)\nRequirement already satisfied: Flask-SQLAlchemy==2.4.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 5)) (2.4.0)\nRequirement already satisfied: itsdangerous==1.1.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 6)) (1.1.0)\nRequirement already satisfied: Jinja2==2.10.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 7)) (2.10.1)\nRequirement already satisfied: Mako==1.0.13 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 8)) (1.0.13)\nRequirement already satisfied: MarkupSafe==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 9)) (1.1.1)\nRequirement already satisfied: psycopg2==2.8.3 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 10)) (2.8.3)\nRequirement already satisfied: python-dateutil==2.8.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 11)) (2.8.0)\nRequirement already satisfied: python-editor==1.0.4 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 12)) (1.0.4)\nRequirement already satisfied: six==1.12.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 13)) (1.12.0)\nRequirement already satisfied: SQLAlchemy==1.3.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 14)) (1.3.5)\nRequirement already satisfied: Werkzeug==0.15.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 15)) (0.15.5)\n", "stdout_lines": ["Requirement already satisfied: alembic==1.0.11 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 1)) (1.0.11)", "Requirement already satisfied: click==7.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 2)) (7.0)", "Requirement already satisfied: Flask==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 3)) (1.1.1)", "Requirement already satisfied: Flask-Migrate==2.5.2 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 4)) (2.5.2)", "Requirement already satisfied: Flask-SQLAlchemy==2.4.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 5)) (2.4.0)", "Requirement already satisfied: itsdangerous==1.1.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 6)) (1.1.0)", "Requirement already satisfied: Jinja2==2.10.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 7)) (2.10.1)", "Requirement already satisfied: Mako==1.0.13 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 8)) (1.0.13)", "Requirement already satisfied: MarkupSafe==1.1.1 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 9)) (1.1.1)", "Requirement already satisfied: psycopg2==2.8.3 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 10)) (2.8.3)", "Requirement already satisfied: python-dateutil==2.8.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 11)) (2.8.0)", "Requirement already satisfied: python-editor==1.0.4 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 12)) (1.0.4)", "Requirement already satisfied: six==1.12.0 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 13)) (1.12.0)", "Requirement already satisfied: SQLAlchemy==1.3.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 14)) (1.3.5)", "Requirement already satisfied: Werkzeug==0.15.5 in /var/www/app-test/virtualenvs/python-sample-app/lib/python3.8/site-packages (from -r /var/www/app-test/python-sample-app_webapp/requirements.txt (line 15)) (0.15.5)"], "version": null, "virtualenv": "/var/www/app-test/virtualenvs/python-sample-app"}
2021-05-26 10:25:07,546 p=265601 u=lma n=ansible | TASK [app-test : install build utilities] ***************************************************************************************************************************************************************************
2021-05-26 10:25:08,881 p=265601 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013893, "cache_updated": false, "changed": false}
2021-05-26 10:25:08,890 p=265601 u=lma n=ansible | TASK [app-test : install python-dev package] ************************************************************************************************************************************************************************
2021-05-26 10:25:10,620 p=265601 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013893, "cache_updated": false, "changed": false}
2021-05-26 10:25:10,630 p=265601 u=lma n=ansible | TASK [app-test : install uwsgi server] ******************************************************************************************************************************************************************************
2021-05-26 10:25:11,764 p=265601 u=lma n=ansible | ok: [app-test] => {"changed": false, "cmd": ["/var/www/app-test/virtualenvs/uwsgi/bin/pip", "install", "uwsgi==2.0.15"], "name": ["uwsgi"], "requirements": null, "state": "present", "stderr": "", "stderr_lines": [], "stdout": "Requirement already satisfied: uwsgi==2.0.15 in /var/www/app-test/virtualenvs/uwsgi/lib/python3.8/site-packages (2.0.15)\n", "stdout_lines": ["Requirement already satisfied: uwsgi==2.0.15 in /var/www/app-test/virtualenvs/uwsgi/lib/python3.8/site-packages (2.0.15)"], "version": "2.0.15", "virtualenv": "/var/www/app-test/virtualenvs/uwsgi"}
2021-05-26 10:25:11,774 p=265601 u=lma n=ansible | TASK [app-test : configure app on uwsgi server] *********************************************************************************************************************************************************************
2021-05-26 10:25:12,419 p=265601 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "364647d89b0d306ff5fe8a9532a2bbd178e45281", "dest": "/var/www/app-test/config/uwsgi/python-sample-app_uwsgi.ini", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/var/www/app-test/config/uwsgi/python-sample-app_uwsgi.ini", "size": 191, "state": "file", "uid": 0}
2021-05-26 10:25:12,428 p=265601 u=lma n=ansible | TASK [app-test : Run migrations] ************************************************************************************************************************************************************************************
2021-05-26 10:25:14,836 p=265601 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": ["/var/www/app-test/virtualenvs/python-sample-app/bin/flask", "db", "upgrade"], "delta": "0:00:01.835220", "end": "2021-05-26 07:25:14.785656", "rc": 0, "start": "2021-05-26 07:25:12.950436", "stderr": "INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.\nINFO  [alembic.runtime.migration] Will assume transactional DDL.\nINFO  [alembic.runtime.migration] Running upgrade  -> 929260a83f4c, users table", "stderr_lines": ["INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.", "INFO  [alembic.runtime.migration] Will assume transactional DDL.", "INFO  [alembic.runtime.migration] Running upgrade  -> 929260a83f4c, users table"], "stdout": "", "stdout_lines": []}
2021-05-26 10:25:14,847 p=265601 u=lma n=ansible | TASK [app-test : install supervisord] *******************************************************************************************************************************************************************************
2021-05-26 10:25:16,166 p=265601 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013893, "cache_updated": false, "changed": false}
2021-05-26 10:25:16,174 p=265601 u=lma n=ansible | TASK [app-test : set permissions on supervisor config and log directories] ******************************************************************************************************************************************
2021-05-26 10:25:16,561 p=265601 u=lma n=ansible | changed: [app-test] => (item=/etc/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/supervisor", "mode": "0755", "owner": "www-data", "path": "/etc/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:25:16,908 p=265601 u=lma n=ansible | ok: [app-test] => (item=/etc/supervisor/conf.d) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/supervisor/conf.d", "mode": "0755", "owner": "root", "path": "/etc/supervisor/conf.d", "size": 4096, "state": "directory", "uid": 0}
2021-05-26 10:25:17,253 p=265601 u=lma n=ansible | changed: [app-test] => (item=/var/log/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/supervisor", "mode": "0755", "owner": "www-data", "path": "/var/log/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:25:17,262 p=265601 u=lma n=ansible | TASK [app-test : modify supervisor configuration] *******************************************************************************************************************************************************************
2021-05-26 10:25:17,730 p=265601 u=lma n=ansible | ok: [app-test] => (item={'key': 'chmod', 'value': '0770'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chmod", "value": "0770"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-26 10:25:18,044 p=265601 u=lma n=ansible | ok: [app-test] => (item={'key': 'chown', 'value': 'root:www-data'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chown", "value": "root:www-data"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-26 10:25:18,053 p=265601 u=lma n=ansible | TASK [app-test : upload supervisor configuration to web server home] ************************************************************************************************************************************************
2021-05-26 10:25:18,710 p=265601 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "627125896a6a94d33436c4b9a6c5f9cc05783ce1", "dest": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "size": 431, "state": "file", "uid": 0}
2021-05-26 10:25:18,718 p=265601 u=lma n=ansible | TASK [app-test : install nginx webserver] ***************************************************************************************************************************************************************************
2021-05-26 10:25:20,070 p=265601 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622013893, "cache_updated": false, "changed": false}
2021-05-26 10:25:20,082 p=265601 u=lma n=ansible | TASK [app-test : configure nginx] ***********************************************************************************************************************************************************************************
2021-05-26 10:25:20,791 p=265601 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "27156f3805e47ffcc07b442dd0229dd52327937f", "dest": "/etc/nginx/sites-available/python-sample-app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/nginx/sites-available/python-sample-app_uwsgi_nginx.conf", "size": 528, "state": "file", "uid": 0}
2021-05-26 10:25:20,802 p=265601 u=lma n=ansible | TASK [app-test : link to enable nginx configuration] ****************************************************************************************************************************************************************
2021-05-26 10:25:21,175 p=265601 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/etc/nginx/sites-enabled/python-sample-app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0777", "owner": "root", "size": 61, "src": "/etc/nginx/sites-available/python-sample-app_uwsgi_nginx.conf", "state": "link", "uid": 0}
2021-05-26 10:25:21,186 p=265601 u=lma n=ansible | TASK [app-test : disable default configuration] *********************************************************************************************************************************************************************
2021-05-26 10:25:21,538 p=265601 u=lma n=ansible | ok: [app-test] => {"changed": false, "path": "/etc/nginx/sites-enabled/default", "state": "absent"}
2021-05-26 10:25:21,546 p=265601 u=lma n=ansible | TASK [app-test : set nginx directories permissions] *****************************************************************************************************************************************************************
2021-05-26 10:25:21,943 p=265601 u=lma n=ansible | changed: [app-test] => (item=/var/log/nginx) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/nginx", "mode": "0755", "owner": "www-data", "path": "/var/log/nginx", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:25:22,272 p=265601 u=lma n=ansible | changed: [app-test] => (item=/etc/nginx) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/nginx", "mode": "0755", "owner": "www-data", "path": "/etc/nginx", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:25:22,613 p=265601 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-available) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-available", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-available", "size": 4096, "state": "directory", "uid": 0}
2021-05-26 10:25:22,988 p=265601 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-enabled) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-enabled", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-enabled", "size": 4096, "state": "directory", "uid": 0}
2021-05-26 10:25:23,320 p=265601 u=lma n=ansible | changed: [app-test] => (item=/var/www/app-test) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/www/app-test", "mode": "0755", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:25:23,332 p=265601 u=lma n=ansible | TASK [app-test : set nginx logs permissions] ************************************************************************************************************************************************************************
2021-05-26 10:25:23,730 p=265601 u=lma n=ansible | ok: [app-test] => (item=access.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "access.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/access.log", "size": 0, "state": "file", "uid": 33}
2021-05-26 10:25:24,113 p=265601 u=lma n=ansible | ok: [app-test] => (item=error.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "error.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/error.log", "size": 0, "state": "file", "uid": 33}
2021-05-26 10:25:24,116 p=265601 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-26 10:25:24,116 p=265601 u=lma n=ansible | app-test                   : ok=26   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-26 10:59:25,995 p=273425 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-26 10:59:26,002 p=273425 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-26 10:59:26,003 p=273425 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-26 10:59:26,205 p=273425 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-26 10:59:26,221 p=273425 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-26 10:59:28,927 p=273425 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-26 10:59:28,927 p=273425 u=lma n=ansible | ok: [app-test]
2021-05-26 10:59:28,938 p=273425 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-26 10:59:28,974 p=273425 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-26 10:59:28,982 p=273425 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-26 10:59:32,038 p=273425 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622015970, "cache_updated": true, "changed": false}
2021-05-26 10:59:32,047 p=273425 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-26 10:59:32,082 p=273425 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-26 10:59:32,091 p=273425 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-26 10:59:32,566 p=273425 u=lma n=ansible | changed: [app-test] => {"changed": true, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:59:32,574 p=273425 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-26 10:59:32,929 p=273425 u=lma n=ansible | ok: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:59:33,341 p=273425 u=lma n=ansible | ok: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:59:33,660 p=273425 u=lma n=ansible | ok: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:59:34,007 p=273425 u=lma n=ansible | ok: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:59:34,018 p=273425 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-26 10:59:34,398 p=273425 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-26 10:59:34,730 p=273425 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-26 10:59:35,055 p=273425 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-26 10:59:35,431 p=273425 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-26 10:59:35,442 p=273425 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-26 10:59:35,993 p=273425 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-26 10:59:36,002 p=273425 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-26 10:59:43,112 p=273425 u=lma n=ansible | changed: [app-test] => {"changed": true, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-26 10:59:43,126 p=273425 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-26 10:59:44,461 p=273425 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622015970, "cache_updated": false, "changed": false}
2021-05-26 10:59:44,470 p=273425 u=lma n=ansible | TASK [app-test : Initiate virtualenv] *******************************************************************************************************************************************************************************
2021-05-26 10:59:49,479 p=273425 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": false, "cmd": ["/var/www/app-test/virtualenvs/python-sample-app/bin/pip", "install", "-r", "/var/www/app-test/python-sample-app_webapp/requirements.txt"], "msg": "stdout: created virtual environment CPython3.8.5.final.0-64 in 1295ms\n  creator CPython3Posix(dest=/var/www/app-test/virtualenvs/python-sample-app, clear=False, no_vcs_ignore=False, global=False)\n  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)\n    added seed packages: pip==21.1.1, setuptools==56.0.0, wheel==0.36.2\n  activators BashActivator,CShellActivator,FishActivator,PowerShellActivator,PythonActivator,XonshActivator\n\n:stderr: ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/www/app-test/python-sample-app_webapp/requirements.txt'\n"}
2021-05-26 10:59:49,480 p=273425 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-26 10:59:49,481 p=273425 u=lma n=ansible | app-test                   : ok=10   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-26 10:59:53,761 p=273923 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-26 10:59:53,768 p=273923 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-26 10:59:53,768 p=273923 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-26 10:59:53,973 p=273923 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-26 10:59:53,987 p=273923 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-26 10:59:55,446 p=273923 u=lma n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 20.04 on host app-test should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-26 10:59:55,447 p=273923 u=lma n=ansible | ok: [app-test]
2021-05-26 10:59:55,457 p=273923 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-26 10:59:55,495 p=273923 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-26 10:59:55,509 p=273923 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-26 10:59:58,965 p=273923 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622015997, "cache_updated": true, "changed": false}
2021-05-26 10:59:58,976 p=273923 u=lma n=ansible | TASK [app-test : setup vars for ubuntu] *****************************************************************************************************************************************************************************
2021-05-26 10:59:59,014 p=273923 u=lma n=ansible | ok: [app-test] => {"ansible_facts": {"web_root_path": "/var/www/app-test", "web_server_group": "www-data"}, "changed": false}
2021-05-26 10:59:59,021 p=273923 u=lma n=ansible | TASK [app-test : setup webapp deployment folder with the correct permissions] ***************************************************************************************************************************************
2021-05-26 10:59:59,510 p=273923 u=lma n=ansible | changed: [app-test] => {"changed": true, "gid": 33, "group": "www-data", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 10:59:59,518 p=273923 u=lma n=ansible | TASK [app-test : setup webapp deployment configuration + log folders with the correct permissions] ******************************************************************************************************************
2021-05-26 10:59:59,892 p=273923 u=lma n=ansible | changed: [app-test] => (item=config) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "config", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 11:00:00,230 p=273923 u=lma n=ansible | changed: [app-test] => (item=config/uwsgi) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "config/uwsgi", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/config/uwsgi", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 11:00:00,583 p=273923 u=lma n=ansible | changed: [app-test] => (item=logs) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "logs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/logs", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 11:00:00,947 p=273923 u=lma n=ansible | changed: [app-test] => (item=virtualenvs) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "virtualenvs", "mode": "0774", "owner": "www-data", "path": "/var/www/app-test/virtualenvs", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 11:00:00,957 p=273923 u=lma n=ansible | TASK [app-test : link remote folders with webapp home folder] *******************************************************************************************************************************************************
2021-05-26 11:00:01,327 p=273923 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/nginx', 'value': 'config/nginx'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/nginx", "gid": 0, "group": "root", "item": {"key": "/etc/nginx", "value": "config/nginx"}, "mode": "0777", "owner": "root", "size": 10, "src": "/etc/nginx", "state": "link", "uid": 0}
2021-05-26 11:00:01,667 p=273923 u=lma n=ansible | changed: [app-test] => (item={'key': '/etc/supervisor', 'value': 'config/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/config/supervisor", "gid": 0, "group": "root", "item": {"key": "/etc/supervisor", "value": "config/supervisor"}, "mode": "0777", "owner": "root", "size": 15, "src": "/etc/supervisor", "state": "link", "uid": 0}
2021-05-26 11:00:02,023 p=273923 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/nginx', 'value': 'logs/nginx'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/nginx", "gid": 0, "group": "root", "item": {"key": "/var/log/nginx", "value": "logs/nginx"}, "mode": "0777", "owner": "root", "size": 14, "src": "/var/log/nginx", "state": "link", "uid": 0}
2021-05-26 11:00:02,360 p=273923 u=lma n=ansible | changed: [app-test] => (item={'key': '/var/log/supervisor', 'value': 'logs/supervisor'}) => {"ansible_loop_var": "item", "changed": true, "dest": "/var/www/app-test/logs/supervisor", "gid": 0, "group": "root", "item": {"key": "/var/log/supervisor", "value": "logs/supervisor"}, "mode": "0777", "owner": "root", "size": 19, "src": "/var/log/supervisor", "state": "link", "uid": 0}
2021-05-26 11:00:02,371 p=273923 u=lma n=ansible | TASK [app-test : add user to webserver group] ***********************************************************************************************************************************************************************
2021-05-26 11:00:02,924 p=273923 u=lma n=ansible | ok: [app-test] => {"append": true, "changed": false, "comment": "", "group": 1001, "groups": "www-data", "home": "/home/deployer", "move_home": false, "name": "deployer", "shell": "/bin/sh", "state": "present", "uid": 1001}
2021-05-26 11:00:02,937 p=273923 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-26 11:00:11,458 p=273923 u=lma n=ansible | changed: [app-test] => {"changed": true, "dest": "/var/www/app-test/python-sample-app_webapp/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app/"}
2021-05-26 11:00:11,468 p=273923 u=lma n=ansible | TASK [app-test : install python dev] ********************************************************************************************************************************************************************************
2021-05-26 11:00:12,845 p=273923 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622015997, "cache_updated": false, "changed": false}
2021-05-26 11:00:12,854 p=273923 u=lma n=ansible | TASK [app-test : Initiate virtualenv] *******************************************************************************************************************************************************************************
2021-05-26 11:00:21,963 p=273923 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": ["/var/www/app-test/virtualenvs/python-sample-app/bin/pip", "install", "-r", "/var/www/app-test/python-sample-app_webapp/requirements.txt"], "name": null, "requirements": "/var/www/app-test/python-sample-app_webapp/requirements.txt", "state": "present", "stderr": "", "stderr_lines": [], "stdout": "Collecting alembic==1.0.11\n  Using cached alembic-1.0.11-py2.py3-none-any.whl\nCollecting click==7.0\n  Using cached Click-7.0-py2.py3-none-any.whl (81 kB)\nCollecting Flask==1.1.1\n  Using cached Flask-1.1.1-py2.py3-none-any.whl (94 kB)\nCollecting Flask-Migrate==2.5.2\n  Using cached Flask_Migrate-2.5.2-py2.py3-none-any.whl (13 kB)\nCollecting Flask-SQLAlchemy==2.4.0\n  Using cached Flask_SQLAlchemy-2.4.0-py2.py3-none-any.whl (17 kB)\nCollecting itsdangerous==1.1.0\n  Using cached itsdangerous-1.1.0-py2.py3-none-any.whl (16 kB)\nCollecting Jinja2==2.10.1\n  Using cached Jinja2-2.10.1-py2.py3-none-any.whl (124 kB)\nCollecting Mako==1.0.13\n  Using cached Mako-1.0.13-py3-none-any.whl\nCollecting MarkupSafe==1.1.1\n  Using cached MarkupSafe-1.1.1-cp38-cp38-manylinux2010_x86_64.whl (32 kB)\nCollecting psycopg2==2.8.3\n  Using cached psycopg2-2.8.3-cp38-cp38-linux_x86_64.whl\nCollecting python-dateutil==2.8.0\n  Using cached python_dateutil-2.8.0-py2.py3-none-any.whl (226 kB)\nCollecting python-editor==1.0.4\n  Using cached python_editor-1.0.4-py3-none-any.whl (4.9 kB)\nCollecting six==1.12.0\n  Using cached six-1.12.0-py2.py3-none-any.whl (10 kB)\nCollecting SQLAlchemy==1.3.5\n  Using cached SQLAlchemy-1.3.5-cp38-cp38-linux_x86_64.whl\nCollecting Werkzeug==0.15.5\n  Using cached Werkzeug-0.15.5-py2.py3-none-any.whl (328 kB)\nInstalling collected packages: MarkupSafe, Werkzeug, six, Jinja2, itsdangerous, click, SQLAlchemy, python-editor, python-dateutil, Mako, Flask, Flask-SQLAlchemy, alembic, psycopg2, Flask-Migrate\nSuccessfully installed Flask-1.1.1 Flask-Migrate-2.5.2 Flask-SQLAlchemy-2.4.0 Jinja2-2.10.1 Mako-1.0.13 MarkupSafe-1.1.1 SQLAlchemy-1.3.5 Werkzeug-0.15.5 alembic-1.0.11 click-7.0 itsdangerous-1.1.0 psycopg2-2.8.3 python-dateutil-2.8.0 python-editor-1.0.4 six-1.12.0\n", "stdout_lines": ["Collecting alembic==1.0.11", "  Using cached alembic-1.0.11-py2.py3-none-any.whl", "Collecting click==7.0", "  Using cached Click-7.0-py2.py3-none-any.whl (81 kB)", "Collecting Flask==1.1.1", "  Using cached Flask-1.1.1-py2.py3-none-any.whl (94 kB)", "Collecting Flask-Migrate==2.5.2", "  Using cached Flask_Migrate-2.5.2-py2.py3-none-any.whl (13 kB)", "Collecting Flask-SQLAlchemy==2.4.0", "  Using cached Flask_SQLAlchemy-2.4.0-py2.py3-none-any.whl (17 kB)", "Collecting itsdangerous==1.1.0", "  Using cached itsdangerous-1.1.0-py2.py3-none-any.whl (16 kB)", "Collecting Jinja2==2.10.1", "  Using cached Jinja2-2.10.1-py2.py3-none-any.whl (124 kB)", "Collecting Mako==1.0.13", "  Using cached Mako-1.0.13-py3-none-any.whl", "Collecting MarkupSafe==1.1.1", "  Using cached MarkupSafe-1.1.1-cp38-cp38-manylinux2010_x86_64.whl (32 kB)", "Collecting psycopg2==2.8.3", "  Using cached psycopg2-2.8.3-cp38-cp38-linux_x86_64.whl", "Collecting python-dateutil==2.8.0", "  Using cached python_dateutil-2.8.0-py2.py3-none-any.whl (226 kB)", "Collecting python-editor==1.0.4", "  Using cached python_editor-1.0.4-py3-none-any.whl (4.9 kB)", "Collecting six==1.12.0", "  Using cached six-1.12.0-py2.py3-none-any.whl (10 kB)", "Collecting SQLAlchemy==1.3.5", "  Using cached SQLAlchemy-1.3.5-cp38-cp38-linux_x86_64.whl", "Collecting Werkzeug==0.15.5", "  Using cached Werkzeug-0.15.5-py2.py3-none-any.whl (328 kB)", "Installing collected packages: MarkupSafe, Werkzeug, six, Jinja2, itsdangerous, click, SQLAlchemy, python-editor, python-dateutil, Mako, Flask, Flask-SQLAlchemy, alembic, psycopg2, Flask-Migrate", "Successfully installed Flask-1.1.1 Flask-Migrate-2.5.2 Flask-SQLAlchemy-2.4.0 Jinja2-2.10.1 Mako-1.0.13 MarkupSafe-1.1.1 SQLAlchemy-1.3.5 Werkzeug-0.15.5 alembic-1.0.11 click-7.0 itsdangerous-1.1.0 psycopg2-2.8.3 python-dateutil-2.8.0 python-editor-1.0.4 six-1.12.0"], "version": null, "virtualenv": "/var/www/app-test/virtualenvs/python-sample-app"}
2021-05-26 11:00:21,972 p=273923 u=lma n=ansible | TASK [app-test : install build utilities] ***************************************************************************************************************************************************************************
2021-05-26 11:00:23,591 p=273923 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622015997, "cache_updated": false, "changed": false}
2021-05-26 11:00:23,600 p=273923 u=lma n=ansible | TASK [app-test : install python-dev package] ************************************************************************************************************************************************************************
2021-05-26 11:00:25,006 p=273923 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622015997, "cache_updated": false, "changed": false}
2021-05-26 11:00:25,014 p=273923 u=lma n=ansible | TASK [app-test : install uwsgi server] ******************************************************************************************************************************************************************************
2021-05-26 11:00:26,859 p=273923 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": ["/var/www/app-test/virtualenvs/python-sample-app/bin/pip", "install", "uwsgi==2.0.15"], "name": ["uwsgi"], "requirements": null, "state": "present", "stderr": "", "stderr_lines": [], "stdout": "Collecting uwsgi==2.0.15\n  Using cached uWSGI-2.0.15-cp38-cp38-linux_x86_64.whl\nInstalling collected packages: uwsgi\nSuccessfully installed uwsgi-2.0.15\n", "stdout_lines": ["Collecting uwsgi==2.0.15", "  Using cached uWSGI-2.0.15-cp38-cp38-linux_x86_64.whl", "Installing collected packages: uwsgi", "Successfully installed uwsgi-2.0.15"], "version": "2.0.15", "virtualenv": "/var/www/app-test/virtualenvs/python-sample-app"}
2021-05-26 11:00:26,871 p=273923 u=lma n=ansible | TASK [app-test : configure app on uwsgi server] *********************************************************************************************************************************************************************
2021-05-26 11:00:27,571 p=273923 u=lma n=ansible | changed: [app-test] => {"changed": true, "checksum": "364647d89b0d306ff5fe8a9532a2bbd178e45281", "dest": "/var/www/app-test/config/uwsgi/python-sample-app_uwsgi.ini", "gid": 0, "group": "root", "md5sum": "59f69d797db34ce8a6fed89b8114e1a1", "mode": "0644", "owner": "root", "size": 191, "src": "/home/deployer/.ansible/tmp/ansible-tmp-1622016026.9137566-262048741496685/source", "state": "file", "uid": 0}
2021-05-26 11:00:27,579 p=273923 u=lma n=ansible | TASK [app-test : Run migrations] ************************************************************************************************************************************************************************************
2021-05-26 11:00:28,921 p=273923 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": ["/var/www/app-test/virtualenvs/python-sample-app/bin/flask", "db", "upgrade"], "delta": "0:00:00.862558", "end": "2021-05-26 08:00:28.872621", "rc": 0, "start": "2021-05-26 08:00:28.010063", "stderr": "INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.\nINFO  [alembic.runtime.migration] Will assume transactional DDL.", "stderr_lines": ["INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.", "INFO  [alembic.runtime.migration] Will assume transactional DDL."], "stdout": "", "stdout_lines": []}
2021-05-26 11:00:28,931 p=273923 u=lma n=ansible | TASK [app-test : install supervisord] *******************************************************************************************************************************************************************************
2021-05-26 11:00:30,288 p=273923 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622015997, "cache_updated": false, "changed": false}
2021-05-26 11:00:30,297 p=273923 u=lma n=ansible | TASK [app-test : set permissions on supervisor config and log directories] ******************************************************************************************************************************************
2021-05-26 11:00:30,679 p=273923 u=lma n=ansible | changed: [app-test] => (item=/etc/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/supervisor", "mode": "0755", "owner": "www-data", "path": "/etc/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 11:00:31,020 p=273923 u=lma n=ansible | ok: [app-test] => (item=/etc/supervisor/conf.d) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/supervisor/conf.d", "mode": "0755", "owner": "root", "path": "/etc/supervisor/conf.d", "size": 4096, "state": "directory", "uid": 0}
2021-05-26 11:00:31,334 p=273923 u=lma n=ansible | changed: [app-test] => (item=/var/log/supervisor) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/supervisor", "mode": "0755", "owner": "www-data", "path": "/var/log/supervisor", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 11:00:31,341 p=273923 u=lma n=ansible | TASK [app-test : modify supervisor configuration] *******************************************************************************************************************************************************************
2021-05-26 11:00:31,820 p=273923 u=lma n=ansible | ok: [app-test] => (item={'key': 'chmod', 'value': '0770'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chmod", "value": "0770"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-26 11:00:32,135 p=273923 u=lma n=ansible | ok: [app-test] => (item={'key': 'chown', 'value': 'root:www-data'}) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "root", "item": {"key": "chown", "value": "root:www-data"}, "mode": "0644", "msg": "OK", "owner": "root", "path": "/etc/supervisor/supervisord.conf", "size": 1146, "state": "file", "uid": 0}
2021-05-26 11:00:32,149 p=273923 u=lma n=ansible | TASK [app-test : upload supervisor configuration to web server home] ************************************************************************************************************************************************
2021-05-26 11:00:32,812 p=273923 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "627125896a6a94d33436c4b9a6c5f9cc05783ce1", "dest": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/supervisor/conf.d/python-sample-app_supervisor.conf", "size": 431, "state": "file", "uid": 0}
2021-05-26 11:00:32,826 p=273923 u=lma n=ansible | TASK [app-test : install nginx webserver] ***************************************************************************************************************************************************************************
2021-05-26 11:00:34,209 p=273923 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1622015997, "cache_updated": false, "changed": false}
2021-05-26 11:00:34,222 p=273923 u=lma n=ansible | TASK [app-test : configure nginx] ***********************************************************************************************************************************************************************************
2021-05-26 11:00:34,877 p=273923 u=lma n=ansible | ok: [app-test] => {"changed": false, "checksum": "27156f3805e47ffcc07b442dd0229dd52327937f", "dest": "/etc/nginx/sites-available/python-sample-app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/nginx/sites-available/python-sample-app_uwsgi_nginx.conf", "size": 528, "state": "file", "uid": 0}
2021-05-26 11:00:34,886 p=273923 u=lma n=ansible | TASK [app-test : link to enable nginx configuration] ****************************************************************************************************************************************************************
2021-05-26 11:00:35,250 p=273923 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/etc/nginx/sites-enabled/python-sample-app_uwsgi_nginx.conf", "gid": 0, "group": "root", "mode": "0777", "owner": "root", "size": 61, "src": "/etc/nginx/sites-available/python-sample-app_uwsgi_nginx.conf", "state": "link", "uid": 0}
2021-05-26 11:00:35,259 p=273923 u=lma n=ansible | TASK [app-test : disable default configuration] *********************************************************************************************************************************************************************
2021-05-26 11:00:35,608 p=273923 u=lma n=ansible | ok: [app-test] => {"changed": false, "path": "/etc/nginx/sites-enabled/default", "state": "absent"}
2021-05-26 11:00:35,618 p=273923 u=lma n=ansible | TASK [app-test : set nginx directories permissions] *****************************************************************************************************************************************************************
2021-05-26 11:00:36,083 p=273923 u=lma n=ansible | changed: [app-test] => (item=/var/log/nginx) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/log/nginx", "mode": "0755", "owner": "www-data", "path": "/var/log/nginx", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 11:00:36,432 p=273923 u=lma n=ansible | changed: [app-test] => (item=/etc/nginx) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/etc/nginx", "mode": "0755", "owner": "www-data", "path": "/etc/nginx", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 11:00:36,787 p=273923 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-available) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-available", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-available", "size": 4096, "state": "directory", "uid": 0}
2021-05-26 11:00:37,198 p=273923 u=lma n=ansible | ok: [app-test] => (item=/etc/nginx/sites-enabled) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "/etc/nginx/sites-enabled", "mode": "0755", "owner": "root", "path": "/etc/nginx/sites-enabled", "size": 4096, "state": "directory", "uid": 0}
2021-05-26 11:00:37,534 p=273923 u=lma n=ansible | changed: [app-test] => (item=/var/www/app-test) => {"ansible_loop_var": "item", "changed": true, "gid": 33, "group": "www-data", "item": "/var/www/app-test", "mode": "0755", "owner": "www-data", "path": "/var/www/app-test", "size": 4096, "state": "directory", "uid": 33}
2021-05-26 11:00:37,543 p=273923 u=lma n=ansible | TASK [app-test : set nginx logs permissions] ************************************************************************************************************************************************************************
2021-05-26 11:00:37,961 p=273923 u=lma n=ansible | ok: [app-test] => (item=access.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "access.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/access.log", "size": 0, "state": "file", "uid": 33}
2021-05-26 11:00:38,302 p=273923 u=lma n=ansible | ok: [app-test] => (item=error.log) => {"ansible_loop_var": "item", "changed": false, "gid": 33, "group": "www-data", "item": "error.log", "mode": "0644", "owner": "www-data", "path": "/var/log/nginx/error.log", "size": 0, "state": "file", "uid": 33}
2021-05-26 11:00:38,305 p=273923 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-26 11:00:38,305 p=273923 u=lma n=ansible | app-test                   : ok=26   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
