2021-05-17 12:50:09,066 p=1717026 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 12:50:09,066 p=1717026 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 12:50:09,485 p=1717026 u=lma n=ansible | ERROR! A malformed block was encountered while loading a block

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/main.yml': line 43, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Install Postgres on CentOS
  ^ here

2021-05-17 12:55:24,588 p=1718087 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 12:55:24,588 p=1718087 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 12:55:24,828 p=1718087 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 12:55:24,855 p=1718087 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 12:55:26,117 p=1718087 u=lma n=ansible | fatal: [app-test]: UNREACHABLE! => {"changed": false, "msg": "Authentication or permission failure. In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \"/tmp\". Failed command was: ( umask 77 && mkdir -p \"` echo /home/deployer/.ansible/tmp/ansible-tmp-1621245324.8695447-76718739431225 `\" && echo ansible-tmp-1621245324.8695447-76718739431225=\"` echo /home/deployer/.ansible/tmp/ansible-tmp-1621245324.8695447-76718739431225 `\" ), exited with result 1", "unreachable": true}
2021-05-17 12:55:26,119 p=1718087 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 12:55:26,119 p=1718087 u=lma n=ansible | app-test                   : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-17 12:58:05,725 p=1718610 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 12:58:05,725 p=1718610 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 12:58:05,913 p=1718610 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 12:58:05,924 p=1718610 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 12:58:07,693 p=1718610 u=lma n=ansible | fatal: [app-test]: FAILED! => {"msg": "Missing sudo password"}
2021-05-17 12:58:07,695 p=1718610 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 12:58:07,695 p=1718610 u=lma n=ansible | app-test                   : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-17 12:59:31,332 p=1718928 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 12:59:31,332 p=1718928 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 12:59:31,515 p=1718928 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 12:59:31,525 p=1718928 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 12:59:33,189 p=1718928 u=lma n=ansible | fatal: [app-test]: FAILED! => {"msg": "Missing sudo password"}
2021-05-17 12:59:33,190 p=1718928 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 12:59:33,190 p=1718928 u=lma n=ansible | app-test                   : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-17 13:01:00,051 p=1719298 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:01:00,051 p=1719298 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:01:00,237 p=1719298 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:01:00,247 p=1719298 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:01:04,194 p=1719298 u=lma n=ansible | ok: [app-test]
2021-05-17 13:01:04,202 p=1719298 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:01:04,238 p=1719298 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:01:04,247 p=1719298 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:01:04,280 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,289 p=1719298 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:01:04,326 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,334 p=1719298 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:01:04,369 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,378 p=1719298 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:01:04,415 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,425 p=1719298 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:01:04,460 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,469 p=1719298 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:01:04,502 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,508 p=1719298 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 13:01:04,541 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,549 p=1719298 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 13:01:04,583 p=1719298 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:01:04,585 p=1719298 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:01:04,585 p=1719298 u=lma n=ansible | app-test                   : ok=2    changed=0    unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2021-05-17 13:02:18,155 p=1719595 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:02:18,155 p=1719595 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:02:18,360 p=1719595 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:02:18,370 p=1719595 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:02:21,149 p=1719595 u=lma n=ansible | ok: [app-test]
2021-05-17 13:02:21,159 p=1719595 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:02:21,199 p=1719595 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:02:21,206 p=1719595 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:02:21,242 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,250 p=1719595 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:02:21,286 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,294 p=1719595 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:02:21,330 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,338 p=1719595 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:02:21,372 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,380 p=1719595 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:02:21,413 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,423 p=1719595 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:02:21,460 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,470 p=1719595 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 13:02:21,504 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,514 p=1719595 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 13:02:21,551 p=1719595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:02:21,553 p=1719595 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:02:21,553 p=1719595 u=lma n=ansible | app-test                   : ok=2    changed=0    unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2021-05-17 13:05:55,551 p=1720327 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:05:55,551 p=1720327 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:05:55,736 p=1720327 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:05:55,745 p=1720327 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:05:58,619 p=1720327 u=lma n=ansible | ok: [app-test]
2021-05-17 13:05:58,627 p=1720327 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:05:58,662 p=1720327 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:05:58,671 p=1720327 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:06:07,210 p=1720327 u=lma n=ansible | changed: [app-test]
2021-05-17 13:06:07,222 p=1720327 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:06:08,911 p=1720327 u=lma n=ansible | ok: [app-test]
2021-05-17 13:06:08,922 p=1720327 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:06:26,104 p=1720327 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:16.617219", "end": "2021-05-17 10:06:26.059671", "msg": "non-zero return code", "rc": 100, "start": "2021-05-17 10:06:09.442452", "stderr": "W: GPG error: http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 7FCC7D46ACCC4CF8\nE: The repository 'http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease' is not signed.", "stderr_lines": ["W: GPG error: http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 7FCC7D46ACCC4CF8", "E: The repository 'http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease' is not signed."], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nHit:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease\nHit:3 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease\nGet:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nHit:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease\nErr:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease\n  The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 7FCC7D46ACCC4CF8\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Hit:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease", "Hit:3 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease", "Get:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Hit:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease", "Err:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease", "  The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 7FCC7D46ACCC4CF8", "Reading package lists..."]}
2021-05-17 13:06:26,105 p=1720327 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:06:26,106 p=1720327 u=lma n=ansible | app-test                   : ok=4    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-17 13:10:40,973 p=1721595 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:10:40,974 p=1721595 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:10:41,177 p=1721595 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:10:41,187 p=1721595 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:10:44,387 p=1721595 u=lma n=ansible | ok: [app-test]
2021-05-17 13:10:44,395 p=1721595 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:10:44,432 p=1721595 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:10:44,442 p=1721595 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:11:00,831 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:11:00,842 p=1721595 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:11:02,588 p=1721595 u=lma n=ansible | ok: [app-test]
2021-05-17 13:11:02,599 p=1721595 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 13:11:03,898 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:11:03,909 p=1721595 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:11:23,118 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:11:23,126 p=1721595 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:11:24,171 p=1721595 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 13:11:24,172 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:11:24,179 p=1721595 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:11:27,081 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:11:27,089 p=1721595 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:12:35,768 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:12:35,783 p=1721595 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 13:12:36,269 p=1721595 u=lma n=ansible | changed: [app-test]
2021-05-17 13:12:36,280 p=1721595 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 13:12:36,320 p=1721595 u=lma n=ansible | skipping: [app-test]
2021-05-17 13:12:36,322 p=1721595 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:12:36,322 p=1721595 u=lma n=ansible | app-test                   : ok=10   changed=7    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2021-05-17 13:13:58,994 p=1722413 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:13:59,000 p=1722413 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:13:59,000 p=1722413 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:13:59,199 p=1722413 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:13:59,209 p=1722413 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:14:02,294 p=1722413 u=lma n=ansible | ok: [app-test]
2021-05-17 13:14:02,303 p=1722413 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:14:02,339 p=1722413 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:14:02,351 p=1722413 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:14:05,246 p=1722413 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621246444, "cache_updated": true, "changed": true}
2021-05-17 13:14:05,256 p=1722413 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:14:06,878 p=1722413 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621246444, "cache_updated": false, "changed": false}
2021-05-17 13:14:06,891 p=1722413 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 13:14:08,227 p=1722413 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.753605", "end": "2021-05-17 10:14:08.172885", "rc": 0, "start": "2021-05-17 10:14:07.419280", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.QCzS1PiSN2/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.QCzS1PiSN2/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 13:14:08,238 p=1722413 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:14:25,277 p=1722413 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:16.581014", "end": "2021-05-17 10:14:25.239889", "rc": 0, "start": "2021-05-17 10:14:08.658875", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nHit:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease\nHit:3 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease\nGet:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nHit:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease\nFetched 81.6 kB in 1s (105 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Hit:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease", "Hit:3 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease", "Get:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Hit:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease", "Fetched 81.6 kB in 1s (105 kB/s)", "Reading package lists..."]}
2021-05-17 13:14:25,286 p=1722413 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:14:26,223 p=1722413 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 13:14:26,224 p=1722413 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.490578", "end": "2021-05-17 10:14:26.176989", "rc": 0, "start": "2021-05-17 10:14:25.686411", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 13:14:26,233 p=1722413 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:14:28,934 p=1722413 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621246468, "cache_updated": true, "changed": true}
2021-05-17 13:14:28,943 p=1722413 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:14:30,559 p=1722413 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621246468, "cache_updated": false, "changed": false}
2021-05-17 13:14:30,571 p=1722413 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 13:14:31,060 p=1722413 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "systemctl status postgresql", "delta": "0:00:00.014828", "end": "2021-05-17 10:14:31.014758", "rc": 0, "start": "2021-05-17 10:14:30.999930", "stderr": "", "stderr_lines": [], "stdout": "● postgresql.service - PostgreSQL RDBMS\n     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)\n     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 2min 25s ago\n   Main PID: 8359 (code=exited, status=0/SUCCESS)\n      Tasks: 0 (limit: 2281)\n     Memory: 0B\n     CGroup: /system.slice/postgresql.service\n\nMay 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...\nMay 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS.", "stdout_lines": ["● postgresql.service - PostgreSQL RDBMS", "     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)", "     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 2min 25s ago", "   Main PID: 8359 (code=exited, status=0/SUCCESS)", "      Tasks: 0 (limit: 2281)", "     Memory: 0B", "     CGroup: /system.slice/postgresql.service", "", "May 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...", "May 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS."]}
2021-05-17 13:14:31,068 p=1722413 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 13:14:31,106 p=1722413 u=lma n=ansible | skipping: [app-test] => {}
2021-05-17 13:14:31,109 p=1722413 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:14:31,109 p=1722413 u=lma n=ansible | app-test                   : ok=10   changed=6    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2021-05-17 13:22:20,063 p=1724502 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:22:20,070 p=1724502 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:22:20,070 p=1724502 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:22:20,260 p=1724502 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:22:20,271 p=1724502 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:22:23,202 p=1724502 u=lma n=ansible | ok: [app-test]
2021-05-17 13:22:23,210 p=1724502 u=lma n=ansible | TASK [app-test : create copy_sql] ***********************************************************************************************************************************************************************************
2021-05-17 13:22:36,495 p=1724502 u=lma n=ansible | changed: [app-test] => {"changed": true, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 13:22:36,498 p=1724502 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:22:36,498 p=1724502 u=lma n=ansible | app-test                   : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-05-17 13:30:11,829 p=1726439 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:30:11,835 p=1726439 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:30:11,835 p=1726439 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:30:12,077 p=1726439 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:30:12,087 p=1726439 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:30:14,876 p=1726439 u=lma n=ansible | ok: [app-test]
2021-05-17 13:30:14,884 p=1726439 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:30:14,923 p=1726439 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:30:14,930 p=1726439 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 13:30:22,242 p=1726439 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 13:30:22,251 p=1726439 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:30:25,557 p=1726439 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621247424, "cache_updated": true, "changed": true}
2021-05-17 13:30:25,569 p=1726439 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:30:27,179 p=1726439 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621247424, "cache_updated": false, "changed": false}
2021-05-17 13:30:27,190 p=1726439 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 13:30:28,468 p=1726439 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.709295", "end": "2021-05-17 10:30:28.420059", "rc": 0, "start": "2021-05-17 10:30:27.710764", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.TmA3rmSJM7/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.TmA3rmSJM7/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 13:30:28,476 p=1726439 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:30:46,915 p=1726439 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:17.958450", "end": "2021-05-17 10:30:46.869186", "rc": 0, "start": "2021-05-17 10:30:28.910736", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (480 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (480 kB/s)", "Reading package lists..."]}
2021-05-17 13:30:46,926 p=1726439 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:30:48,048 p=1726439 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 13:30:48,048 p=1726439 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.651809", "end": "2021-05-17 10:30:48.002783", "rc": 0, "start": "2021-05-17 10:30:47.350974", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 13:30:48,055 p=1726439 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:30:50,973 p=1726439 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621247450, "cache_updated": true, "changed": true}
2021-05-17 13:30:50,981 p=1726439 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:30:52,630 p=1726439 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621247450, "cache_updated": false, "changed": false}
2021-05-17 13:30:52,640 p=1726439 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 13:30:53,102 p=1726439 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "systemctl status postgresql", "delta": "0:00:00.015030", "end": "2021-05-17 10:30:53.056335", "rc": 0, "start": "2021-05-17 10:30:53.041305", "stderr": "", "stderr_lines": [], "stdout": "● postgresql.service - PostgreSQL RDBMS\n     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)\n     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 18min ago\n   Main PID: 8359 (code=exited, status=0/SUCCESS)\n      Tasks: 0 (limit: 2281)\n     Memory: 0B\n     CGroup: /system.slice/postgresql.service\n\nMay 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...\nMay 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS.", "stdout_lines": ["● postgresql.service - PostgreSQL RDBMS", "     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)", "     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 18min ago", "   Main PID: 8359 (code=exited, status=0/SUCCESS)", "      Tasks: 0 (limit: 2281)", "     Memory: 0B", "     CGroup: /system.slice/postgresql.service", "", "May 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...", "May 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS."]}
2021-05-17 13:30:53,110 p=1726439 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 13:30:53,143 p=1726439 u=lma n=ansible | skipping: [app-test] => {}
2021-05-17 13:30:53,153 p=1726439 u=lma n=ansible | TASK [app-test : Create Postgres User] ******************************************************************************************************************************************************************************
2021-05-17 13:30:53,733 p=1726439 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": false, "msg": "Failed to import the required Python library (psycopg2) on docker-test1's Python /usr/bin/python3. Please read module documentation and install in the appropriate location. If the required library is installed, but Ansible is using the wrong Python interpreter, please consult the documentation on ansible_python_interpreter"}
2021-05-17 13:30:53,735 p=1726439 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:30:53,735 p=1726439 u=lma n=ansible | app-test                   : ok=11   changed=6    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-05-17 13:42:36,206 p=1729406 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:42:36,213 p=1729406 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:42:36,213 p=1729406 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:42:36,377 p=1729406 u=lma n=ansible | ERROR! conflicting action statements: sudo_user, postgresql_db

The error appears to be in '/home/lma/work/new/ansible-test/roles/app-test/tasks/main.yml': line 65, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Create Postgres db
  ^ here

2021-05-17 13:50:26,589 p=1731179 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:50:26,595 p=1731179 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:50:26,595 p=1731179 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:50:26,824 p=1731179 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:50:26,834 p=1731179 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:50:29,977 p=1731179 u=lma n=ansible | ok: [app-test]
2021-05-17 13:50:29,986 p=1731179 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:50:30,023 p=1731179 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:50:30,028 p=1731179 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 13:50:37,532 p=1731179 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 13:50:37,541 p=1731179 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:50:40,903 p=1731179 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621248639, "cache_updated": true, "changed": true}
2021-05-17 13:50:40,913 p=1731179 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:50:42,724 p=1731179 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621248639, "cache_updated": false, "changed": false}
2021-05-17 13:50:42,733 p=1731179 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 13:50:44,055 p=1731179 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.733074", "end": "2021-05-17 10:50:43.997674", "rc": 0, "start": "2021-05-17 10:50:43.264600", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.lXpNcCzOPJ/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.lXpNcCzOPJ/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 13:50:44,064 p=1731179 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:51:01,547 p=1731179 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:16.995008", "end": "2021-05-17 10:51:01.496771", "rc": 0, "start": "2021-05-17 10:50:44.501763", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (457 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (457 kB/s)", "Reading package lists..."]}
2021-05-17 13:51:01,556 p=1731179 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:51:02,491 p=1731179 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 13:51:02,491 p=1731179 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.447738", "end": "2021-05-17 10:51:02.443037", "rc": 0, "start": "2021-05-17 10:51:01.995299", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 13:51:02,499 p=1731179 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 13:51:02,529 p=1731544 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python-psycopg2']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-05-17 13:51:03,177 p=1731179 u=lma n=ansible | failed: [app-test] (item=['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python-psycopg2']) => {"ansible_loop_var": "item", "changed": false, "item": ["postgresql-11", "postgresql-contrib", "libpq-dev", "python-psycopg2"], "msg": "value of state must be one of: absent, build-dep, fixed, latest, present, got: installed"}
2021-05-17 13:51:03,179 p=1731179 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:51:03,179 p=1731179 u=lma n=ansible | app-test                   : ok=8    changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-17 13:51:49,500 p=1731740 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:51:49,506 p=1731740 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:51:49,506 p=1731740 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:51:49,738 p=1731740 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:51:49,748 p=1731740 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:51:51,516 p=1731740 u=lma n=ansible | ok: [app-test]
2021-05-17 13:51:51,524 p=1731740 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:51:51,562 p=1731740 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:51:51,575 p=1731740 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 13:51:59,158 p=1731740 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 13:51:59,166 p=1731740 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:52:02,347 p=1731740 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621248721, "cache_updated": true, "changed": true}
2021-05-17 13:52:02,355 p=1731740 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:52:04,055 p=1731740 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621248721, "cache_updated": false, "changed": false}
2021-05-17 13:52:04,064 p=1731740 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 13:52:05,320 p=1731740 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.687368", "end": "2021-05-17 10:52:05.265129", "rc": 0, "start": "2021-05-17 10:52:04.577761", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.RZYhilouvg/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.RZYhilouvg/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 13:52:05,332 p=1731740 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:52:21,341 p=1731740 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:15.540819", "end": "2021-05-17 10:52:21.293668", "rc": 0, "start": "2021-05-17 10:52:05.752849", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (479 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (479 kB/s)", "Reading package lists..."]}
2021-05-17 13:52:21,352 p=1731740 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:52:22,312 p=1731740 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 13:52:22,313 p=1731740 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.449614", "end": "2021-05-17 10:52:22.262876", "rc": 0, "start": "2021-05-17 10:52:21.813262", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 13:52:22,324 p=1731740 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 13:52:22,358 p=1733405 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python-psycopg2']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-05-17 13:52:25,392 p=1731740 u=lma n=ansible | failed: [app-test] (item=['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python-psycopg2']) => {"ansible_loop_var": "item", "changed": false, "item": ["postgresql-11", "postgresql-contrib", "libpq-dev", "python-psycopg2"], "msg": "No package matching 'python-psycopg2' is available"}
2021-05-17 13:52:25,394 p=1731740 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:52:25,395 p=1731740 u=lma n=ansible | app-test                   : ok=8    changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-17 13:53:02,339 p=1733614 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 13:53:02,345 p=1733614 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 13:53:02,346 p=1733614 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 13:53:02,577 p=1733614 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 13:53:02,588 p=1733614 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 13:53:04,376 p=1733614 u=lma n=ansible | ok: [app-test]
2021-05-17 13:53:04,383 p=1733614 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 13:53:04,422 p=1733614 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 13:53:04,430 p=1733614 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 13:53:12,214 p=1733614 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 13:53:12,223 p=1733614 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 13:53:15,437 p=1733614 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621248794, "cache_updated": true, "changed": true}
2021-05-17 13:53:15,447 p=1733614 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 13:53:17,212 p=1733614 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621248794, "cache_updated": false, "changed": false}
2021-05-17 13:53:17,221 p=1733614 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 13:53:18,503 p=1733614 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.708302", "end": "2021-05-17 10:53:18.449220", "rc": 0, "start": "2021-05-17 10:53:17.740918", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.lKfwY5lHp5/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.lKfwY5lHp5/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 13:53:18,512 p=1733614 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 13:53:34,162 p=1733614 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:15.182466", "end": "2021-05-17 10:53:34.118828", "rc": 0, "start": "2021-05-17 10:53:18.936362", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (492 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (492 kB/s)", "Reading package lists..."]}
2021-05-17 13:53:34,170 p=1733614 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 13:53:35,047 p=1733614 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 13:53:35,048 p=1733614 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.429303", "end": "2021-05-17 10:53:35.005896", "rc": 0, "start": "2021-05-17 10:53:34.576593", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 13:53:35,055 p=1733614 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 13:53:35,088 p=1734037 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-05-17 13:54:10,462 p=1733614 u=lma n=ansible | changed: [app-test] => (item=['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2']) => {"ansible_loop_var": "item", "cache_update_time": 1621248817, "cache_updated": true, "changed": true, "item": ["postgresql-11", "postgresql-contrib", "libpq-dev", "python3-psycopg2"], "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  postgresql-13 postgresql-client-13\nSuggested packages:\n  postgresql-doc-13 python-psycopg2-doc\nThe following NEW packages will be installed:\n  libpq-dev postgresql-13 postgresql-client-13 postgresql-contrib\n  python3-psycopg2\n0 upgraded, 5 newly installed, 0 to remove and 117 not upgraded.\nNeed to get 16.9 MB of archives.\nAfter this operation, 56.6 MB of additional disk space will be used.\nGet:1 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 libpq-dev amd64 13.3-1.pgdg20.04+1 [137 kB]\nGet:2 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-client-13 amd64 13.3-1.pgdg20.04+1 [1501 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-13 amd64 13.3-1.pgdg20.04+1 [15.1 MB]\nGet:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-contrib all 13+226.pgdg20.04+1 [65.2 kB]\nGet:5 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 python3-psycopg2 amd64 2.8.6-2~pgdg20.04+1 [120 kB]\nPreconfiguring packages ...\nFetched 16.9 MB in 3s (5411 kB/s)\nSelecting previously unselected package libpq-dev.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 73770 files and directories currently installed.)\r\nPreparing to unpack .../libpq-dev_13.3-1.pgdg20.04+1_amd64.deb ...\r\nUnpacking libpq-dev (13.3-1.pgdg20.04+1) ...\r\nSelecting previously unselected package postgresql-client-13.\r\nPreparing to unpack .../postgresql-client-13_13.3-1.pgdg20.04+1_amd64.deb ...\r\nUnpacking postgresql-client-13 (13.3-1.pgdg20.04+1) ...\r\nSelecting previously unselected package postgresql-13.\r\nPreparing to unpack .../postgresql-13_13.3-1.pgdg20.04+1_amd64.deb ...\r\nUnpacking postgresql-13 (13.3-1.pgdg20.04+1) ...\r\nSelecting previously unselected package postgresql-contrib.\r\nPreparing to unpack .../postgresql-contrib_13+226.pgdg20.04+1_all.deb ...\r\nUnpacking postgresql-contrib (13+226.pgdg20.04+1) ...\r\nSelecting previously unselected package python3-psycopg2.\r\nPreparing to unpack .../python3-psycopg2_2.8.6-2~pgdg20.04+1_amd64.deb ...\r\nUnpacking python3-psycopg2 (2.8.6-2~pgdg20.04+1) ...\r\nSetting up libpq-dev (13.3-1.pgdg20.04+1) ...\r\nSetting up postgresql-client-13 (13.3-1.pgdg20.04+1) ...\r\nupdate-alternatives: using /usr/share/postgresql/13/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode\r\nSetting up python3-psycopg2 (2.8.6-2~pgdg20.04+1) ...\r\nSetting up postgresql-13 (13.3-1.pgdg20.04+1) ...\r\nCreating new PostgreSQL cluster 13/main ...\r\n/usr/lib/postgresql/13/bin/initdb -D /var/lib/postgresql/13/main --auth-local peer --auth-host md5\r\nThe files belonging to this database system will be owned by user \"postgres\".\r\nThis user must also own the server process.\r\n\r\nThe database cluster will be initialized with locale \"C.UTF-8\".\r\nThe default database encoding has accordingly been set to \"UTF8\".\r\nThe default text search configuration will be set to \"english\".\r\n\r\nData page checksums are disabled.\r\n\r\nfixing permissions on existing directory /var/lib/postgresql/13/main ... ok\r\ncreating subdirectories ... ok\r\nselecting dynamic shared memory implementation ... posix\r\nselecting default max_connections ... 100\r\nselecting default shared_buffers ... 128MB\r\nselecting default time zone ... Etc/UTC\r\ncreating configuration files ... ok\r\nrunning bootstrap script ... ok\r\nperforming post-bootstrap initialization ... ok\r\nsyncing data to disk ... ok\r\n\r\nSuccess. You can now start the database server using:\r\n\r\n    pg_ctlcluster 13 main start\r\n\r\nVer Cluster Port Status Owner    Data directory              Log file\r\n\u001b[31m13  main    5433 down   postgres /var/lib/postgresql/13/main /var/log/postgresql/postgresql-13-main.log\u001b[0m\r\nupdate-alternatives: using /usr/share/postgresql/13/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode\r\nSetting up postgresql-contrib (13+226.pgdg20.04+1) ...\r\nProcessing triggers for postgresql-common (226.pgdg20.04+1) ...\r\nBuilding PostgreSQL dictionaries from installed myspell/hunspell packages...\r\nRemoving obsolete dictionary files:\r\nProcessing triggers for man-db (2.9.1-1) ...\r\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following additional packages will be installed:", "  postgresql-13 postgresql-client-13", "Suggested packages:", "  postgresql-doc-13 python-psycopg2-doc", "The following NEW packages will be installed:", "  libpq-dev postgresql-13 postgresql-client-13 postgresql-contrib", "  python3-psycopg2", "0 upgraded, 5 newly installed, 0 to remove and 117 not upgraded.", "Need to get 16.9 MB of archives.", "After this operation, 56.6 MB of additional disk space will be used.", "Get:1 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 libpq-dev amd64 13.3-1.pgdg20.04+1 [137 kB]", "Get:2 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-client-13 amd64 13.3-1.pgdg20.04+1 [1501 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-13 amd64 13.3-1.pgdg20.04+1 [15.1 MB]", "Get:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-contrib all 13+226.pgdg20.04+1 [65.2 kB]", "Get:5 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 python3-psycopg2 amd64 2.8.6-2~pgdg20.04+1 [120 kB]", "Preconfiguring packages ...", "Fetched 16.9 MB in 3s (5411 kB/s)", "Selecting previously unselected package libpq-dev.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 73770 files and directories currently installed.)", "Preparing to unpack .../libpq-dev_13.3-1.pgdg20.04+1_amd64.deb ...", "Unpacking libpq-dev (13.3-1.pgdg20.04+1) ...", "Selecting previously unselected package postgresql-client-13.", "Preparing to unpack .../postgresql-client-13_13.3-1.pgdg20.04+1_amd64.deb ...", "Unpacking postgresql-client-13 (13.3-1.pgdg20.04+1) ...", "Selecting previously unselected package postgresql-13.", "Preparing to unpack .../postgresql-13_13.3-1.pgdg20.04+1_amd64.deb ...", "Unpacking postgresql-13 (13.3-1.pgdg20.04+1) ...", "Selecting previously unselected package postgresql-contrib.", "Preparing to unpack .../postgresql-contrib_13+226.pgdg20.04+1_all.deb ...", "Unpacking postgresql-contrib (13+226.pgdg20.04+1) ...", "Selecting previously unselected package python3-psycopg2.", "Preparing to unpack .../python3-psycopg2_2.8.6-2~pgdg20.04+1_amd64.deb ...", "Unpacking python3-psycopg2 (2.8.6-2~pgdg20.04+1) ...", "Setting up libpq-dev (13.3-1.pgdg20.04+1) ...", "Setting up postgresql-client-13 (13.3-1.pgdg20.04+1) ...", "update-alternatives: using /usr/share/postgresql/13/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode", "Setting up python3-psycopg2 (2.8.6-2~pgdg20.04+1) ...", "Setting up postgresql-13 (13.3-1.pgdg20.04+1) ...", "Creating new PostgreSQL cluster 13/main ...", "/usr/lib/postgresql/13/bin/initdb -D /var/lib/postgresql/13/main --auth-local peer --auth-host md5", "The files belonging to this database system will be owned by user \"postgres\".", "This user must also own the server process.", "", "The database cluster will be initialized with locale \"C.UTF-8\".", "The default database encoding has accordingly been set to \"UTF8\".", "The default text search configuration will be set to \"english\".", "", "Data page checksums are disabled.", "", "fixing permissions on existing directory /var/lib/postgresql/13/main ... ok", "creating subdirectories ... ok", "selecting dynamic shared memory implementation ... posix", "selecting default max_connections ... 100", "selecting default shared_buffers ... 128MB", "selecting default time zone ... Etc/UTC", "creating configuration files ... ok", "running bootstrap script ... ok", "performing post-bootstrap initialization ... ok", "syncing data to disk ... ok", "", "Success. You can now start the database server using:", "", "    pg_ctlcluster 13 main start", "", "Ver Cluster Port Status Owner    Data directory              Log file", "\u001b[31m13  main    5433 down   postgres /var/lib/postgresql/13/main /var/log/postgresql/postgresql-13-main.log\u001b[0m", "update-alternatives: using /usr/share/postgresql/13/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode", "Setting up postgresql-contrib (13+226.pgdg20.04+1) ...", "Processing triggers for postgresql-common (226.pgdg20.04+1) ...", "Building PostgreSQL dictionaries from installed myspell/hunspell packages...", "Removing obsolete dictionary files:", "Processing triggers for man-db (2.9.1-1) ..."]}
2021-05-17 13:54:10,470 p=1733614 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 13:54:10,955 p=1733614 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "systemctl status postgresql", "delta": "0:00:00.013677", "end": "2021-05-17 10:54:10.911962", "rc": 0, "start": "2021-05-17 10:54:10.898285", "stderr": "", "stderr_lines": [], "stdout": "● postgresql.service - PostgreSQL RDBMS\n     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)\n     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 42min ago\n   Main PID: 8359 (code=exited, status=0/SUCCESS)\n      Tasks: 0 (limit: 2281)\n     Memory: 0B\n     CGroup: /system.slice/postgresql.service\n\nMay 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...\nMay 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS.", "stdout_lines": ["● postgresql.service - PostgreSQL RDBMS", "     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)", "     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 42min ago", "   Main PID: 8359 (code=exited, status=0/SUCCESS)", "      Tasks: 0 (limit: 2281)", "     Memory: 0B", "     CGroup: /system.slice/postgresql.service", "", "May 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...", "May 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS."]}
2021-05-17 13:54:10,964 p=1733614 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 13:54:10,999 p=1733614 u=lma n=ansible | skipping: [app-test] => {}
2021-05-17 13:54:11,009 p=1733614 u=lma n=ansible | TASK [app-test : Create Postgres db] ********************************************************************************************************************************************************************************
2021-05-17 13:54:11,328 p=1733614 u=lma n=ansible | fatal: [app-test]: FAILED! => {"msg": "Failed to set permissions on the temporary files Ansible needs to create when becoming an unprivileged user (rc: 1, err: chown: changing ownership of '/var/tmp/ansible-tmp-1621248851.0214038-260798966648374/': Operation not permitted\nchown: changing ownership of '/var/tmp/ansible-tmp-1621248851.0214038-260798966648374/AnsiballZ_postgresql_db.py': Operation not permitted\n}). For information on working around this, see https://docs.ansible.com/ansible/become.html#becoming-an-unprivileged-user"}
2021-05-17 13:54:11,330 p=1733614 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 13:54:11,330 p=1733614 u=lma n=ansible | app-test                   : ok=10   changed=6    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-05-17 14:00:04,330 p=1735533 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 14:00:04,336 p=1735533 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 14:00:04,337 p=1735533 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 14:00:04,564 p=1735533 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 14:00:04,574 p=1735533 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 14:00:07,618 p=1735533 u=lma n=ansible | ok: [app-test]
2021-05-17 14:00:07,629 p=1735533 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 14:00:07,667 p=1735533 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 14:00:07,675 p=1735533 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 14:00:15,163 p=1735533 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 14:00:15,174 p=1735533 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 14:00:18,473 p=1735533 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621249217, "cache_updated": true, "changed": true}
2021-05-17 14:00:18,482 p=1735533 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 14:00:20,175 p=1735533 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621249217, "cache_updated": false, "changed": false}
2021-05-17 14:00:20,186 p=1735533 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 14:00:21,496 p=1735533 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.717158", "end": "2021-05-17 11:00:21.441269", "rc": 0, "start": "2021-05-17 11:00:20.724111", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.HQCRT4OSAc/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.HQCRT4OSAc/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 14:00:21,507 p=1735533 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 14:00:36,903 p=1735533 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:14.907643", "end": "2021-05-17 11:00:36.862142", "rc": 0, "start": "2021-05-17 11:00:21.954499", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (449 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (449 kB/s)", "Reading package lists..."]}
2021-05-17 14:00:36,914 p=1735533 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 14:00:38,074 p=1735533 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 14:00:38,074 p=1735533 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.610268", "end": "2021-05-17 11:00:38.034225", "rc": 0, "start": "2021-05-17 11:00:37.423957", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 14:00:38,084 p=1735533 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 14:00:38,114 p=1735907 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-05-17 14:00:41,992 p=1735533 u=lma n=ansible | ok: [app-test] => (item=['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2']) => {"ansible_loop_var": "item", "cache_update_time": 1621249240, "cache_updated": true, "changed": false, "item": ["postgresql-11", "postgresql-contrib", "libpq-dev", "python3-psycopg2"]}
2021-05-17 14:00:42,004 p=1735533 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 14:00:42,475 p=1735533 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "systemctl status postgresql", "delta": "0:00:00.013324", "end": "2021-05-17 11:00:42.435715", "rc": 0, "start": "2021-05-17 11:00:42.422391", "stderr": "", "stderr_lines": [], "stdout": "● postgresql.service - PostgreSQL RDBMS\n     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)\n     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 48min ago\n   Main PID: 8359 (code=exited, status=0/SUCCESS)\n      Tasks: 0 (limit: 2281)\n     Memory: 0B\n     CGroup: /system.slice/postgresql.service\n\nMay 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...\nMay 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS.", "stdout_lines": ["● postgresql.service - PostgreSQL RDBMS", "     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)", "     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 48min ago", "   Main PID: 8359 (code=exited, status=0/SUCCESS)", "      Tasks: 0 (limit: 2281)", "     Memory: 0B", "     CGroup: /system.slice/postgresql.service", "", "May 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...", "May 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS."]}
2021-05-17 14:00:42,484 p=1735533 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 14:00:42,518 p=1735533 u=lma n=ansible | skipping: [app-test] => {}
2021-05-17 14:00:42,524 p=1735533 u=lma n=ansible | TASK [app-test : Create Postgres db] ********************************************************************************************************************************************************************************
2021-05-17 14:00:42,870 p=1735533 u=lma n=ansible | fatal: [app-test]: FAILED! => {"msg": "Failed to set permissions on the temporary files Ansible needs to create when becoming an unprivileged user (rc: 1, err: chown: changing ownership of '/var/tmp/ansible-tmp-1621249242.5392995-140465707641734/': Operation not permitted\nchown: changing ownership of '/var/tmp/ansible-tmp-1621249242.5392995-140465707641734/AnsiballZ_postgresql_db.py': Operation not permitted\n}). For information on working around this, see https://docs.ansible.com/ansible/become.html#becoming-an-unprivileged-user"}
2021-05-17 14:00:42,871 p=1735533 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 14:00:42,872 p=1735533 u=lma n=ansible | app-test                   : ok=10   changed=5    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-05-17 14:07:16,573 p=1737300 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 14:07:16,579 p=1737300 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 14:07:16,579 p=1737300 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 14:07:16,820 p=1737300 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 14:07:16,831 p=1737300 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 14:07:19,839 p=1737300 u=lma n=ansible | ok: [app-test]
2021-05-17 14:07:19,847 p=1737300 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 14:07:19,883 p=1737300 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 14:07:19,891 p=1737300 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 14:07:27,466 p=1737300 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 14:07:27,474 p=1737300 u=lma n=ansible | TASK [app-test : Update apt] ****************************************************************************************************************************************************************************************
2021-05-17 14:07:30,543 p=1737300 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621249649, "cache_updated": true, "changed": true}
2021-05-17 14:07:30,554 p=1737300 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 14:07:44,949 p=1737300 u=lma n=ansible | changed: [app-test] => {"cache_update_time": 1621249649, "cache_updated": false, "changed": true, "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following NEW packages will be installed:\n  acl\n0 upgraded, 1 newly installed, 0 to remove and 117 not upgraded.\nNeed to get 37.8 kB of archives.\nAfter this operation, 197 kB of additional disk space will be used.\nGet:1 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 acl amd64 2.2.53-6 [37.8 kB]\nFetched 37.8 kB in 0s (287 kB/s)\nSelecting previously unselected package acl.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 75644 files and directories currently installed.)\r\nPreparing to unpack .../acl_2.2.53-6_amd64.deb ...\r\nUnpacking acl (2.2.53-6) ...\r\nSetting up acl (2.2.53-6) ...\r\nProcessing triggers for man-db (2.9.1-1) ...\r\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following NEW packages will be installed:", "  acl", "0 upgraded, 1 newly installed, 0 to remove and 117 not upgraded.", "Need to get 37.8 kB of archives.", "After this operation, 197 kB of additional disk space will be used.", "Get:1 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 acl amd64 2.2.53-6 [37.8 kB]", "Fetched 37.8 kB in 0s (287 kB/s)", "Selecting previously unselected package acl.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 75644 files and directories currently installed.)", "Preparing to unpack .../acl_2.2.53-6_amd64.deb ...", "Unpacking acl (2.2.53-6) ...", "Setting up acl (2.2.53-6) ...", "Processing triggers for man-db (2.9.1-1) ..."]}
2021-05-17 14:07:44,958 p=1737300 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 14:07:46,338 p=1737300 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.800857", "end": "2021-05-17 11:07:46.291916", "rc": 0, "start": "2021-05-17 11:07:45.491059", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.SR80mzg6j3/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.SR80mzg6j3/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 14:07:46,346 p=1737300 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 14:08:01,903 p=1737300 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:15.071107", "end": "2021-05-17 11:08:01.857601", "rc": 0, "start": "2021-05-17 11:07:46.786494", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (364 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (364 kB/s)", "Reading package lists..."]}
2021-05-17 14:08:01,915 p=1737300 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 14:08:02,913 p=1737300 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 14:08:02,913 p=1737300 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.518264", "end": "2021-05-17 11:08:02.866061", "rc": 0, "start": "2021-05-17 11:08:02.347797", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 14:08:02,926 p=1737300 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 14:08:02,960 p=1737717 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-05-17 14:08:06,264 p=1737300 u=lma n=ansible | ok: [app-test] => (item=['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2']) => {"ansible_loop_var": "item", "cache_update_time": 1621249684, "cache_updated": true, "changed": false, "item": ["postgresql-11", "postgresql-contrib", "libpq-dev", "python3-psycopg2"]}
2021-05-17 14:08:06,271 p=1737300 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 14:08:06,761 p=1737300 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "systemctl status postgresql", "delta": "0:00:00.014380", "end": "2021-05-17 11:08:06.707754", "rc": 0, "start": "2021-05-17 11:08:06.693374", "stderr": "", "stderr_lines": [], "stdout": "● postgresql.service - PostgreSQL RDBMS\n     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)\n     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 56min ago\n   Main PID: 8359 (code=exited, status=0/SUCCESS)\n      Tasks: 0 (limit: 2281)\n     Memory: 0B\n     CGroup: /system.slice/postgresql.service\n\nMay 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...\nMay 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS.", "stdout_lines": ["● postgresql.service - PostgreSQL RDBMS", "     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)", "     Active: active (exited) since Mon 2021-05-17 10:12:05 UTC; 56min ago", "   Main PID: 8359 (code=exited, status=0/SUCCESS)", "      Tasks: 0 (limit: 2281)", "     Memory: 0B", "     CGroup: /system.slice/postgresql.service", "", "May 17 10:12:05 docker-test1 systemd[1]: Starting PostgreSQL RDBMS...", "May 17 10:12:05 docker-test1 systemd[1]: Finished PostgreSQL RDBMS."]}
2021-05-17 14:08:06,769 p=1737300 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 14:08:06,806 p=1737300 u=lma n=ansible | skipping: [app-test] => {}
2021-05-17 14:08:06,816 p=1737300 u=lma n=ansible | TASK [app-test : Create Postgres db] ********************************************************************************************************************************************************************************
2021-05-17 14:08:08,009 p=1737300 u=lma n=ansible | changed: [app-test] => {"changed": true, "db": "app"}
2021-05-17 14:08:08,019 p=1737300 u=lma n=ansible | TASK [app-test : Create Postgres DB user] ***************************************************************************************************************************************************************************
2021-05-17 14:08:08,917 p=1737300 u=lma n=ansible | [WARNING]: Module did not set no_log for no_password_changes

2021-05-17 14:08:08,917 p=1737300 u=lma n=ansible | changed: [app-test] => {"changed": true, "queries": ["CREATE USER \"********\" WITH ENCRYPTED PASSWORD %(password)s ", "GRANT CREATE, CONNECT, TEMPORARY ON DATABASE \"app\" TO \"********\""], "user": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"}
2021-05-17 14:08:08,920 p=1737300 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 14:08:08,920 p=1737300 u=lma n=ansible | app-test                   : ok=12   changed=8    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2021-05-17 14:47:28,035 p=1747598 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 14:47:28,041 p=1747598 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 14:47:28,042 p=1747598 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 14:47:28,176 p=1747598 u=lma n=ansible | ERROR! failed to combine variables, expected dicts but got a 'dict' and a 'AnsibleUnicode': 
{}
"project_name=\"python-sample-app\""
2021-05-17 14:48:17,748 p=1747778 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 14:48:17,755 p=1747778 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 14:48:17,755 p=1747778 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 14:48:17,985 p=1747778 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 14:48:17,996 p=1747778 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 14:48:21,049 p=1747778 u=lma n=ansible | ok: [app-test]
2021-05-17 14:48:21,055 p=1747778 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 14:48:21,091 p=1747778 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 14:48:21,105 p=1747778 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 14:48:24,557 p=1747778 u=lma n=ansible | ok: [app-test] => {"cache_update_time": 1621252103, "cache_updated": true, "changed": false}
2021-05-17 14:48:24,567 p=1747778 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 14:48:25,955 p=1747778 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "delta": "0:00:00.777267", "end": "2021-05-17 11:48:25.889643", "rc": 0, "start": "2021-05-17 11:48:25.112376", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)\ngpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)", "gpg: key 7FCC7D46ACCC4CF8: \"PostgreSQL Debian Repository\" not changed", "gpg: Total number processed: 1", "gpg:              unchanged: 1"], "stdout": "Executing: /tmp/apt-key-gpghome.AlvsAvZsx3/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8", "stdout_lines": ["Executing: /tmp/apt-key-gpghome.AlvsAvZsx3/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys 7FCC7D46ACCC4CF8"]}
2021-05-17 14:48:25,967 p=1747778 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 14:48:42,097 p=1747778 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "add-apt-repository \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -sc)-pgdg main\"", "delta": "0:00:15.672501", "end": "2021-05-17 11:48:42.054753", "rc": 0, "start": "2021-05-17 11:48:26.382252", "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\nGet:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]\nGet:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]\nGet:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]\nFetched 405 kB in 1s (444 kB/s)\nReading package lists...", "stdout_lines": ["Hit:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease", "Get:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]", "Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]", "Get:4 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]", "Get:5 http://ru.archive.ubuntu.com/ubuntu focal-security InRelease [109 kB]", "Fetched 405 kB in 1s (444 kB/s)", "Reading package lists..."]}
2021-05-17 14:48:42,107 p=1747778 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 14:48:43,035 p=1747778 u=lma n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'wget'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2021-05-17 14:48:43,036 p=1747778 u=lma n=ansible | changed: [app-test] => {"changed": true, "cmd": "wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -", "delta": "0:00:00.460265", "end": "2021-05-17 11:48:42.991614", "rc": 0, "start": "2021-05-17 11:48:42.531349", "stderr": "Warning: apt-key output should not be parsed (stdout is not a terminal)", "stderr_lines": ["Warning: apt-key output should not be parsed (stdout is not a terminal)"], "stdout": "OK", "stdout_lines": ["OK"]}
2021-05-17 14:48:43,044 p=1747778 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 14:48:43,078 p=1747962 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2', 'python-pip', 'python3-pip']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2021-05-17 14:48:45,846 p=1747778 u=lma n=ansible | failed: [app-test] (item=['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2', 'python-pip', 'python3-pip']) => {"ansible_loop_var": "item", "changed": false, "item": ["postgresql-11", "postgresql-contrib", "libpq-dev", "python3-psycopg2", "python-pip", "python3-pip"], "msg": "No package matching 'python-pip' is available"}
2021-05-17 14:48:45,849 p=1747778 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 14:48:45,849 p=1747778 u=lma n=ansible | app-test                   : ok=6    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-05-17 14:49:30,140 p=1748126 u=lma n=ansible | Using /home/lma/work/new/ansible-test/ansible.cfg as config file
2021-05-17 14:49:30,146 p=1748126 u=lma n=ansible | [DEPRECATION WARNING]: The TRANSFORM_INVALID_GROUP_CHARS settings is set to allow bad characters in group names by default, this will change, but still be user configurable on deprecation. This feature will be 
removed in version 2.10. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-05-17 14:49:30,146 p=1748126 u=lma n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-05-17 14:49:30,400 p=1748126 u=lma n=ansible | PLAY [Install app-test] *********************************************************************************************************************************************************************************************
2021-05-17 14:49:30,411 p=1748126 u=lma n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************************************************************************
2021-05-17 14:49:32,370 p=1748126 u=lma n=ansible | ok: [app-test]
2021-05-17 14:49:32,382 p=1748126 u=lma n=ansible | TASK [app-test : distr] *********************************************************************************************************************************************************************************************
2021-05-17 14:49:32,417 p=1748126 u=lma n=ansible | ok: [app-test] => {
    "msg": "Ubuntu 20"
}
2021-05-17 14:49:32,426 p=1748126 u=lma n=ansible | TASK [app-test : Prepare] *******************************************************************************************************************************************************************************************
2021-05-17 14:49:32,459 p=1748126 u=lma n=ansible | skipping: [app-test] => {"changed": false, "skip_reason": "Conditional result was False"}
2021-05-17 14:49:32,469 p=1748126 u=lma n=ansible | TASK [app-test : Add pubkey Postgres repo] **************************************************************************************************************************************************************************
2021-05-17 14:49:32,505 p=1748126 u=lma n=ansible | skipping: [app-test] => {"changed": false, "skip_reason": "Conditional result was False"}
2021-05-17 14:49:32,514 p=1748126 u=lma n=ansible | TASK [app-test : Add Postgres repo] *********************************************************************************************************************************************************************************
2021-05-17 14:49:32,550 p=1748126 u=lma n=ansible | skipping: [app-test] => {"changed": false, "skip_reason": "Conditional result was False"}
2021-05-17 14:49:32,558 p=1748126 u=lma n=ansible | TASK [app-test : Add Postgres key] **********************************************************************************************************************************************************************************
2021-05-17 14:49:32,597 p=1748126 u=lma n=ansible | skipping: [app-test] => {"changed": false, "skip_reason": "Conditional result was False"}
2021-05-17 14:49:32,603 p=1748126 u=lma n=ansible | TASK [app-test : Install Postgres] **********************************************************************************************************************************************************************************
2021-05-17 14:49:32,634 p=1748160 u=lma n=ansible | [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: 
['postgresql-11', 'postgresql-contrib', 'libpq-dev', 'python3-psycopg2', 'python3-pip']` and remove the loop. This feature will be removed in version 2.11. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-05-17 14:49:32,651 p=1748126 u=lma n=ansible | skipping: [app-test] => (item=[])  => {"ansible_loop_var": "item", "changed": false, "item": [], "skip_reason": "Conditional result was False"}
2021-05-17 14:49:32,658 p=1748126 u=lma n=ansible | TASK [app-test : Check status Postgres] *****************************************************************************************************************************************************************************
2021-05-17 14:49:32,692 p=1748126 u=lma n=ansible | skipping: [app-test] => {"changed": false, "skip_reason": "Conditional result was False"}
2021-05-17 14:49:32,696 p=1748126 u=lma n=ansible | TASK [app-test : empty task] ****************************************************************************************************************************************************************************************
2021-05-17 14:49:32,730 p=1748126 u=lma n=ansible | skipping: [app-test] => {}
2021-05-17 14:49:32,737 p=1748126 u=lma n=ansible | TASK [app-test : Create Postgres db] ********************************************************************************************************************************************************************************
2021-05-17 14:49:33,327 p=1748126 u=lma n=ansible | ok: [app-test] => {"changed": false, "db": "app"}
2021-05-17 14:49:33,338 p=1748126 u=lma n=ansible | TASK [app-test : Create Postgres DB user] ***************************************************************************************************************************************************************************
2021-05-17 14:49:33,964 p=1748126 u=lma n=ansible | [WARNING]: Module did not set no_log for no_password_changes

2021-05-17 14:49:33,965 p=1748126 u=lma n=ansible | ok: [app-test] => {"changed": false, "queries": [], "user": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"}
2021-05-17 14:49:33,978 p=1748126 u=lma n=ansible | TASK [app-test : copy app] ******************************************************************************************************************************************************************************************
2021-05-17 14:49:40,831 p=1748126 u=lma n=ansible | ok: [app-test] => {"changed": false, "dest": "/opt/", "src": "/home/lma/work/new/ansible-test/roles/app-test/files/python-sample-app"}
2021-05-17 14:49:40,840 p=1748126 u=lma n=ansible | TASK [app-test : create virtualenv and install django in it] ********************************************************************************************************************************************************
2021-05-17 14:49:41,570 p=1748126 u=lma n=ansible | fatal: [app-test]: FAILED! => {"changed": false, "msg": "Failed to find required executable virtualenv in paths: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin"}
2021-05-17 14:49:41,572 p=1748126 u=lma n=ansible | PLAY RECAP **********************************************************************************************************************************************************************************************************
2021-05-17 14:49:41,572 p=1748126 u=lma n=ansible | app-test                   : ok=5    changed=0    unreachable=0    failed=1    skipped=7    rescued=0    ignored=0   
